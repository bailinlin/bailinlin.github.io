<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="å‰ç«¯,ç™½éœ¸å¤©,åšå®¢">
<meta property="og:type" content="website">
<meta property="og:title" content="ç™½éœ¸å¤©çš„åšå®¢">
<meta property="og:url" content="https://bailinlin.github.com/index.html">
<meta property="og:site_name" content="ç™½éœ¸å¤©çš„åšå®¢">
<meta property="og:description" content="å‰ç«¯,ç™½éœ¸å¤©,åšå®¢">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç™½éœ¸å¤©çš„åšå®¢">
<meta name="twitter:description" content="å‰ç«¯,ç™½éœ¸å¤©,åšå®¢">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://bailinlin.github.com/"/>





  <title> ç™½éœ¸å¤©çš„åšå®¢ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ç™½éœ¸å¤©çš„åšå®¢</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2018/05/07/vue-cli-webpack/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/05/07/vue-cli-webpack/" itemprop="url">
                  vue-cli#4.7é¡¹ç›®ç»“æ„åˆ†æ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-07T14:11:04+08:00">
                2018-05-07
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/05/07/vue-cli-webpack/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/05/07/vue-cli-webpack/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä½¿ç”¨è¿‡ vue è¿›è¡Œé¡¹ç›®å¼€å‘çš„åŒå­¦ï¼Œä¸€å®šçŸ¥é“æˆ–è€…ä½¿ç”¨è¿‡ vue-cli è„šæ‰‹æ¶ï¼Œä»–èƒ½å¤Ÿå¾ˆå¥½çš„æ­å»ºé¡¹ç›®ç»“æ„å’Œå·¥ç¨‹ï¼Œè®©æˆ‘ä»¬èƒ½å¤ŸæŠŠè¶³å¤Ÿçš„ç²¾åŠ›æ”¾åœ¨ä¸šåŠ¡å¼€å‘ä¸Šã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šå› ä¸ºé¡¹ç›®å·¥æœŸçŸ­ç­‰åŸå› æ¥ä¸åŠæˆ–åˆ™ä¸ä¼šåˆ»æ„å»äº†è§£é¡¹ç›®å·¥ç¨‹é…ç½®ï¼Œæˆ‘ä»¬ä»Šå¤©ä¸å»ä»‹ç»è„šæ‰‹æ¶çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å»äº†è§£ä¸‹è„šæ‰‹æ¶ä¸ºæˆ‘ä»¬åˆ›å»ºå¥½çš„æ‰“åŒ…å·¥ç¨‹æ˜¯æ€ä¹ˆåšçš„ã€‚</p>
<h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p><code></code></p>
<pre><code>â”œâ”€â”€ build --------------------------------- webpackç›¸å…³é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ build.js --------------------------webpackæ‰“åŒ…é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ check-versions.js ------------------------------ æ£€æŸ¥npm,nodejsç‰ˆæœ¬
â”‚   â”œâ”€â”€ logo.png ---------------------------------- é¡¹ç›® logo
â”‚   â”œâ”€â”€ utils.js --------------------------------------- é…ç½®èµ„æºè·¯å¾„ï¼Œé…ç½®cssåŠ è½½å™¨
â”‚   â”œâ”€â”€ vue-loader.conf.js ----------------------------- é…ç½®cssåŠ è½½å™¨ç­‰
â”‚   â”œâ”€â”€ webpack.base.conf.js --------------------------- webpackåŸºæœ¬é…ç½®
â”‚   â”œâ”€â”€ webpack.dev.conf.js ---------------------------- ç”¨äºå¼€å‘çš„webpackè®¾ç½®
â”‚   â”œâ”€â”€ webpack.prod.conf.js --------------------------- ç”¨äºæ‰“åŒ…çš„webpackè®¾ç½®
â”œâ”€â”€ config ---------------------------------- é…ç½®æ–‡ä»¶
       â”œâ”€â”€ index.js ------------------------------ å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶
â”œâ”€â”€ node_modules ---------------------------- å­˜æ”¾ä¾èµ–çš„ç›®å½•
â”œâ”€â”€ src ------------------------------------- æºç 
â”‚   â”œâ”€â”€ assets ------------------------------ é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ components -------------------------- ç»„ä»¶
â”‚   â”œâ”€â”€ main.js ----------------------------- ä¸»js
â”‚   â”œâ”€â”€ App.vue ----------------------------- é¡¹ç›®å…¥å£ç»„ä»¶
â”‚   â”œâ”€â”€ router ------------------------------ è·¯ç”±
â”œâ”€â”€ package.json ---------------------------- nodeé…ç½®æ–‡ä»¶
â”œâ”€â”€ .babelrc--------------------------------- babelé…ç½®æ–‡ä»¶
â”œâ”€â”€ .editorconfig---------------------------- ç¼–è¾‘å™¨é…ç½®
â”œâ”€â”€ .gitignore------------------------------- é…ç½®gitå¯å¿½ç•¥çš„æ–‡ä»¶
</code></pre><p></p>
<h3 id="webpacké…ç½®åˆ’é‡ç‚¹"><a href="#webpacké…ç½®åˆ’é‡ç‚¹" class="headerlink" title="webpacké…ç½®åˆ’é‡ç‚¹"></a>webpacké…ç½®åˆ’é‡ç‚¹</h3><blockquote>
<p>åœ¨çœ‹é¡¹ç›®é…ç½®æ–‡ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹ webpack å‡ ä¸ªå¸¸ç”¨çš„å·¥å…·å’Œæ’ä»¶ï¼Œå¦‚æœä½ å·²ç»ååˆ†ç†Ÿæ‚‰ï¼Œä½ å¯ä»¥è·³è¿‡è¿™ä¸€å°èŠ‚ï¼Œç›´æ¥å»çœ‹ï¼Œé…ç½®æ–‡ä»¶è§£æ</p>
</blockquote>
<h4 id="1-pathæ¨¡å—"><a href="#1-pathæ¨¡å—" class="headerlink" title="1. pathæ¨¡å—"></a>1. pathæ¨¡å—</h4><p>path æ˜¯ node.js ä¸­çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºå¤„ç†ç›®å½•çš„å¯¹è±¡ï¼Œæé«˜å¼€å‘æ•ˆ</p>
<pre>

    å¸¸ç”¨æ–¹æ³•ï¼š
    path.join(): ç”¨äºè¿æ¥è·¯å¾„ã€‚è¯¥æ–¹æ³•çš„ä¸»è¦ç”¨é€”åœ¨äºï¼Œä¼šæ­£ç¡®ä½¿ç”¨å½“å‰ç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦ï¼ŒUnix ç³»ç»Ÿæ˜¯ â€/â€œï¼ŒWindowsç³»ç»Ÿæ˜¯ â€\â€œ
    path.resolve() ç”¨äºå°†ç›¸å¯¹è·¯å¾„è½¬ä¸ºç»å¯¹è·¯å¾„

    å¸¸ä½¿ç”¨çš„æ–‡ä»¶è·¯å¾„
    __dirname: æ€»æ˜¯è¿”å›è¢«æ‰§è¡Œçš„ js æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„
    __filename: æ€»æ˜¯è¿”å›è¢«æ‰§è¡Œçš„ js çš„ç»å¯¹è·¯å¾„
    process.cwd(): æ€»æ˜¯è¿”å›è¿è¡Œ node å‘½ä»¤æ—¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„

</pre>

<h4 id="2-process"><a href="#2-process" class="headerlink" title="2.process"></a>2.process</h4><p>processå¯¹è±¡æ˜¯Nodeçš„ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæä¾›å½“å‰Nodeè¿›ç¨‹çš„ä¿¡æ¯ã€‚</p>
<pre>

    process å¯¹è±¡æä¾›ä¸€ç³»åˆ—å±æ€§ï¼Œç”¨äºè¿”å›ç³»ç»Ÿä¿¡æ¯
    process.argvï¼šè¿”å›å½“å‰è¿›ç¨‹çš„å‘½ä»¤è¡Œå‚æ•°æ•°ç»„ã€‚
    process.envï¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæˆå‘˜ä¸ºå½“å‰Shellçš„ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚process.env.HOME
    process.pidï¼šå½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·

</pre>

<h4 id="3-Source-map"><a href="#3-Source-map" class="headerlink" title="3.Source map"></a>3.Source map</h4><p>ç®€å•è¯´ï¼Œ<a href="http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html" target="_blank" rel="external">Source map</a>å°±æ˜¯ä¸€ä¸ªä¿¡æ¯æ–‡ä»¶ï¼Œé‡Œé¢å‚¨å­˜ç€ä½ç½®ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè½¬æ¢åçš„ä»£ç çš„æ¯ä¸€ä¸ªä½ç½®ï¼Œæ‰€å¯¹åº”çš„è½¬æ¢å‰çš„ä½ç½®ã€‚æœ‰äº†å®ƒï¼Œå‡ºé”™çš„æ—¶å€™ï¼Œdebug å·¥å…·å°†ç›´æ¥æ˜¾ç¤ºåŸå§‹ä»£ç ï¼Œè€Œä¸æ˜¯è½¬æ¢åçš„ä»£ç ã€‚è¿™æ— ç–‘ç»™å¼€å‘è€…å¸¦æ¥äº†å¾ˆå¤§æ–¹ä¾¿ã€‚<a href="https://juejin.im/post/58293502a0bb9f005767ba2f" target="_blank" rel="external">webpack çš„ devtoolé‡Œæœ‰ 7ç§ SourceMap æ¨¡å¼</a></p>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td>eval</td>
<td>æ¯ä¸ª module ä¼šå°è£…åˆ° eval é‡ŒåŒ…è£¹èµ·æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ä¼šåœ¨æœ«å°¾è¿½åŠ æ³¨é‡Š //@ sourceURL</td>
</tr>
<tr>
<td>source-map</td>
<td>ç”Ÿæˆä¸€ä¸ª SourceMap æ–‡ä»¶.</td>
</tr>
<tr>
<td>hidden-source-map</td>
<td>å’Œ source-map ä¸€æ ·ï¼Œä½†ä¸ä¼šåœ¨ bundle æœ«å°¾è¿½åŠ æ³¨é‡Š.</td>
</tr>
<tr>
<td>inline-source-map</td>
<td>ç”Ÿæˆä¸€ä¸ª DataUrl å½¢å¼çš„ SourceMap æ–‡ä»¶.</td>
</tr>
<tr>
<td>eval-source-map</td>
<td>æ¯ä¸ª module ä¼šé€šè¿‡ eval() æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ª DataUrl å½¢å¼çš„ SourceMap .</td>
</tr>
<tr>
<td>cheap-source-map</td>
<td>ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯ï¼ˆcolumn-mappingsï¼‰çš„ SourceMaps æ–‡ä»¶ï¼Œä¸åŒ…å« loader çš„ sourcemapï¼ˆè­¬å¦‚ babel çš„ sourcemapï¼‰</td>
</tr>
<tr>
<td>cheap-module-source-map</td>
<td>ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯ï¼ˆcolumn-mappingsï¼‰çš„ SourceMaps æ–‡ä»¶ï¼ŒåŒæ—¶ loader çš„ sourcemap ä¹Ÿè¢«ç®€åŒ–ä¸ºåªåŒ…å«å¯¹åº”è¡Œçš„ã€‚</td>
</tr>
</tbody>
</table>
<h4 id="4-webpack-merge"><a href="#4-webpack-merge" class="headerlink" title="4. webpack-merge"></a>4. webpack-merge</h4><p>å¼€å‘ç¯å¢ƒ(development)å’Œç”Ÿäº§ç¯å¢ƒ(production)çš„æ„å»ºç›®æ ‡å·®å¼‚å¾ˆå¤§ã€‚åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…·æœ‰å¼ºå¤§çš„ã€å…·æœ‰å®æ—¶é‡æ–°åŠ è½½(live reloading)æˆ–çƒ­æ¨¡å—æ›¿æ¢(hot module replacement)èƒ½åŠ›çš„ source map å’Œ localhost serverã€‚è€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡åˆ™è½¬å‘äºå…³æ³¨æ›´å°çš„ bundleï¼Œæ›´è½»é‡çš„ source mapï¼Œä»¥åŠæ›´ä¼˜åŒ–çš„èµ„æºï¼Œä»¥æ”¹å–„åŠ è½½æ—¶é—´ã€‚ç”±äºè¦éµå¾ªé€»è¾‘åˆ†ç¦»ï¼Œæˆ‘ä»¬é€šå¸¸å»ºè®®ä¸ºæ¯ä¸ªç¯å¢ƒç¼–å†™å½¼æ­¤ç‹¬ç«‹çš„ webpack é…ç½®ã€‚é€šç”¨çš„é…ç½®éƒ¨åˆ†ï¼Œæˆ‘ä»¬æŠ½è±¡å‡ºä¸€ä¸ªå…¬å…±æ–‡ä»¶ï¼Œé€šè¿‡ <a href="https://doc.webpack-china.org/guides/production/" target="_blank" rel="external">webpack-merge</a> å·¥å…·çš„â€œé€šç”¨â€é…ç½®ï¼Œæˆ‘ä»¬ä¸å¿…åœ¨ç¯å¢ƒç‰¹å®šçš„é…ç½®ä¸­é‡å¤ä»£ç ã€‚</p>
<h4 id="5-ExtractTextWebpackPlugin"><a href="#5-ExtractTextWebpackPlugin" class="headerlink" title="5. ExtractTextWebpackPlugin"></a>5. ExtractTextWebpackPlugin</h4><p><a href="https://doc.webpack-china.org/plugins/extract-text-webpack-plugin/" target="_blank" rel="external">ExtractTextWebpackPlugin</a> æ’ä»¶é€šå¸¸ç”¨æ¥åšæ ·å¼æ–‡ä»¶çš„åˆ†ç¦»ï¼Œè¢«åˆ†ç¦»çš„æ–‡ä»¶ä¸ä¼šè¢«å†…åµŒåˆ°  JS bundle ä¸­ï¼Œè€Œä¼šè¢«æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œåœ¨æ ·å¼æ–‡ä»¶æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œèƒ½å¤Ÿæå‰æ ·å¼çš„åŠ è½½,é…ç½®ç¤ºä¾‹å¦‚ä¸‹</p>
<pre>

    const ExtractTextPlugin = require("extract-text-webpack-plugin");
    module.exports = {
       module: {
          rules: [
          {
             test: /\.css$/,
             use: ExtractTextPlugin.extract({
             fallback: "style-loader",
             use: "css-loader"
          })
       }]
    },
        plugins: [
            new ExtractTextPlugin("styles.css"),
        ]
    }

</pre>

<p>å®ƒä¼šå°†æ‰€æœ‰çš„å…¥å£ chunk(entry chunks)ä¸­å¼•ç”¨çš„ *.cssï¼Œç§»åŠ¨åˆ°ç‹¬ç«‹åˆ†ç¦»çš„ CSS æ–‡ä»¶ã€‚å› æ­¤ï¼Œä½ çš„æ ·å¼å°†ä¸å†å†…åµŒåˆ° JS bundle ä¸­ï¼Œè€Œæ˜¯ä¼šæ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„ CSS æ–‡ä»¶ï¼ˆå³ styles.cssï¼‰å½“ä¸­ã€‚ å¦‚æœä½ çš„æ ·å¼æ–‡ä»¶å¤§å°è¾ƒå¤§ï¼Œè¿™ä¼šåšæ›´å¿«æå‰åŠ è½½ï¼Œå› ä¸º CSS bundle ä¼šè·Ÿ JS bundle å¹¶è¡ŒåŠ è½½ã€‚</p>
<h4 id="6-html-webpack-plugin"><a href="#6-html-webpack-plugin" class="headerlink" title="6.html-webpack-plugin"></a>6.html-webpack-plugin</h4><p>å¦‚æœä½ æœ‰å¤šä¸ª webpack å…¥å£ç‚¹ï¼Œ ä»–ä»¬éƒ½ä¼šåœ¨ç”Ÿæˆçš„HTMLæ–‡ä»¶ä¸­çš„ script æ ‡ç­¾å†…ã€‚å¦‚æœä½ æœ‰ä»»ä½• CSS assets åœ¨ webpack çš„è¾“å‡ºä¸­ï¼ˆä¾‹å¦‚ï¼Œ åˆ©ç”¨ExtractTextPluginæå–CSSï¼‰ï¼Œ é‚£ä¹ˆè¿™äº›å°†è¢«åŒ…å«åœ¨HTML headä¸­çš„<link>æ ‡ç­¾å†…ã€‚é€šå¸¸åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸ºäº†é¿å… CDN å’Œæµè§ˆå™¨çš„ç¼“å­˜é€šå¸¸ä¼šä¸ªè¾“å‡ºæ–‡ä»¶ bundle.js åŠ ä¸Šä¸€ä¸ªhash å€¼ä¾‹å¦‚ <code>[hash].bundle.js</code>ï¼Œä½¿ç”¨ <a href="https://doc.webpack-china.org/plugins/html-webpack-plugin/" target="_blank" rel="external">html-webpack-plugin</a> èƒ½å¤Ÿåœ¨åˆ›å»ºæ–°çš„ html æ–‡ä»¶çš„æ—¶å€™å°†æˆ‘ä»¬æŠŠå¸¦æœ‰å“ˆå¸Œå€¼çš„ bundle.js å¼•ç”¨åˆ° html æ–‡ä»¶.</p>
<h4 id="7-optimize-css-assets-webpack-plugin"><a href="#7-optimize-css-assets-webpack-plugin" class="headerlink" title="7.optimize-css-assets-webpack-plugin"></a>7.optimize-css-assets-webpack-plugin</h4><p>ç”¨æ¥ä¼˜åŒ–ä»è„šæœ¬é‡Œæç‚¼å‡ºæ¥çš„ css ï¼Œé…ç½®ç¤ºä¾‹å¦‚ä¸‹</p>
<pre>

    var OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin');
    module.exports = {
      module: {
        rules: [
          {
            test: /\.css$/,
            loader: ExtractTextPlugin.extract('style-loader', 'css-loader')
          }
        ]
      },
      plugins: [
        new ExtractTextPlugin('styles.css'),
        new OptimizeCssAssetsPlugin({
          assetNameRegExp: /\.optimize\.css$/g,
          cssProcessor: require('cssnano'),
          cssProcessorOptions: { discardComments: { removeAll: true } },
          canPrint: true
        })
      ]
    };
</pre>

<h4 id="8-CopyWebpackPlugin"><a href="#8-CopyWebpackPlugin" class="headerlink" title="8.CopyWebpackPlugin"></a>8.CopyWebpackPlugin</h4><p><a href="https://doc.webpack-china.org/plugins/copy-webpack-plugin/" target="_blank" rel="external">CopyWebpackPlugin</a>ä»æ’ä»¶åç§°ä¸Šæˆ‘ä»¬ä¸éš¾çœ‹å‡ºä»–çš„ä½œç”¨ï¼Œé€šå¸¸ç”¨æ¥æ‹·è´èµ„æºï¼Œå¯¹é¡¹ç›®æ–‡ä»¶è¿›è¡Œå½’ç±»æ•´åˆ</p>
<h4 id="9-friendly-errors-webpack-plugin"><a href="#9-friendly-errors-webpack-plugin" class="headerlink" title="9.friendly-errors-webpack-plugin"></a>9.friendly-errors-webpack-plugin</h4><p><a href="https://www.npmjs.com/package/friendly-errors-webpack-plugin" target="_blank" rel="external">friendly-errors-webpack-plugin</a>èƒ½å¤Ÿæ›´å¥½åœ¨ç»ˆç«¯çœ‹åˆ°webapckè¿è¡Œçš„è­¦å‘Šå’Œé”™è¯¯ï¼Œæé«˜å¼€å‘ä½“éªŒ</p>
<h4 id="10-UglifyjsWebpackPlugin"><a href="#10-UglifyjsWebpackPlugin" class="headerlink" title="10.UglifyjsWebpackPlugin"></a>10.UglifyjsWebpackPlugin</h4><p><a href="https://doc.webpack-china.org/plugins/uglifyjs-webpack-plugin/" target="_blank" rel="external">UglifyjsWebpackPlugin</a>ç”¨æ¥å‹ç¼© js ä»£ç </p>
<h4 id="11-å¼€å‘ä¸­-Server-DevServer"><a href="#11-å¼€å‘ä¸­-Server-DevServer" class="headerlink" title="11.å¼€å‘ä¸­ Server(DevServer)"></a>11.å¼€å‘ä¸­ Server(DevServer)</h4><p>webpack é¡¹ç›®æœåŠ¡ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨å¼€å‘é˜¶æ®µç”¨æ¥é…ç½®é¡¹ç›®çš„çƒ­åˆ·æ–°ï¼ŒæœåŠ¡å‹ç¼©ï¼Œé¡¹ç›®ä»£ç†ç­‰ï¼Œå¸¸ç”¨çš„å‡ ä¸ªé…ç½®å‚æ•°ä»‹ç»å¦‚ä¸‹</p>
<pre>

    const config = require('../config')

    // config æ–‡ä»¶é‡Œåšäº†ç”¨æˆ·è‡ªå®šçš„æœåŠ¡å‚æ•°é…ç½®

    devServer: {
        clientLogLevel: 'warning',  // åœ¨å¼€å‘æ”»å‡»çš„æ§åˆ¶å°ä¸­æ˜¾ç¤ºä¿¡æ¯ï¼Œä¾¿äºå¼€å‘è°ƒè¯•ï¼Œä½ å¯ä»¥å°†å‚æ•°é…ç½®æˆ "none" æ¥è¿›è¡Œå…³é—­
         historyApiFallback: { // å½“ä½¿ç”¨ HTML5 History API æ—¶ï¼Œä»»æ„çš„ 404 å“åº”éƒ½å¯èƒ½éœ€è¦è¢«æ›¿ä»£ä¸º index.html
            rewrites: [
               { from: /.*/, to: path.posix.join(config.dev.assetsPublicPath, 'index.html') },
            ],
         },
         hot: true,   //å¯ç”¨é¡¹ç›®çš„çƒ­åˆ·æ–°ï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ç‰¹æ€§
         contentBase: false,   // å‘Šè¯‰æœåŠ¡å™¨ä»å“ªé‡Œæä¾›å†…å®¹ã€‚åªæœ‰åœ¨ä½ æƒ³è¦æä¾›é™æ€æ–‡ä»¶æ—¶æ‰éœ€è¦ã€‚è¿™é‡Œç¦ç”¨ï¼Œå› ä¸ºé…ç½®äº† CopyWebpackPlugin çš„ä½¿ç”¨
         compress: true,
         host: HOST || config.dev.host,   //æŒ‡å®šä½¿ç”¨ä¸€ä¸ªåŸŸåã€‚é»˜è®¤æ˜¯ localhost
         port: PORT || config.dev.port,   //æŒ‡å®šè¦ç›‘å¬è¯·æ±‚çš„ç«¯å£å·ï¼š
         open: config.dev.autoOpenBrowser, //open å‚æ•°é…ç½®ï¼Œå¦‚æœé…ç½®æˆ true ï¼Œé¡¹ç›®å¯åŠ¨åä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
         overlay: config.dev.errorOverlay   //å½“æœ‰é”™è¯¯æˆ–åˆ™è­¦å‘Šçš„æ—¶å€™åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä¸€ä¸ªå…¨å±çš„é®ç½©æç¤º
             ? { warnings: false, errors: true }
             : false,
         publicPath: config.dev.assetsPublicPath, //æ­¤è·¯å¾„ä¸‹çš„æ‰“åŒ…æ–‡ä»¶å¯åœ¨æµè§ˆå™¨ä¸­è®¿é—®
         proxy: config.dev.proxyTable,           //ä»£ç†APIçš„è¯·æ±‚
         quiet: true,       //å¯ç”¨ quiet åï¼Œé™¤äº†åˆå§‹å¯åŠ¨ä¿¡æ¯ä¹‹å¤–çš„ä»»ä½•å†…å®¹éƒ½ä¸ä¼šè¢«æ‰“å°åˆ°æ§åˆ¶å°,ç‰¹åˆ«æ˜¯ä½¿ç”¨äº† FriendlyErrorsPlugin æ’ä»¶çš„æ—¶å€™
         watchOptions: {   //ä¸ç›‘è§†æ–‡ä»¶ç›¸å…³çš„æ§åˆ¶é€‰é¡¹ã€‚æ˜¯å¦ä½¿ç”¨è½®è¯¢
               poll: config.dev.poll,
         }
    },

</pre>


<h3 id="é…ç½®æ–‡ä»¶è§£æ"><a href="#é…ç½®æ–‡ä»¶è§£æ" class="headerlink" title="é…ç½®æ–‡ä»¶è§£æ"></a>é…ç½®æ–‡ä»¶è§£æ</h3><blockquote>
<p>é€šè¿‡äº†è§£äº†ä¸Šé¢çš„é…ç½®ï¼Œæˆ‘ä»¬åº”è¯¥å¯¹ webpack çš„å¸¸ç”¨æ’ä»¶å’Œå·¥å…·æœ‰äº†ä¸€å®šäº†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ vue-cli è„šæ‰‹æ¶ç»™æˆ‘ä»¬ç”Ÿæˆçš„é…ç½®æƒ…å†µ</p>
</blockquote>
<h4 id="config-js"><a href="#config-js" class="headerlink" title="config.js"></a>config.js</h4><pre>

'use strict'

const path = require('path') // å¼•ç”¨é¡¹ç›®çš„ path æ¨¡å—

module.exports = {
  dev: {

    // è·¯å¾„é…ç½®
    assetsSubDirectory: 'static',
    assetsPublicPath: '/',
    proxyTable: {},

    // å„ç§å¼€å‘æœåŠ¡é…ç½®
    host: 'localhost', // å¼€å‘ç¯å¢ƒåŸŸå å¯ä»¥è¢« node å…¨å±€å˜é‡process.env.HOST é‡å†™
    port: 8080, //é…ç½®å¼€å‘æœåŠ¡ç«¯å£ï¼Œå¯ä»¥è¢« node å…¨å±€å˜é‡ process.env.PORT é‡å†™, éœ€è¦ä½¿ç”¨æœªè¢«å ç”¨çš„ç«¯å£
    autoOpenBrowser: false, //æœåŠ¡å¯åŠ¨æ˜¯å¦è‡ªåŠ¨ä»£å¼€æµè§ˆå™¨
    errorOverlay: true,   //æ˜¯å¦åœ¨å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œåœ¨é¡µé¢æ•´å±å¢åŠ ä¸€ä¸ªé”™è¯¯é®ç½©
    notifyOnErrors: true,  //æ˜¯å¦é€šçŸ¥é”™è¯¯ ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®é…ç½®ä¸­å’Œ friendly-errors-webpack-plugin ç»“åˆä½¿ç”¨
    poll: false, // æœåŠ¡ç›‘å¬æ˜¯å¦è½®è¯¢æ“ä½œ

    // é…é¥°æ˜¯å¦ä½¿ç”¨ Eslint Loader è¿›è¡Œè¯­æ³•æ£€æµ‹
    // å¦‚æœä½¿ç”¨ï¼Œåœ¨å¼€å‘æ„å»ºé˜¶æ®µï¼Œä¼šå¯¹ä½ çš„ä»£ç ä¼šè¿›è¡Œæ£€æµ‹
    // æ£€æµ‹å‡ºæ¥çš„è­¦å‘Šå’Œé”™è¯¯ä¼šç™½å±•ç¤ºåœ¨å¼€å‘å·¥å…·çš„æ§åˆ¶å°

    useEslint: true,  //è¿›è¡Œè¯­æ³•æ£€æµ‹

    // é…ç½®æ˜¯å¦å°† eslint è¯­æ³•æ£€æµ‹çš„è­¦å‘Šå’Œé”™è¯¯å±•ç¤ºåœ¨é¡µé¢æ•´å±çš„é®ç½©ä¸Š

    showEslintErrorsInOverlay: false,  // è¯­æ³•æ£€æµ‹çš„è­¦å‘Šå’Œé”™è¯¯ä¸å±•ç¤ºåœ¨é®ç½©ä¸Š

    /**
     * Source Maps
     */

    // https://webpack.js.org/configuration/devtool/#development
    // åœ¨ä¸Šé¢çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ source map æ˜¯ç”¨æ¥å°†æˆ‘ä»¬æ„å»ºåè¢«è½¬åŒ–çš„ä»£ç å¯¹åº”æ„å»ºå‰çš„ä»£ç ï¼Œä¾¿äº debug
    // cheap-module-eval-source-map å’Œæˆ‘ä»¬ä»‹ç»çš„ cheap-module-source-map å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯ SourceMap ä¼šè¢«ä½œä¸ºæ•°æ®æ·»åŠ åˆ°åŒ…ä¸­
    devtool: 'cheap-module-eval-source-map',

    // å¦‚æœä½ çš„å¼€å‘å·¥å…·ä¸èƒ½è¿›è¡Œ vue-files çš„ debug ï¼Œå¯ä»¥å°†ä»¥ä¸‹è®¾ç½®è®¾ç½®æˆ false

    cacheBusting: true,

    cssSourceMap: true
  },

  build: {
    // index.html æ–‡ä»¶æ¨¡æ¿
    index: path.resolve(__dirname, '../dist/index.html'),

    // æ‰“åŒ…è·¯å¾„é…ç½®
    assetsRoot: path.resolve(__dirname, '../dist'),
    assetsSubDirectory: 'static',
    assetsPublicPath: '/',

    /**
     * Source Maps
     */

    //ç”Ÿäº§ç¯å¢ƒ source map é…ç½®

    productionSourceMap: true,
    devtool: '#source-map',

    // å› ä¸ºå¾ˆå¤šçš„ä¸»æµæœåŠ¡éƒ½ä¼š é€šè¿‡ gzip å‹ç¼©è¿‡ä½ çš„æ‰€æœ‰é™æ€èµ„æºï¼Œæˆ‘ä»¬çš„é…ç½®é»˜è®¤ä¸å¼€å¯ gzip
    // å¦‚æœè¦è®¾ç½®æˆå¼€å¯,è¯·å…ˆç¡®ä¿å·²ç»å®‰è£…å¥½ compression-webpack-plugin æ’ä»¶
    productionGzip: false,
    productionGzipExtensions: ['js', 'css'],

    // å¯åŠ¨ build å‘½ä»¤çš„æ—¶å€™ï¼Œé¢å¤–æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼Œæ‰“åŒ…åä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåˆ†ææŠ¥å‘Šæ–‡ä»¶ï¼Œä¾‹å¦‚ npm run build --report ï¼Œå¯ä»¥é€šè¿‡é…ç½® true ï¼Œfalse æ¥å…³é—­
    bundleAnalyzerReport: process.env.npm_config_report
  }
}

</pre>

<h4 id="check-versions-js"><a href="#check-versions-js" class="headerlink" title="check-versions.js"></a>check-versions.js</h4><p>è¿™ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯ç”¨æ¥æ£€æµ‹å½“å‰ç¯å¢ƒä¸­çš„nodeå’Œnpmç‰ˆæœ¬å’Œæˆ‘ä»¬éœ€è¦çš„æ˜¯å¦ä¸€è‡´çš„ã€‚</p>
<pre>

    'use strict'
    const chalk = require('chalk')  // æ”¹å˜å‘½ä»¤è¡Œä¸­çš„å­—ä½“é¢œè‰²ï¼Œå¤§è‡´è¿™æ ·ç”¨chalk.blue('Hello world')
    const semver = require('semver')  //æ˜¯ç”¨æ¥å¯¹ç‰¹å®šçš„ç‰ˆæœ¬å·åšåˆ¤æ–­çš„

    const packageConfig = require('../package.json')  // é¡¹ç›® npm é…ç½®æ–‡ä»¶ï¼Œè·å–ä¾èµ–åŠç‰ˆæœ¬ä¿¡æ¯ï¼Œrequrieè¿”å›çš„å°±æ˜¯jsonå¯¹è±¡
    const shell = require('shelljs') //ç”¨æ¥æ‰§è¡ŒUnixç³»ç»Ÿå‘½ä»¤ï¼Œè°ƒç”¨ç³»ç»Ÿå‘½ä»¤æ›´åŠ æ–¹ä¾¿

    //æŠŠcmdè¿™ä¸ªå‚æ•°ä¼ é€’çš„å€¼è½¬åŒ–æˆå‰åæ²¡æœ‰ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ç‰ˆæœ¬å·
    function exec (cmd) {
      return require('child_process').execSync(cmd).toString().trim()
    }


    const versionRequirements = [
      {
        name: 'node',
        currentVersion: semver.clean(process.version),  // æå–è¿›ç¨‹ç‰ˆæœ¬ä¿¡æ¯è½¬åŒ–æˆè§„å®šæ ¼å¼ï¼Œä¹Ÿå°±æ˜¯ '  =v1.2.3  ' -> '1.2.3' è¿™ç§åŠŸèƒ½
        versionRequirement: packageConfig.engines.node // package.json çš„ node çš„ç‰ˆæœ¬ä¿¡æ¯
      }
    ]

    if (shell.which('npm')) {
      versionRequirements.push({
        name: 'npm',
        currentVersion: exec('npm --version'),   //å½“å‰çš„ç‰ˆæœ¬ä¿¡æ¯
        versionRequirement: packageConfig.engines.npm //package.json çš„ node çš„ç‰ˆæœ¬ä¿¡æ¯
      })
    }

    module.exports = function () {
      const warnings = []

      for (let i = 0; i < versionRequirements.length; i++) {
        const mod = versionRequirements[i]

        // å¦‚æœå½“å‰ç‰ˆæœ¬å·ä¸ç¬¦åˆ package.json è¦æ±‚çš„ç‰ˆæœ¬å·ï¼Œçº¢è‰²è¡¨ç¤ºå½“å‰ç‰ˆæœ¬ä¿¡æ¯ï¼Œç»¿è‰²è¡¨ç¤ºè¦æ±‚çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ·»åŠ åˆ° warnings å¾…è¾“å‡º
        if (!semver.satisfies(mod.currentVersion, mod.versionRequirement)) {
          warnings.push(mod.name + ': ' +
            chalk.red(mod.currentVersion) + ' should be ' +
            chalk.green(mod.versionRequirement)
          )
        }
      }

      //è¾“å‡ºç‰ˆæœ¬å·ä¸ç›¸ç¬¦çš„æç¤º warnings
      if (warnings.length) {
        console.log('')
        console.log(chalk.yellow('To use this template, you must update following to modules:'))
        console.log()

        for (let i = 0; i < warnings.length; i++) {
          const warning = warnings[i]
          console.log('  ' + warning)
        }

        console.log()
        process.exit(1)
      }
    }


</pre>

<h4 id="build-js"><a href="#build-js" class="headerlink" title="build.js"></a>build.js</h4><pre>

    'use strict'

    //æ‰“åŒ…å‰åˆ¤æ–­å½“å…ˆå¼€å‘ç¯å¢ƒçš„ node å’Œ npm ç‰ˆæœ¬å’Œ package.json è¦æ±‚çš„æ—¶å€™ä¸€æ ·
    require('./check-versions')()

    process.env.NODE_ENV = 'production'

    const ora = require('ora')  // åœ¨ç”¨æˆ·æ‰“åŒ…çš„æ—¶å€™èƒ½å¤Ÿè®©ç”¨æˆ·çŸ¥é“æ­£åœ¨è¿›è¡Œï¼Œä¸€ä¸ªåŠ è½½ä¸­çš„æ ·å¼ï¼Œè½¬å•Šè½¬
    const rm = require('rimraf') //è¿™ä¸ªæ¨¡å—æ˜¯ç”¨æ¥æ¸…é™¤ä¹‹å‰çš„æ‰“çš„åŒ…ï¼Œå› ä¸ºåœ¨vue-cliä¸­æ¯æ¬¡æ‰“åŒ…ä¼šç”Ÿæˆä¸åŒçš„hash
    const path = require('path') //node è·¯å¾„æ¨¡å—ï¼Œä¾¿äºæˆ‘ä»¬æ“ä½œæ–‡ä»¶è·¯å¾„
    const chalk = require('chalk') //å¸¦é¢œè‰²çš„è¾“å‡ºæ¨¡å—ï¼Œèƒ½åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºä¸åŒçš„æ ·è‰²
    const webpack = require('webpack') //webpack ä¸è§£é‡Š
    const config = require('../config') // é¡¹ç›®ä¸­çš„é…ç½®æ–‡ä»¶ï¼ŒğŸ‘†ä¸Šé¢å·²ç»è¿›è¡Œäº†é…ç½®ä»‹ç»
    const webpackConfig = require('./webpack.prod.conf') // ç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶


    const spinner = ora('building for production...')// å®ä¾‹ä¸€ä¸ªæ‰“åŒ…åŠ è½½ä¸­å®ä¾‹
    spinner.start() //å¼€å§‹è½¬åœˆï¼Œè¥é€ ä¸€ä¸ªæ­£åœ¨æ‰“åŒ…çš„åœºæ™¯

    // åˆ é™¤ä¸Šä¸€æ¬¡æ‰“åŒ…çš„æ–‡ä»¶ï¼Œåˆ é™¤æˆåŠŸï¼Œå¼€å§‹æŒ‰ç…§ç”Ÿäº§ç¯å¢ƒé…ç½®è¿›è¡Œæ‰“åŒ…
    rm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err => {
      if (err) throw err


        //å¼€å§‹æ‰“åŒ…ï¼Œæ‰“åŒ…ç»“æŸåœæ­¢ spinner è½¬åœˆï¼Œæœ‰æŠ¥é”™åˆ™åœ¨æ§åˆ¶å°è¾“å‡º
      webpack(webpackConfig, (err, stats) => {
        spinner.stop()
        if (err) throw err

        // node ç¯å¢ƒé‡Œçš„è¾“å‡ºé…ç½®ï¼Œprocess.stdout.write ä½ å¯ä»¥ç†è§£æˆ js é‡Œçš„ console
        process.stdout.write(stats.toString({
          colors: true, //è®©æ‰“åŒ…çš„æ—¶å€™æœ‰é¢œè‰²ã€‚
          modules: false,  //å»æ‰å†…ç½®æ¨¡å—ä¿¡æ¯
          children: false, // å»æ‰å­æ¨¡å—,å¦‚æœä½ ä½¿ç”¨äº† ts-loaderï¼Œè®¾ç½®æˆ true ä¼šåœ¨æ‰“åŒ…æ„å»ºé˜¶æ®µå±•ç¤ºé”™è¯¯ä¿¡æ¯
          chunks: false, // å¢åŠ åŒ…ä¿¡æ¯ï¼ˆè®¾ç½®ä¸º false èƒ½å…è®¸è¾ƒå°‘çš„å†—é•¿è¾“å‡ºï¼‰
          chunkModules: false //å»é™¤åŒ…é‡Œå†…ç½®æ¨¡å—çš„ä¿¡æ¯
        }) + '\n\n')


         //æ‰“åŒ…å‡ºé”™åœ¨æ§åˆ¶å°è¾“å‡º Build failed with errors ï¼Œé€€å‡ºæ‰“åŒ…ç¨‹åº
        if (stats.hasErrors()) {
          console.log(chalk.red('  Build failed with errors.\n'))
          process.exit(1)
        }

        //æ‰“åŒ…æˆåŠŸåˆ™è¾“å‡º Build complete ç»“æŸæ‰“åŒ…
        console.log(chalk.cyan('  Build complete.\n'))
        console.log(chalk.yellow(
          '  Tip: built files are meant to be served over an HTTP server.\n' +
          '  Opening index.html over file:// won\'t work.\n'
        ))
      })
    })
</pre>

<h4 id="webpack-base-conf-js"><a href="#webpack-base-conf-js" class="headerlink" title="webpack.base.conf.js"></a>webpack.base.conf.js</h4><pre>

    'use strict'
    const path = require('path')  // node è·¯å¾„æ¨¡å—
    const utils = require('./utils') //node å†…éƒ¨å¸¸ç”¨çš„å·¥å…·ç±»ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²ã€å¯¹è±¡çš„åºåˆ—åŒ–ã€å®ç°å¯¹è±¡ç»§æ‰¿ç­‰å¸¸ç”¨æ–¹æ³•
    const config = require('../config') //ğŸ‘†ä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„ï¼Œé¡¹ç›®é…ç½®æ–‡ä»¶
    const vueLoaderConfig = require('./vue-loader.conf') //ğŸ‘† ä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„ vue åŠ è½½å™¨é…ç½®æ–‡ä»¶

    //è¿”å›å½“å‰é…ç½®æ–‡ä»¶ä½ç½®æ˜¯ build ï¼Œè¯¥æ–¹æ³•æ”¾å› build/../dir çš„ç›¸å¯¹è·¯åŸº
    function resolve (dir) {
      return path.join(__dirname, '..', dir)
    }

    // eslint è¯­æ³•æ£€æµ‹é…ç½®
    const createLintingRule = () => ({
      test: /\.(js|vue)$/,
      loader: 'eslint-loader',
      enforce: 'pre',
      include: [resolve('src'), resolve('test')],
      options: {
        formatter: require('eslint-friendly-formatter'),
        emitWarning: !config.dev.showEslintErrorsInOverlay
      }
    })

    // webpack é€šç”¨é…ç½®å†…å®¹
    module.exports = {
      context: path.resolve(__dirname, '../'),  // ä¸Šä¸‹æ–‡ï¼ŒåŸºç¡€ç›®å½•ï¼Œç”¨äºä»é…ç½®ä¸­è§£æå…¥å£èµ·ç‚¹å’Œ loader
      entry: {
        app: './src/main.js'  //èµ·ç‚¹æˆ–æ˜¯åº”ç”¨ç¨‹åºçš„èµ·ç‚¹å…¥å£ã€‚ä»è¿™ä¸ªèµ·ç‚¹å¼€å§‹ï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨æ‰§è¡Œã€‚å¦‚æœä¼ é€’ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„çš„æ¯ä¸€é¡¹éƒ½ä¼šæ‰§è¡Œã€‚
      },
      output: {
        path: config.build.assetsRoot,   //è¾“å‡º bundle çš„è·¯å¾„
        filename: '[name].js',          //è¾“å‡º bundle çš„åç§°
        publicPath: process.env.NODE_ENV === 'production' // æŒ‡å®šèµ„æºæ–‡ä»¶å¼•ç”¨çš„ç›®å½•ï¼Œä¾‹å¦‚å›¾ç‰‡
          ? config.build.assetsPublicPath
          : config.dev.assetsPublicPath
      },
      resolve: {
        extensions: ['.js', '.vue', '.json'], //é…ç½®æ¨¡å—å¦‚ä½•è§£æ,
        alias: {                              // åˆ›å»ºåº”ç”¨çš„åˆ«åï¼Œ
          'vue$': 'vue/dist/vue.esm.js',
          '@': resolve('src'),
        }
      },
  module: {
    rules: [
      //åˆ¤æ–­é…ç½®ä¸­æ˜¯å¦è¦æ˜¯ç”¨ eslint è¯­æ³•æ£€æµ‹ï¼Œå¦‚æœä½¿ç”¨ï¼Œå°±å°† createLintingRule é…ç½®å¯¹è±¡è¿”å›
      ...(config.dev.useEslint ? [createLintingRule()] : []),

     //ğŸ‘‡æ˜¯ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„åŠ è½½å™¨ï¼ŒåŠé…ç½®ï¼Œä¸åšè¯¦ç»†ä»‹ç»äº†
      {
        test: /\.vue$/,
        loader: 'vue-loader',
        options: vueLoaderConfig
      },
      {
        test: /\.js$/,
        loader: 'babel-loader',
        include: [resolve('src'), resolve('test'), resolve('node_modules/webpack-dev-server/client')]
      },
      {
        test: /\.(css | scss)$/,
        loader: 'style-loader!css-loader!!sass-loader'
      },
      {
        test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,
        loader: 'url-loader',
        options: {
          limit: 10000,
          name: utils.assetsPath('img/[name].[hash:7].[ext]')
        }
      },
      {
        test: /\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$/,
        loader: 'url-loader',
        options: {
          limit: 10000,
          name: utils.assetsPath('media/[name].[hash:7].[ext]')
        }
      },
      {
        test: /\.(woff2?|eot|ttf|otf)(\?.*)?$/,
        loader: 'url-loader',
        options: {
          limit: 10000,
          name: utils.assetsPath('fonts/[name].[hash:7].[ext]')
        }
      }
    ]
  },
  node: {

    //é˜²æ­¢å› ä¸º vue èµ„æºæœ¬èº«å°±è‡ªå¸¦çš„ æ— ç”¨çš„ node æ³¨å…¥ï¼Œæµè§ˆå™¨å…¼å®¹å¤„ç†
    setImmediate: false,
    dgram: 'empty',
    fs: 'empty',
    net: 'empty',
    tls: 'empty',
    child_process: 'empty'
  }
}

</pre>


<h4 id="webpack-dev-conf-js"><a href="#webpack-dev-conf-js" class="headerlink" title="webpack.dev.conf.js"></a>webpack.dev.conf.js</h4><pre>

    'use strict'
    const utils = require('./utils')  //node å·¥å…·æ¨¡å—
    const webpack = require('webpack') //webpack ä¸è§£é‡Š
    const config = require('../config')//ğŸ‘†æåˆ°çš„é…ç½®æ–‡ä»¶
    const merge = require('webpack-merge') // merge å·¥å…·ï¼Œç”¨æ¥åˆå¹¶ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒé€šç”¨çš„åŸºç¡€ webpack é…ç½®
    const path = require('path')            //node çš„è·¯å¾„æ¨¡å—
    const baseWebpackConfig = require('./webpack.base.conf') //ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒé€šç”¨çš„åŸºç¡€ webpack é…ç½®
    const CopyWebpackPlugin = require('copy-webpack-plugin') //æ‹·è´æ’ä»¶
    const HtmlWebpackPlugin = require('html-webpack-plugin')  //åŠ¨æ€ç”Ÿæˆ html æ’ä»¶
    const FriendlyErrorsPlugin = require('friendly-errors-webpack-plugin') //å‹å¥½çš„é”™è¯¯è¾“å‡ºæ’ä»¶
    const portfinder = require('portfinder') //èƒ½å¤Ÿè·å–ä¸€ä¸ªå¯ç”¨çš„éšæœºç«¯å£å·

    const HOST = process.env.HOST   //node å…¨å±€ç¯å¢ƒå˜é‡çš„ä¸»æœº
    const PORT = process.env.PORT && Number(process.env.PORT)   //node å…¨å±€ç¯å¢ƒå˜é‡çš„ç«¯å£

    //åˆå¹¶åŸºç¡€é…ç½®åŠ è½½å™¨çš„é…ç½®éƒ¨åˆ†
    const devWebpackConfig = merge(baseWebpackConfig, {

      module: {
        // ä¸º .vue æ–‡ä»¶æ„å¤–çš„ç‹¬ç«‹æ ·å¼æ–‡ä»¶é…ç½®åŠ è½½å™¨
        rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap, usePostCSS: true })
      },

      // cheap-module-eval-source-map åœ¨å¼€å‘ç¯å¢ƒä¸­å¾ˆå¿«
      devtool: config.dev.devtool,

      // å¼€å‘æœåŠ¡é…ç½®ï¼ŒğŸ‘† å·²ç»ç»†è®²è¿‡ï¼Œé¡ºä¾¿å›é¡¾ä¸€ä¸‹
      devServer: {
         clientLogLevel: 'warning',  // åœ¨å¼€å‘æ”»å‡»çš„æ§åˆ¶å°ä¸­æ˜¾ç¤ºä¿¡æ¯ï¼Œä¾¿äºå¼€å‘è°ƒè¯•ï¼Œä½ å¯ä»¥å°†å‚æ•°é…ç½®æˆ "none" æ¥è¿›è¡Œå…³é—­
         historyApiFallback: { // å½“ä½¿ç”¨ HTML5 History API æ—¶ï¼Œä»»æ„çš„ 404 å“åº”éƒ½å¯èƒ½éœ€è¦è¢«æ›¿ä»£ä¸º index.html
            rewrites: [
               { from: /.*/, to: path.posix.join(config.dev.assetsPublicPath, 'index.html') },
            ],
         },
         hot: true,   //å¯ç”¨é¡¹ç›®çš„çƒ­åˆ·æ–°ï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ç‰¹æ€§
         contentBase: false,   // å‘Šè¯‰æœåŠ¡å™¨ä»å“ªé‡Œæä¾›å†…å®¹ã€‚åªæœ‰åœ¨ä½ æƒ³è¦æä¾›é™æ€æ–‡ä»¶æ—¶æ‰éœ€è¦ã€‚è¿™é‡Œç¦ç”¨ï¼Œå› ä¸ºé…ç½®äº† CopyWebpackPlugin çš„ä½¿ç”¨
         compress: true,
         host: HOST || config.dev.host,   //æŒ‡å®šä½¿ç”¨ä¸€ä¸ªåŸŸåã€‚é»˜è®¤æ˜¯ localhost
         port: PORT || config.dev.port,   //æŒ‡å®šè¦ç›‘å¬è¯·æ±‚çš„ç«¯å£å·ï¼š
         open: config.dev.autoOpenBrowser, //open å‚æ•°é…ç½®ï¼Œå¦‚æœé…ç½®æˆ true ï¼Œé¡¹ç›®å¯åŠ¨åä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
         overlay: config.dev.errorOverlay   //å½“æœ‰é”™è¯¯æˆ–åˆ™è­¦å‘Šçš„æ—¶å€™åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä¸€ä¸ªå…¨å±çš„é®ç½©æç¤º
               ? { warnings: false, errors: true }
               : false,
         publicPath: config.dev.assetsPublicPath, //æ­¤è·¯å¾„ä¸‹çš„æ‰“åŒ…æ–‡ä»¶å¯åœ¨æµè§ˆå™¨ä¸­è®¿é—®
         proxy: config.dev.proxyTable,           //ä»£ç†APIçš„è¯·æ±‚
         quiet: true,       //å¯ç”¨ quiet åï¼Œé™¤äº†åˆå§‹å¯åŠ¨ä¿¡æ¯ä¹‹å¤–çš„ä»»ä½•å†…å®¹éƒ½ä¸ä¼šè¢«æ‰“å°åˆ°æ§åˆ¶å°,ç‰¹åˆ«æ˜¯ä½¿ç”¨äº† FriendlyErrorsPlugin æ’ä»¶çš„æ—¶å€™
         watchOptions: {   //ä¸ç›‘è§†æ–‡ä»¶ç›¸å…³çš„æ§åˆ¶é€‰é¡¹ã€‚æ˜¯å¦ä½¿ç”¨è½®è¯¢
               poll: config.dev.poll,
         }
       },

      plugins: [
        // DefinePlugin å…è®¸åˆ›å»ºä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ã€‚è¿™å¯èƒ½ä¼šå¯¹å¼€å‘æ¨¡å¼å’Œå‘å¸ƒæ¨¡å¼çš„æ„å»ºå…è®¸ä¸åŒçš„è¡Œä¸ºéå¸¸æœ‰ç”¨
        new webpack.DefinePlugin({
          'process.env': require('../config/dev.env')
        }),
        new webpack.HotModuleReplacementPlugin(), //å¯ç”¨çƒ­æ›¿æ¢æ¨¡å—(Hot Module Replacement)ï¼Œä¹Ÿè¢«ç§°ä¸º HMR
        new webpack.NamedModulesPlugin(), // å½“å¼€å¯ HMR çš„æ—¶å€™ä½¿ç”¨è¯¥æ’ä»¶ä¼šæ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„ï¼Œå»ºè®®ç”¨äºå¼€å‘ç¯å¢ƒ
        new webpack.NoEmitOnErrorsPlugin(), åœ¨ç¼–è¯‘å‡ºç°é”™è¯¯æ—¶ï¼Œä½¿ç”¨ NoEmitOnErrorsPlugin æ¥è·³è¿‡è¾“å‡ºé˜¶æ®µ

        //HtmlWebpackPluginç®€åŒ–äº†HTMLæ–‡ä»¶çš„åˆ›å»ºï¼Œä»¥ä¾¿ä¸ºä½ çš„webpackåŒ…æä¾›æœåŠ¡ã€‚è¿™å¯¹äºåœ¨æ–‡ä»¶åä¸­åŒ…å«æ¯æ¬¡ä¼šéšç€ç¼–è¯‘è€Œå‘ç”Ÿå˜åŒ–å“ˆå¸Œçš„ webpack bundle å°¤å…¶æœ‰ç”¨
        new HtmlWebpackPlugin({
          filename: 'index.html',
          template: 'index.html',
          inject: true
        }),


        // æ‹·è´è‡ªå®šä¹‰çš„é™æ€èµ„æºæ–‡ä»¶
        new CopyWebpackPlugin([
          {
            from: path.resolve(__dirname, '../static'),
            to: config.dev.assetsSubDirectory,
            ignore: ['.*']
          }
        ])
      ]
    })

    // å®ä¾‹ä¸€ä¸ªå¼‚æ­¥å¯¹è±¡ï¼Œæ‰§è¡Œ devWebpackConfig é…ç½®ç¼–è¯‘
    module.exports = new Promise((resolve, reject) => {
      portfinder.basePort = process.env.PORT || config.dev.port  //è®¾ç½®åŸºç¡€ç«¯å£
      portfinder.getPort((err, port) => {è·å–ç«¯å£ï¼Œè¾“å‡ºæ„å»ºæ–°
        if (err) {
          reject(err)
        } else {
          // å¦‚æœè¿›è¡Œ e2e æµ‹è¯•ï¼Œéœ€è¦å‘å¸ƒæ–°ç«¯å£
          process.env.PORT = port

          // æ›´æ–° devServer çš„ç«¯å£
          devWebpackConfig.devServer.port = port

          devWebpackConfig.plugins.push(new FriendlyErrorsPlugin({
            compilationSuccessInfo: {
              messages: [`Your application is running here: http://${devWebpackConfig.devServer.host}:${port}`],
            },
            onErrors: config.dev.notifyOnErrors
            ? utils.createNotifierCallback()
            : undefined
          }))

           //æ‰§è¡Œæ‰“åŒ…é…ç½®æ–‡ä»¶
          resolve(devWebpackConfig)
        }
      })
    })

</pre>

<h4 id="webpack-prod-conf-js"><a href="#webpack-prod-conf-js" class="headerlink" title="webpack.prod.conf.js"></a>webpack.prod.conf.js</h4><pre>

    'use strict'
    const path = require('path') // node è·¯å¾„æ¨¡å—
    const utils = require('./utils') //å°å·¥å…·å‡½æ•°
    const webpack = require('webpack') // webpack ä¸è§£é‡Š
    const config = require('../config')//ğŸ‘†æåˆ°çš„é…ç½®æ–‡ä»¶
    const merge = require('webpack-merge') // merge å·¥å…·ï¼Œç”¨æ¥åˆå¹¶ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒé€šç”¨çš„åŸºç¡€ webpack é…ç½®
    const baseWebpackConfig = require('./webpack.base.conf')//äº§å’Œå¼€å‘ç¯å¢ƒé€šç”¨çš„åŸºç¡€ webpack é…ç½®
    const CopyWebpackPlugin = require('copy-webpack-plugin') //æ‹·è´æ’ä»¶
    const HtmlWebpackPlugin = require('html-webpack-plugin')  //åŠ¨æ€ç”Ÿæˆ html æ’ä»¶
    const ExtractTextPlugin = require('extract-text-webpack-plugin')//ç”¨æ¥åšæ–‡ä»¶åˆ†ç¦»çš„æ’ä»¶
    const OptimizeCSSPlugin = require('optimize-css-assets-webpack-plugin')//ä¼˜åŒ–æç‚¼å‡ºæ¥çš„css
    const UglifyJsPlugin = require('uglifyjs-webpack-plugin')// å‹ç¼© js æ–‡ä»¶æ’ä»¶

    //ç”Ÿäº§ç¯å¢ƒé…ç½®
    const env = require('../config/prod.env')

    //åˆå¹¶åŸºç¡€é…ç½®åŠ è½½å™¨çš„é…ç½®éƒ¨åˆ†
    const webpackConfig = merge(baseWebpackConfig, {
    //ä¸ºç‹¬ç«‹åˆ†ç¦»å‡ºæ¥çš„æ ·å¼é…ç½®åŠ è½½å™¨å’Œsourceï¼Œmap
      module: {
        rules: utils.styleLoaders({
          sourceMap: config.build.productionSourceMap,
          extract: true,
          usePostCSS: true
        })
      },
      //é…ç½®çº¿ä¸Šçš„ source map ä¾¿äºæ’æŸ¥é—®é¢˜
      devtool: config.build.productionSourceMap ? config.build.devtool : false,
      //é…ç½®è¾“å‡ºï¼Œè·¯å¾„ï¼Œæ–‡ä»¶å
      output: {
        path: config.build.assetsRoot,
        filename: utils.assetsPath('js/[name].[chunkhash].js'),
        chunkFilename: utils.assetsPath('js/[id].[chunkhash].js')
      },
      plugins: [
        // DefinePlugin å…è®¸åˆ›å»ºä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ã€‚è¿™å¯èƒ½ä¼šå¯¹å¼€å‘æ¨¡å¼å’Œå‘å¸ƒæ¨¡å¼çš„æ„å»ºå…è®¸ä¸åŒçš„è¡Œä¸ºéå¸¸æœ‰ç”¨
        new webpack.DefinePlugin({
          'process.env': env
        }),

        // ä½¿ç”¨ UglifyJsPlugin æ’ä»¶å¯¹ js è¿›è¡Œå‹ç¼©
        new UglifyJsPlugin({
          uglifyOptions: {
            compress: {
              warnings: false
            }
          },
          //é…ç½®æ’ä»¶çš„source map
          sourceMap: config.build.productionSourceMap,
          parallel: true
        }),
        // æå– css åˆ°å•ç‹¬çš„æ–‡ä»¶ï¼Œåˆ†ç¦»æ–‡ä»¶å¼‚æ­¥åŠ è½½ï¼Œæé«˜åŠ è½½é€Ÿåº¦
        new ExtractTextPlugin({
          filename: utils.assetsPath('css/[name].[contenthash].css'),

          //å¦‚æœæŠŠ allChunks å‚æ•°è®¾ç½®é™ˆ false ï¼Œå°±ä¸ä¼šæŠŠcss ä»ä»£ç å—ä¸­åˆ†ç¦»å‡ºæ¥
          //ä»£ç å—åŠ è½½çš„æ—¶å€™ css ä¼šè¢« styles-loader åŠ¨æ€çš„åŠ è½½
          allChunks: true,
        }),

        //ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œä»ä¸åŒçš„ç»„ä»¶ä¸­å¤åˆ¶è„±ç¦»å‡ºæ¥ï¼Œè¿›è¡Œ css å‹ç¼©
        new OptimizeCSSPlugin({
          cssProcessorOptions: config.build.productionSourceMap
            ? { safe: true, map: { inline: false } }
            : { safe: true }
        }),

        //è‡ªåŠ¨ç”Ÿæˆ html æ–‡ä»¶ï¼Œé€šå¸¸ index.html æ–‡ä»¶éƒ½ä¼šå¸¦ä¸€ä¸ªå“ˆå¸Œå€¼æ¥æ¸…é™¤ç¼“å­˜
        new HtmlWebpackPlugin({
          filename: config.build.index,
          template: 'index.html',
          inject: true,
          minify: {
            removeComments: true,
            collapseWhitespace: true,
            removeAttributeQuotes: true
          },

          chunksSortMode: 'dependency'
        }),
        //è¯¥æ’ä»¶ä¼šæ ¹æ®æ¨¡å—çš„ç›¸å¯¹è·¯å¾„ç”Ÿæˆä¸€ä¸ªå››ä½æ•°çš„hashä½œä¸ºæ¨¡å—id, æ¸²æŸ“æ¨¡å—æ²¡æœ‰å˜åŒ–çš„æ—¶å€™ï¼Œid ä¸ä¼šå˜ã€‚
        new webpack.HashedModuleIdsPlugin(),

        // æå‡æˆ–è€…é¢„ç¼–è¯‘æ‰€æœ‰æ¨¡å—åˆ°ä¸€ä¸ªé—­åŒ…ä¸­ï¼Œæå‡ä½ çš„ä»£ç åœ¨æµè§ˆå™¨ä¸­çš„æ‰§è¡Œé€Ÿåº¦ã€‚
        new webpack.optimize.ModuleConcatenationPlugin(),

        // åˆ†ç¦»æ¸²æŸ“çš„js åˆ°ç‹¬ç«‹çš„æ–‡ä»¶ä¸­
        new webpack.optimize.CommonsChunkPlugin({
          name: 'vendor',
          minChunks (module) {
            //è¢«å¼•ç”¨åˆ°çš„åŒ…ä¼šä» node_modules ä¸­æå–å‡ºæ¥
            return (
              module.resource &&
              /\.js$/.test(module.resource) &&
              module.resource.indexOf(
                path.join(__dirname, '../node_modules')
              ) === 0
            )
          }
        }),

        new webpack.optimize.CommonsChunkPlugin({
          name: 'manifest',
          minChunks: Infinity
        }),

        new webpack.optimize.CommonsChunkPlugin({
          name: 'app',
          async: 'vendor-async',
          children: true,
          minChunks: 3
        }),

        // æ‹·è´è‡ªå®šä¹‰çš„é™æ€èµ„æºæ–‡ä»¶
        new CopyWebpackPlugin([
          {
            from: path.resolve(__dirname, '../static'),
            to: config.build.assetsSubDirectory,
            ignore: ['.*']
          }
        ])
      ]
    })

    //åˆ¤æ–­å¦‚æœé…ç½®äº†ç”Ÿäº§ç¯å¢ƒå‹ç¼©ï¼Œæ˜¯åˆ™ä½¿ç”¨æ’ä»¶è¿›è¡Œå‹ç¼©
    if (config.build.productionGzip) {
      const CompressionWebpackPlugin = require('compression-webpack-plugin')

      webpackConfig.plugins.push(
        new CompressionWebpackPlugin({
          asset: '[path].gz[query]',
          algorithm: 'gzip',
          test: new RegExp(
            '\\.(' +
            config.build.productionGzipExtensions.join('|') +
            ')$'
          ),
          threshold: 10240,
          minRatio: 0.8
        })
      )
    }

    //æ˜¯å¦è¦ç”Ÿæˆä»£ç æ‰“åŒ…åˆ†ææŠ¥å‘Š
    if (config.build.bundleAnalyzerReport) {
      const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin
      webpackConfig.plugins.push(new BundleAnalyzerPlugin())
    }

    module.exports = webpackConfig


</pre>


<h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><p>ğŸ‘†è¿™ç¯‡æ–‡ç« è¯¦ç»†çš„ä»‹ç»äº†è„šæ‰‹æ¶é¡¹ç›®çš„ webpack é…ç½®ï¼Œä½†æ˜¯åªæ˜¯ webpack çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜æœ‰å¾ˆå¤šå†…å®¹å€¼å¾—æˆ‘ä»¬å»æ¢ç©¶ï¼Œå¦‚æœä½ è¿˜æ„Ÿå…´è¶£ï¼Œå¯ä»¥é˜…è¯»ä¸‹é¢è¿™äº›æ–‡ç« ã€‚ä¹Ÿæ¬¢è¿éšæ—¶ä¸æˆ‘è¿›è¡Œäº¤æµï¼Œå¾®ä¿¡å·ï¼š646321933</p>
<p><a href="https://doc.webpack-china.org/guides/production/" target="_blank" rel="external">webpackæŒ‡å— </a><br><a href="https://doc.webpack-china.org/concepts/" target="_blank" rel="external">webpackæ–‡æ¡£</a><br><a href="https://doc.webpack-china.org/configuration
[å¼€å‘ ](https://doc.webpack-china.org/guides/development/#%E4%BD%BF%E7%94%A8-source-map" target="_blank" rel="external">webpacké…ç½® </a><br><a href="https://juejin.im/post/5a31d210f265da431a43330e" target="_blank" rel="external">è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªè„šæ‰‹æ¶</a><br><a href="https://doc.webpack-china.org/plugins" target="_blank" rel="external">webpack å®˜æ–¹æ’ä»¶é›†åˆä»‹ç»æ–‡æ¡£ </a><br><a href="https://segmentfault.com/a/1190000007441374" target="_blank" rel="external">ã€Š ä½¿ç”¨vue-cliè„šæ‰‹æ¶åˆ›å»ºæ–°é¡¹ç›®ã€‹</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2018/04/28/history/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/28/history/" itemprop="url">
                  ä½ éœ€è¦çŸ¥é“çš„å•é¡µé¢è·¯ç”±å®ç°åŸç†
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-28T09:43:21+08:00">
                2018-04-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/04/28/history/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/28/history/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ€è¿‘å¼€å‘çš„åŸ‹ç‚¹é¡¹ç›®ï¼Œéœ€è¦è®°å½•ç”¨æˆ·è¡Œä¸ºè½¨è¿¹å³ç”¨æˆ·é¡µé¢è®¿é—®é¡ºåºã€‚éœ€è¦åœ¨é¡µé¢è·³è½¬çš„æ—¶å€™ï¼Œè®°å½•ç”¨æˆ·è®¿é—®çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ url ï¼Œè¯·æ±‚å¤´éƒ¨ç­‰ï¼‰ï¼Œéå•é¡µé¢åº”ç”¨å¯ä»¥ç»™ window å¯¹è±¡åŠ ä¸Šä¸€ä¸ª beforeunload äº‹ä»¶ï¼Œåœ¨é¡µé¢ç¦»å¼€æ—¶è§¦å‘é‡‡é›†å¼€å…³ï¼Œä½†æ˜¯ç°åœ¨å¾ˆå¤šä¸šåŠ¡æ˜¯å•é¡µé¢åº”ç”¨ï¼Œç”¨æˆ·åˆ‡æ¢åœ°å€çš„æ—¶å€™ï¼Œæ˜¯æ— åˆ·æ–°çš„å±€éƒ¨æ›´æ–°ï¼Œæ²¡æœ‰åŠæ³•è§¦å‘ beforeunloadã€‚æ‰€ä»¥å•é¡µé¢åº”ç”¨çš„è·¯ç”±æ’ä»¶ä¸€å®šè¿ç”¨äº† window è‡ªå¸¦çš„æ— åˆ·æ–°ä¿®æ”¹ç”¨æˆ·æµè§ˆè®°å½•çš„æ–¹æ³•ï¼ŒpushState å’Œ replaceStateã€‚</p>
<h3 id="pushState-å’Œ-replaceState-äº†è§£ä¸€ä¸‹"><a href="#pushState-å’Œ-replaceState-äº†è§£ä¸€ä¸‹" class="headerlink" title="pushState å’Œ replaceState äº†è§£ä¸€ä¸‹"></a>pushState å’Œ replaceState äº†è§£ä¸€ä¸‹</h3><blockquote>
<p>history æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œèƒ½å¤Ÿæ— åˆ·æ–°çš„ä¿®æ”¹ç”¨æˆ·çš„æµè§ˆè®°å½•ï¼ŒpushSateï¼Œå’Œ replaceStateï¼ŒåŒºåˆ«çš„ pushState åœ¨ç”¨æˆ·è®¿é—®é¡µé¢åé¢æ·»åŠ ä¸€ä¸ªè®¿é—®è®°å½•ï¼Œ replaceState åˆ™æ˜¯ç›´æ¥æ›¿æ¢äº†å½“å‰è®¿é—®è®°å½•</p>
</blockquote>
<p>history å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯å·²ç»æœ‰å¾ˆå¤šå¾ˆå¥½å¾ˆè¯¦ç»†çš„ä»‹ç»æ–‡çŒ®ï¼Œè¿™é‡Œä¸å†åšæ€»ç»“ï¼Œæˆ‘ä»¬å¼•ç”¨é˜®è€å¸ˆçš„æ•™ç¨‹ä»‹ç»ï¼Œ<a href="http://javascript.ruanyifeng.com/bom/history.html" target="_blank" rel="external">historyå¯¹è±¡ â€“ JavaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹ï¼ˆalphaï¼‰</a></p>
<h4 id="history-pushState"><a href="#history-pushState" class="headerlink" title="history.pushState"></a>history.pushState</h4><p>history.pushStateæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºï¼š</p>
<blockquote>
<p>stateï¼šä¸€ä¸ªä¸æŒ‡å®šç½‘å€ç›¸å…³çš„çŠ¶æ€å¯¹è±¡ï¼Œpopstateäº‹ä»¶è§¦å‘æ—¶ï¼Œè¯¥å¯¹è±¡ä¼šä¼ å…¥å›è°ƒå‡½æ•°ã€‚å¦‚æœä¸éœ€è¦è¿™ä¸ªå¯¹è±¡ï¼Œæ­¤å¤„å¯ä»¥å¡«nullã€‚<br>titleï¼šæ–°é¡µé¢çš„æ ‡é¢˜ï¼Œä½†æ˜¯æ‰€æœ‰æµè§ˆå™¨ç›®å‰éƒ½å¿½ç•¥è¿™ä¸ªå€¼ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥å¡«nullã€‚<br>urlï¼šæ–°çš„ç½‘å€ï¼Œå¿…é¡»ä¸å½“å‰é¡µé¢å¤„åœ¨åŒä¸€ä¸ªåŸŸã€‚æµè§ˆå™¨çš„åœ°å€æ å°†æ˜¾ç¤ºè¿™ä¸ªç½‘å€ã€‚<br>å‡å®šå½“å‰ç½‘å€æ˜¯example.com/1.htmlï¼Œæˆ‘ä»¬ä½¿ç”¨pushStateæ–¹æ³•åœ¨æµè§ˆè®°å½•ï¼ˆhistoryå¯¹è±¡ï¼‰ä¸­æ·»åŠ ä¸€ä¸ªæ–°è®°å½•ã€‚</p>
</blockquote>
<pre>
    var stateObj = { foo: 'bar' };
    history.pushState(stateObj, 'page 2', '2.html');
</pre>

<p>æ·»åŠ ä¸Šé¢è¿™ä¸ªæ–°è®°å½•åï¼Œæµè§ˆå™¨åœ°å€æ ç«‹åˆ»æ˜¾ç¤º example.com/2.htmlï¼Œä½†å¹¶ä¸ä¼šè·³è½¬åˆ° 2.htmlï¼Œç”šè‡³ä¹Ÿä¸ä¼šæ£€æŸ¥2.html æ˜¯å¦å­˜åœ¨ï¼Œå®ƒåªæ˜¯æˆä¸ºæµè§ˆå†å²ä¸­çš„æœ€æ–°è®°å½•ã€‚è¿™æ—¶ï¼Œä½ åœ¨åœ°å€æ è¾“å…¥ä¸€ä¸ªæ–°çš„åœ°å€(æ¯”å¦‚è®¿é—® google.com )ï¼Œç„¶åç‚¹å‡»äº†å€’é€€æŒ‰é’®ï¼Œé¡µé¢çš„ URL å°†æ˜¾ç¤º 2.htmlï¼›ä½ å†ç‚¹å‡»ä¸€æ¬¡å€’é€€æŒ‰é’®ï¼ŒURL å°†æ˜¾ç¤º 1.htmlã€‚</p>
<p>æ€»ä¹‹ï¼ŒpushState æ–¹æ³•ä¸ä¼šè§¦å‘é¡µé¢åˆ·æ–°ï¼Œåªæ˜¯å¯¼è‡´ history å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œåœ°å€æ ä¼šæœ‰ååº”ã€‚</p>
<p>å¦‚æœ pushState çš„ urlå‚æ•°ï¼Œè®¾ç½®äº†ä¸€ä¸ªæ–°çš„é”šç‚¹å€¼ï¼ˆå³hashï¼‰ï¼Œå¹¶ä¸ä¼šè§¦å‘ hashchange äº‹ä»¶ã€‚å¦‚æœè®¾ç½®äº†ä¸€ä¸ªè·¨åŸŸç½‘å€ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre>
    // æŠ¥é”™
    history.pushState(null, null, 'https://twitter.com/hello');

    ä¸Šé¢ä»£ç ä¸­ï¼ŒpushStateæƒ³è¦æ’å…¥ä¸€ä¸ªè·¨åŸŸçš„ç½‘å€ï¼Œå¯¼è‡´æŠ¥é”™ã€‚è¿™æ ·è®¾è®¡çš„ç›®çš„æ˜¯ï¼Œé˜²æ­¢æ¶æ„ä»£ç è®©ç”¨æˆ·ä»¥ä¸ºä»–ä»¬æ˜¯åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šã€‚
</pre>

<h4 id="history-replaceState"><a href="#history-replaceState" class="headerlink" title="history.replaceState"></a>history.replaceState</h4><p>history.replaceState æ–¹æ³•çš„å‚æ•°ä¸ pushState æ–¹æ³•ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«æ˜¯å®ƒä¿®æ”¹æµè§ˆå†å²ä¸­å½“å‰çºªå½•,å‡å®šå½“å‰ç½‘é¡µæ˜¯ example.com/example.htmlã€‚</p>
<pre>
    history.pushState({page: 1}, 'title 1', '?page=1');
    history.pushState({page: 2}, 'title 2', '?page=2');
    history.replaceState({page: 3}, 'title 3', '?page=3');

    history.back()
    // urlæ˜¾ç¤ºä¸ºhttp://example.com/example.html?page=1

    history.back()
    // urlæ˜¾ç¤ºä¸ºhttp://example.com/example.html

    history.go(2)
    // urlæ˜¾ç¤ºä¸ºhttp://example.com/example.html?page=3

</pre>

<h3 id="å•é¡µé¢åº”ç”¨ç”¨æˆ·è®¿é—®è½¨è¿¹åŸ‹ç‚¹"><a href="#å•é¡µé¢åº”ç”¨ç”¨æˆ·è®¿é—®è½¨è¿¹åŸ‹ç‚¹" class="headerlink" title="å•é¡µé¢åº”ç”¨ç”¨æˆ·è®¿é—®è½¨è¿¹åŸ‹ç‚¹"></a>å•é¡µé¢åº”ç”¨ç”¨æˆ·è®¿é—®è½¨è¿¹åŸ‹ç‚¹</h3><p>å¼€å‘è¿‡å•é¡µé¢åº”ç”¨çš„åŒå­¦ï¼Œä¸€å®šæ¯”è¾ƒæ¸…æ¥šï¼Œå•é¡µé¢åº”ç”¨çš„è·¯ç”±åˆ‡æ¢æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œä¸ä¼šé‡æ–°è¿›è¡Œ http è¯·æ±‚å»è·å–é¡µé¢ï¼Œè€Œæ˜¯é€šè¿‡æ”¹å˜é¡µé¢æ¸²æŸ“è§†å›¾æ¥å®ç°ã€‚æ‰€ä»¥ä»–çš„å®ç°åŸç†ä¸€å®šä¹Ÿæ˜¯é€šè¿‡åŸç”Ÿçš„ pushState æˆ–åˆ™ replaceState æ¥å®ç°çš„ã€‚æ‰€ä»¥åœ¨é¡µé¢è·³è½¬çš„æ—¶å€™ä¸€å®šä¼šè°ƒç”¨ pushState æˆ–åˆ™ replaceState ï¼Œè¦è®°å½•ç”¨æˆ·çš„è·³è½¬ä¿¡æ¯ï¼Œæˆ‘ä»¬åªè¦æ‹¦æˆª pushState å’Œ replaceStateï¼Œåœ¨æ‰§è¡Œé»˜è¡Œä¸º<strong>å‰</strong>å…ˆæ‰§è¡Œæˆ‘ä»¬çš„æ–¹æ³•å°±èƒ½å¤Ÿé‡‡é›†åˆ°ç”¨æˆ·çš„è·³è½¬ä¿¡æ¯äº†</p>
<pre>

    // æ”¹å†™æ€è·¯ï¼šæ‹·è´ window é»˜è®¤çš„ replaceState å‡½æ•°ï¼Œé‡å†™ history.replaceState åœ¨æ–¹æ³•é‡Œæ’å…¥æˆ‘ä»¬çš„é‡‡é›†è¡Œä¸ºï¼Œåœ¨é‡å†™çš„ replaceState æ–¹æ³•æœ€åè°ƒç”¨ï¼Œwindow é»˜è®¤çš„ replaceState æ–¹æ³•

    collect = {}

    collect.onPushStateCallback : function(){}  // è‡ªå®šä¹‰çš„é‡‡é›†æ–¹æ³•

    (function(history){

        var replaceState = history.replaceState;   // å­˜å‚¨åŸç”Ÿ replaceState

        history.replaceState = function(state, param) {     // æ”¹å†™ replaceState
           var url = arguments[2];

           if (typeof collect.onPushStateCallback == "function") {
                 collect.onPushStateCallback({state: state, param: param, url: url});   //è‡ªå®šä¹‰çš„é‡‡é›†è¡Œä¸ºæ–¹æ³•
           }

           return replaceState.apply(history, arguments);    // è°ƒç”¨åŸç”Ÿçš„ replaceState
        };
     })(window.history);


</pre>

<h3 id="vue-router-çš„è·¯ç”±å®ç°"><a href="#vue-router-çš„è·¯ç”±å®ç°" class="headerlink" title="vue-router çš„è·¯ç”±å®ç°"></a>vue-router çš„è·¯ç”±å®ç°</h3><p>æ—¢ç„¶çŸ¥é“äº†è¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ vue-router çš„å®ç°ï¼Œæˆ‘ä»¬æ‰“å¼€ <a href="https://github.com/vuejs/vue-router" target="_blank" rel="external">vue-router é¡¹ç›®åœ°å€</a>,æŠŠé¡¹ç›®å…‹éš†ä¸‹æ¥ï¼Œæˆ–åˆ™ç›´æ¥åœ¨ github ä¸Šé¢„è§ˆï¼Œåœ¨ Vue å¼€å‘çš„é¡¹ç›®é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ router.push(â€˜homeâ€™) æ¥å®ç°é¡µé¢çš„è·³è½¬ï¼Œæ‰€ä»¥æˆ‘ä»¬æ£€ç´¢ä¸‹ï¼Œpush æ–¹æ³•çš„å®ç°</p>
<p><img src="/images/history/search.jpeg" alt="pushæ–¹æ³•æ£€ç´¢"></p>
<p>æˆ‘ä»¬æ£€ç´¢åˆ°äº† 20 ä¸ª js æ–‡ä»¶ï¼ŒğŸ˜‚ï¼Œä¸€èˆ¬åˆ°è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ”¾å¼ƒæºç é˜…è¯»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»Šå¤©çš„æ–‡ç« å°±åˆ°è¿™ç»“æŸï¼Œè°¢è°¢å¤§å®¶ï¼</p>
<p>å¼€ä¸ªç©ç¬‘ï¼Œæºç é˜…è¯»ä¸èƒ½è¿™ä¹ˆç²—ç³™ï¼Œæˆ‘ä»¬æ‰¾åˆ° src ç›®å½•ï¼Œç‚¹å¼€ <code>index.js</code> æ–‡ä»¶ï¼Œçœ‹åˆ° historyå¯¹è±¡çš„å®šä¹‰å’Œ mode å‚æ•°æœ‰å…³</p>
<pre>
 if (!inBrowser) {
      mode = 'abstract'
    }
    this.mode = mode

    switch (mode) {
      case 'history':
        this.history = new HTML5History(this, options.base)
        break
      case 'hash':
        this.history = new HashHistory(this, options.base, this.fallback)
        break
      case 'abstract':
        this.history = new AbstractHistory(this, options.base)
        break
      default:
        if (process.env.NODE_ENV !== 'production') {
          assert(false, `invalid mode: ${mode}`)
        }
    }
</pre>

<p>çœ‹åˆ° history å¯¹è±¡çš„å®ä¾‹ä¸é…ç½®çš„ mode æœ‰å…³ï¼Œvue-router é€šè¿‡3ä¸­æ–¹å¼å®ç°äº†è·¯ç”±åˆ‡æ¢ã€‚ä¸æˆ‘ä»¬ä»Šå¤©è®²çš„å†…å®¹ç›¸åŒ¹é…çš„æ˜¯ <code>HTML5History</code> çš„å®ç°æ–¹æ¡ˆï¼Œå…¶ä»–çš„å°†ä¸å†æ–‡ç« ä¸­åšæ‰©å±•ï¼Œè‹¥æœä½ æ„Ÿå…´è¶£æƒ³è¦äº†è§£ï¼Œå¯ä»¥çœ‹æ–‡ç« åé¢çš„æ‰©å±•é˜…è¯»</p>
<p>æˆ‘ä»¬æ¥çœ‹ vue-router ä¸­çš„ HTML5History æºç ï¼š</p>
<pre>
    push (location: RawLocation, onComplete?: Function, onAbort?: Function) {
      const { current: fromRoute } = this
      this.transitionTo(location, route => {
        pushState(cleanPath(this.base + route.fullPath))
        handleScroll(this.router, route, fromRoute, false)
        onComplete && onComplete(route)
      }, onAbort)
    }

    replace (location: RawLocation, onComplete?: Function, onAbort?: Function) {
      const { current: fromRoute } = this
      this.transitionTo(location, route => {
        replaceState(cleanPath(this.base + route.fullPath))
        handleScroll(this.router, route, fromRoute, false)
        onComplete && onComplete(route)
      }, onAbort)
    }

    // src/util/push-state.js
    export function pushState (url?: string, replace?: boolean) {
      saveScrollPosition()
      // try...catch the pushState call to get around Safari
      // DOM Exception 18 where it limits to 100 pushState calls
      const history = window.history
      try {
        if (replace) {
          history.replaceState({ key: _key }, '', url)
        } else {
          _key = genKey()
          history.pushState({ key: _key }, '', url)
        }
      } catch (e) {
        window.location[replace ? 'replace' : 'assign'](url)
      }
    }

    export function replaceState (url?: string) {
      pushState(url, true)
    }
</pre>

<p>åœ¨ä½¿ç”¨ Vue å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€å®šç”¨åˆ°è¿‡ push å’Œ replace æ¥æ”¹å˜è·¯ç”±ï¼Œå’Œè§†å›¾ã€‚</p>
<p>router å®ä¾‹è°ƒç”¨çš„ push å®é™…æ˜¯ history çš„æ–¹æ³•ï¼Œé€šè¿‡ mode æ¥ç¡®å®šåŒ¹é… history çš„å®ç°æ–¹æ¡ˆï¼Œä»ä»£ç ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼Œpush è°ƒç”¨äº† src/util/push-state.js ä¸­è¢«æ”¹å†™è¿‡çš„ pushState çš„æ–¹æ³•ï¼Œæ”¹å†™è¿‡çš„æ–¹æ³•ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•° <code>replace?: boolean</code>æ¥è¿›è¡Œåˆ¤æ–­è°ƒç”¨ pushState è¿˜æ˜¯ replaceState ï¼ŒåŒæ—¶åšäº†é”™è¯¯æ•è·ï¼Œå¦‚æœï¼Œhistory æ— åˆ·æ–°ä¿®æ”¹è®¿é—®è·¯å¾„å¤±è´¥ï¼Œåˆ™è°ƒç”¨  <code>window.location.replace(url)</code> ,æœ‰åˆ·æ–°çš„åˆ‡æ¢ç”¨æˆ·è®¿é—®åœ°å€ ï¼ŒåŒç† <code>pushState</code> ä¹Ÿæ˜¯è¿™æ ·ã€‚è¿™é‡Œçš„ transitionTo æ–¹æ³•ä¸»è¦çš„ä½œç”¨æ˜¯åšè§†å›¾çš„è·Ÿæ–°åŠè·¯ç”±è·³è½¬ç›‘æµ‹ï¼Œå¦‚æœ url æ²¡æœ‰å˜åŒ–ï¼ˆè®¿é—®åœ°å€åˆ‡æ¢å¤±è´¥çš„æƒ…å†µï¼‰ï¼Œåœ¨ transitionTo æ–¹æ³•å†…éƒ¨è¿˜ä¼šè°ƒç”¨ä¸€ä¸ª ensureURL æ–¹æ³•ï¼Œæ¥ä¿®æ”¹ urlã€‚ transitionTo æ–¹æ³•ä¸­åº”ç”¨çš„çˆ¶æ–¹æ³•æ¯”è¾ƒå¤šï¼Œè¿™é‡Œä¸åšé•¿ç¯‡èµ˜è¿°ï¼Œå…·ä½“ä»£ç åˆ†æå¯ä»¥å…³æ³¨åæˆ‘ä»¥åçš„æ–‡ç« </p>
<h3 id="æ¨¡æ‹Ÿå•é¡µé¢è·¯ç”±"><a href="#æ¨¡æ‹Ÿå•é¡µé¢è·¯ç”±" class="headerlink" title="æ¨¡æ‹Ÿå•é¡µé¢è·¯ç”±"></a>æ¨¡æ‹Ÿå•é¡µé¢è·¯ç”±</h3><p>é€šè¿‡ä¸Šé¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†ï¼Œå•é¡µé¢åº”ç”¨è·¯ç”±çš„å®ç°åŸç†ï¼Œæˆ‘ä»¬ä¹Ÿå°è¯•å»å®ç°ä¸€ä¸ªã€‚åœ¨åšç®¡ç†ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨é¡µé¢çš„å·¦ä¾§æ”¾ç½®ä¸€ä¸ªå›ºå®šçš„å¯¼èˆª sidebarï¼Œé¡µé¢çš„å³ä¾§æ”¾ä¸ä¹‹åŒ¹é…çš„å†…å®¹ main ã€‚ç‚¹å‡»å¯¼èˆªæ—¶ï¼Œæˆ‘ä»¬åªå¸Œæœ›å†…å®¹è¿›è¡Œæ›´æ–°ï¼Œå¦‚æœåˆ·æ–°äº†æ•´ä¸ªé¡µé¢ï¼Œåˆ°æ—¶å¯¼èˆªå’Œé€šç”¨çš„å¤´éƒ¨åº•éƒ¨ä¹Ÿè¿›è¡Œé‡ç»˜é‡æ’çš„è¯ï¼Œååˆ†æµªè´¹èµ„æºï¼Œä½“éªŒä¹Ÿä¼šä¸å¥½ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±èƒ½ç”¨åˆ°æˆ‘ä»¬ä»Šå¤©å­¦ä¹ åˆ°çš„å†…å®¹ï¼Œé€šè¿‡ä½¿ç”¨ HTML5 çš„ pushState æ–¹æ³•å’Œ replaceState æ–¹æ³•æ¥å®ç°ï¼Œ</p>
<p>æ€è·¯ï¼šé¦–å…ˆç»‘å®š click äº‹ä»¶ã€‚å½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æ—¶ï¼Œé€šè¿‡ preventDefault å‡½æ•°é˜²æ­¢é»˜è®¤çš„è¡Œä¸ºï¼ˆé¡µé¢è·³è½¬ï¼‰ï¼ŒåŒæ—¶è¯»å–é“¾æ¥çš„åœ°å€ï¼ˆå¦‚æœæœ‰ jQueryï¼Œå¯ä»¥å†™æˆ$(this).attr(â€˜hrefâ€™)ï¼‰ï¼ŒæŠŠè¿™ä¸ªåœ°å€é€šè¿‡pushStateå¡å…¥æµè§ˆå™¨å†å²è®°å½•ä¸­ï¼Œå†åˆ©ç”¨ AJAX æŠ€æœ¯æ‹‰å–ï¼ˆå¦‚æœæœ‰ jQueryï¼Œå¯ä»¥ä½¿ç”¨$.getæ–¹æ³•ï¼‰è¿™ä¸ªåœ°å€ä¸­çœŸæ­£çš„å†…å®¹ï¼ŒåŒæ—¶æ›¿æ¢å½“å‰ç½‘é¡µçš„å†…å®¹ã€‚</p>
<p>ä¸ºäº†å¤„ç†ç”¨æˆ·å‰è¿›ã€åé€€ï¼Œæˆ‘ä»¬ç›‘å¬ popstate äº‹ä»¶ã€‚å½“ç”¨æˆ·ç‚¹å‡»å‰è¿›æˆ–åé€€æŒ‰é’®æ—¶ï¼Œæµè§ˆå™¨åœ°å€è‡ªåŠ¨è¢«è½¬æ¢æˆç›¸åº”çš„åœ°å€ï¼ŒåŒæ—¶popstateäº‹ä»¶å‘ç”Ÿã€‚åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®å½“å‰çš„åœ°å€æŠ“å–ç›¸åº”çš„å†…å®¹ï¼Œç„¶ååˆ©ç”¨ AJAX æ‹‰å–è¿™ä¸ªåœ°å€çš„çœŸæ­£å†…å®¹ï¼Œå‘ˆç°ï¼Œå³å¯ã€‚</p>
<p>æœ€åï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸ä¼šæ”¹å˜é¡µé¢æ ‡é¢˜çš„ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥å¯¹ document.title èµ‹å€¼æ¥æ›´æ”¹é¡µé¢æ ‡é¢˜ã€‚</p>
<h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><p>å¥½äº†,æˆ‘ä»¬ä»Šå¤©é€šè¿‡å¤šä¸ªæ–¹é¢æ¥è®²äº† pushState æ–¹æ³•å’Œ replaceState çš„åº”ç”¨ï¼Œä½ åº”è¯¥å¯¹è¿™ä¸ªä¸¤ä¸ªæ–¹æ³•èƒ½æœ‰ä¸€ä¸ªæ¯”è¾ƒæ·±åˆ»çš„å°è±¡ï¼Œå¦‚æœæƒ³è¦äº†è§£æ›´å¤šï¼Œä½ å¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥</p>
<p><a href="http://javascript.ruanyifeng.com/bom/history.html" target="_blank" rel="external">historyå¯¹è±¡ â€“ JavaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹ï¼ˆalphaï¼‰</a><br><a href="https://zhuanlan.zhihu.com/p/27588422" target="_blank" rel="external">ä»vue-routerçœ‹å‰ç«¯è·¯ç”±çš„ä¸¤ç§å®ç°</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2018/04/02/javascript-notes/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/02/javascript-notes/" itemprop="url">
                  ä½ éœ€è¦çŸ¥é“çš„ javascript çš„ç»†èŠ‚
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-02T17:27:29+08:00">
                2018-04-02
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/04/02/javascript-notes/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/02/javascript-notes/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>ç°åœ¨çš„å‰ç«¯æ¡†æ¶å±‚å‡ºä¸ç©·ï¼Œ3ä¸ªæœˆå°±è¦é‡æ–°å…¥é—¨ä¸€æ¬¡å‰ç«¯çš„ç°çŠ¶ï¼Œè®©æˆ‘ä»¬æ¥ä¸åŠå­¦å¥½åŸºç¡€å°±å¼€å§‹ä¸Šæ‰‹æ¡†æ¶ã€‚å¸¸å¸¸å°±å› ä¸ºè¿™æ ·ï¼Œæˆ‘ä»¬ä¼šå¾ˆå¿«åˆ°è¾¾åŸºç¡€<code>æŠ€æœ¯ç“¶é¢ˆ</code>ï¼ŒåŸºç¡€æ˜¯æ‰€æœ‰æŠ€æœ¯çš„æ ¸å¿ƒï¼Œåœ¨è·³æ§½å­£é‡æ–°æ¸©æ•…äº†ä¸€é javascript åŸºç¡€ï¼Œæœ‰æ”¶è·ï¼Œæ•´ç†å‡ºæ¥åˆ†äº«ç»™å¤§å®¶ã€‚</p>
</blockquote>
<h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><h4 id="å˜é‡å¯ä»¥å½“å¯¹è±¡ä½¿ç”¨"><a href="#å˜é‡å¯ä»¥å½“å¯¹è±¡ä½¿ç”¨" class="headerlink" title="å˜é‡å¯ä»¥å½“å¯¹è±¡ä½¿ç”¨"></a>å˜é‡å¯ä»¥å½“å¯¹è±¡ä½¿ç”¨</h4><p><code>javascript</code> ä¸­æ‰€æœ‰çš„å˜é‡éƒ½å¯ä»¥å½“åšå¯¹è±¡ä½¿ç”¨ï¼Œé™¤äº†<code>undefined</code> å’Œ <code>null</code> ï¼Œæˆ‘ä»¬æµ‹è¯•ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">false.toString() // &quot;false&quot;</div><div class="line"></div><div class="line">[1,2,3].toString() //&quot;1,2,3&quot;</div><div class="line"></div><div class="line">1..toString() //&quot;1&quot;</div><div class="line"></div><div class="line">(&#123;a:&apos;33&apos;&#125;).toString() //&quot;[object Object]&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">undefined.toString() //Uncaught TypeError</div><div class="line"></div><div class="line">null.toString()   //Uncaught TypeError</div></pre></td></tr></table></figure>
<p>æ•°å€¼å’Œå¯¹è±¡è™½ç„¶èƒ½è°ƒç”¨ <code>toString</code> æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å†™æ³•ä¸Šéœ€è¦æ³¨æ„ä¸‹</p>
<p><code>number</code> è°ƒç”¨æ—¶ä¸èƒ½ç›´æ¥æ•°å€¼åé¢ç›´æ¥è°ƒç”¨<code>toString</code> æ–¹æ³•ï¼Œå› ä¸º <code>js</code> ä¼šå°†ç‚¹è¿ç®—ç¬¦è§£æä¸ºæ•°å€¼çš„å°æ•°ç‚¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1.toString() //Uncaught SyntaxError</div><div class="line"></div><div class="line">1..toString() //&quot;1&quot;</div></pre></td></tr></table></figure>
<p>å¯¹è±¡ç›´æ¥è°ƒç”¨<code>toString</code> æ–¹æ³•æ—¶ï¼Œéœ€è¦ç”¨å°æ‹¬å·åŒ…è£¹èµ·æ¥ï¼Œä¸ç„¶<code>js</code> ä¼šå°†å¯¹è±¡çš„èŠ±æ‹¬å·è¯†åˆ«æˆå—ï¼Œä»è€ŒæŠ¥é”™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;a:&apos;33&apos;&#125;.toString()  // Uncaught SyntaxError</div><div class="line"></div><div class="line">(&#123;a:&apos;33&apos;&#125;).toString() // &quot;[object Object]&quot;</div></pre></td></tr></table></figure>
<h4 id="å¯¹è±¡åˆ é™¤å±æ€§"><a href="#å¯¹è±¡åˆ é™¤å±æ€§" class="headerlink" title="å¯¹è±¡åˆ é™¤å±æ€§"></a>å¯¹è±¡åˆ é™¤å±æ€§</h4><blockquote>
<p>åˆ é™¤å¯¹è±¡çš„å±æ€§å”¯ä¸€çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>delete</code> æ“ä½œç¬¦ï¼Œè®¾ç½®å…ƒç´ å±æ€§ä¸º <code>undefined</code> æˆ–åˆ™ <code>null</code> å¹¶ä¸èƒ½çœŸæ­£åˆ é™¤ï¼Œåªæ˜¯ç§»é™¤äº†å±æ€§å’Œå€¼çš„å…³è”</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var test = &#123;</div><div class="line">	name:&apos;bbt&apos;,</div><div class="line">	age:&apos;18&apos;,</div><div class="line">	love:&apos;dog&apos;</div><div class="line">&#125;</div><div class="line"></div><div class="line">test.name = undefined</div><div class="line">test.age = null</div><div class="line">delete test.love</div><div class="line"></div><div class="line">for (var i in test)&#123;</div><div class="line">  console.log(i+&apos;:&apos;+test[i])</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">name:undefined</div><div class="line">age:null</div><div class="line">undefined</div></pre></td></tr></table></figure>
<p>åªæœ‰ <code>love</code> è¢«æ­£åˆ™åˆ é™¤ï¼Œ<code>name</code> å’Œ <code>age</code> è¿˜æ˜¯èƒ½è¢«éå†åˆ°</p>
<h4 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h4><blockquote>
<p>åœ¨ <code>javascript</code> ä¸­ï¼Œé€šè¿‡å…³é”®å­— <code>new</code> è°ƒç”¨çš„å‡½æ•°å°±è¢«è®¤ä¸ºæ˜¯æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡å®ä¾‹</p>
</blockquote>
<p>ä½†æ˜¯åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä½ ä¸€å®šå‘ç°äº†ï¼Œæ¯å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½ä¼šåœ¨å®ä¾‹å¯¹è±¡ä¸Šåˆ›é€ æ„é€ å‡½æ•°çš„æ–¹æ³•å’Œå±æ€§ã€‚å€˜è‹¥åˆ›å»ºçš„å®ä¾‹æ¯”è¾ƒå¤šï¼Œé‡å¤åˆ›å»ºåŒä¸€ä¸ªæ–¹æ³•å»å¼€è¾Ÿå†…å­˜ç©ºé—´å°±ä¼šæ˜¾å¾—ååˆ†æµªè´¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŠŠè¢«ç»å¸¸å¤ç”¨çš„æ–¹æ³•æ”¾åœ¨åŸå‹é“¾ä¸Šã€‚</p>
<h4 id="åŸå‹ç»§æ‰¿"><a href="#åŸå‹ç»§æ‰¿" class="headerlink" title="åŸå‹ç»§æ‰¿"></a>åŸå‹ç»§æ‰¿</h4><blockquote>
<p><code>javascript</code> å’Œä¸€äº›æˆ‘ä»¬æ‰€äº†è§£çš„é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­è¨€ä¸å¤ªä¸€æ ·ï¼Œåœ¨ <code>es6</code> è¯­æ³•ä»¥å‰ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡åŸå‹é“¾æ¥å®ç°æ–¹æ³•å’Œå±æ€§çš„ç»§æ‰¿</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">function Child()&#123;</div><div class="line">  this.name = &apos;bbt&apos;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Child.prototype = &#123;</div><div class="line">	title:&apos;baba&apos;,</div><div class="line">    method: function() &#123;&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function Grandson()&#123;&#125;</div><div class="line"></div><div class="line">//è®¾ç½® Grandson çš„ prototype ä¸º Child çš„å®ä¾‹</div><div class="line">Grandson.prototype = new Child()</div><div class="line"></div><div class="line">//ä¸º Grandson çš„åŸå‹æ·»åŠ æ·»åŠ å±æ€§ age</div><div class="line">Grandson.prototype.age = 40</div><div class="line"></div><div class="line">// ä¿®æ­£ Grandson.prototype.constructor ä¸º Grandson æœ¬èº«</div><div class="line">Grandson.prototype.constructor = Grandson;</div><div class="line"></div><div class="line">var xiaomin = new Grandson()</div><div class="line"></div><div class="line">//åŸå‹é“¾å¦‚ä¸‹</div><div class="line">xiaomin // Grandsonçš„å®ä¾‹</div><div class="line">    Grandson.prototype // Childçš„å®ä¾‹</div><div class="line">         Grandson.prototype //&#123;title:&apos;baba&apos;,...&#125;</div><div class="line">            Object.prototype</div><div class="line">                &#123;toString: ... /* etc. */&#125;;</div></pre></td></tr></table></figure>
<p>å¯¹è±¡çš„å±æ€§æŸ¥æ‰¾ï¼Œ<code>javascript</code> ä¼šåœ¨åŸå‹é“¾ä¸Šå‘ä¸ŠæŸ¥æ‰¾å±æ€§ï¼Œç›´åˆ°æŸ¥åˆ° åŸå‹é“¾é¡¶éƒ¨ï¼Œæ‰€ä»¥ï¼Œå±æ€§åœ¨åŸå‹é“¾çš„è¶Šä¸Šç«¯ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´ä¼šè¶Šé•¿ï¼ŒæŸ¥æ‰¾æ€§èƒ½å’Œå¤ç”¨å±æ€§æ–¹é¢éœ€è¦å¼€å‘è€…è‡ªå·±è¡¡é‡ä¸‹ã€‚</p>
<h4 id="è·å–è‡ªèº«å¯¹è±¡å±æ€§"><a href="#è·å–è‡ªèº«å¯¹è±¡å±æ€§" class="headerlink" title="è·å–è‡ªèº«å¯¹è±¡å±æ€§"></a>è·å–è‡ªèº«å¯¹è±¡å±æ€§</h4><p><code>hasOwnProperty</code> æ–¹æ³•èƒ½å¤Ÿåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«è‡ªå®šä¹‰å±æ€§ï¼Œè€Œä¸æ˜¯åœ¨åŸå‹é“¾ä¸Šçš„å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var test = &#123;hello:&apos;123&apos;&#125;</div><div class="line"></div><div class="line">Object.prototype.name = &apos;bbt&apos;</div><div class="line"></div><div class="line">test.name  //&apos;bbt&apos;</div><div class="line">test.hasOwnProperty(&apos;hello&apos;) //true</div><div class="line">test.hasOwnProperty(&apos;name&apos;) //false</div></pre></td></tr></table></figure>
<p><code>for in</code> å¾ªç¯å¯ä»¥éå†å¯¹è±¡åŸå‹é“¾ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå¦‚æ­¤æˆ‘ä»¬å°† <code>hasOwnProperty</code>ç»“åˆå¾ªç¯<code>for in</code> èƒ½å¤Ÿè·å–åˆ°å¯¹è±¡è‡ªå®šä¹‰å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var test = &#123;hello:&apos;222&apos;&#125;</div><div class="line">Object.prototype.name = &apos;bbt&apos;</div><div class="line"></div><div class="line">for(var i in test)&#123;</div><div class="line">  console.log(i) // è¾“å‡ºä¸¤ä¸ªå±æ€§ï¼Œhello ï¼Œname</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">for(var i in test)&#123;</div><div class="line">  if(test.hasOwnProperty(i))&#123;</div><div class="line">    console.log(i)//åªè¾“å‡º hello</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é™¤äº†ä¸Šé¢çš„æ–¹æ³•ï¼Œ<code>getOwnPropertyNames</code> å’Œ <code>Object.keys</code> æ–¹æ³•ï¼Œèƒ½å¤Ÿè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§åï¼Œä¹Ÿæ˜¯æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†è¯¥å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§åã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var test = &#123;hello:&apos;222&apos;&#125;</div><div class="line">Object.prototype.name = &apos;bbt&apos;</div><div class="line"></div><div class="line">Object.keys(test) //[&quot;hello&quot;]</div><div class="line">Object.getOwnPropertyNames(test) //[&quot;hello&quot;]</div></pre></td></tr></table></figure>
<p>é‚£ <code>getOwnPropertyNames</code> å’Œ <code>Object.keys</code> çš„ç”¨æ³•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢</p>
<p><code>Object.keys</code>æ–¹æ³•åªè¿”å›å¯æšä¸¾çš„å±æ€§ï¼Œ<code>Object.getOwnPropertyNames</code>  æ–¹æ³•è¿˜è¿”å›ä¸å¯æšä¸¾çš„å±æ€§åã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var a = [&apos;Hello&apos;, &apos;World&apos;];</div><div class="line"></div><div class="line">Object.keys(a) // [&quot;0&quot;, &quot;1&quot;]</div><div class="line"></div><div class="line">Object.getOwnPropertyNames(a) // [&quot;0&quot;, &quot;1&quot;, &quot;length&quot;]  // length æ˜¯ä¸å¯æšä¸¾å±æ€§</div></pre></td></tr></table></figure>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h4 id="å‡½æ•°å£°æ˜çš„å˜é‡æå‡"><a href="#å‡½æ•°å£°æ˜çš„å˜é‡æå‡" class="headerlink" title="å‡½æ•°å£°æ˜çš„å˜é‡æå‡"></a>å‡½æ•°å£°æ˜çš„å˜é‡æå‡</h4><p>æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å‡½æ•°å£°æ˜æˆ–å‡½æ•°èµ‹å€¼è¡¨è¾¾å¼æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜ä¸€æ ·éƒ½å­˜åœ¨æå‡çš„æƒ…å†µï¼Œå‡½æ•°å¯ä»¥åœ¨å£°æ˜å‰è°ƒç”¨ï¼Œä½†æ˜¯ä¸å¯ä»¥åœ¨èµ‹å€¼å‰è°ƒç”¨</p>
<p>å‡½æ•°å£°æ˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">foo(); // æ­£å¸¸è¿è¡Œï¼Œå› ä¸ºfooåœ¨ä»£ç è¿è¡Œå‰å·²ç»è¢«åˆ›å»º</div><div class="line">function foo() &#123;&#125;</div></pre></td></tr></table></figure>
<p>å‡½æ•°è¡¨è¾¾å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">foo; // &apos;undefined&apos;</div><div class="line">foo(); // å‡ºé”™ï¼šTypeError</div><div class="line">var foo = function() &#123;&#125;;</div></pre></td></tr></table></figure>
<p>å˜é‡æå‡æ˜¯åœ¨ä»£ç è§£æçš„æ—¶å€™è¿›è¡Œçš„ï¼Œfoo() æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œå·²ç»åœ¨è§£æé˜¶æ®µå°† foo å®šä¹‰è¿‡äº†ã€‚èµ‹å€¼è¯­å¥åªåœ¨ä»£ç è¿è¡Œæ—¶æ‰è¿›è¡Œï¼Œæ‰€ä»¥åœ¨èµ‹å€¼å‰è°ƒç”¨ä¼šæŠ¥é”™</p>
<p>ä¸€ç§æ¯”è¾ƒå°‘ç”¨çš„å‡½æ•°èµ‹å€¼æ“ä½œï¼Œå°†å‘½åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæ­¤æ—¶çš„å‡½æ•°ååªå¯¹å‡½æ•°å†…éƒ¨å¯è§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var test = function foo()&#123;</div><div class="line">  console.log(foo) //æ­£å¸¸è¾“å‡º</div><div class="line">&#125;</div><div class="line"></div><div class="line">console.log(foo) //Uncaught ReferenceError</div></pre></td></tr></table></figure>
<h4 id="this-çš„å·¥ä½œåŸç†"><a href="#this-çš„å·¥ä½œåŸç†" class="headerlink" title="this çš„å·¥ä½œåŸç†"></a>this çš„å·¥ä½œåŸç†</h4><blockquote>
<p>åœ¨ <code>javascript</code> ä¸­ ï¼Œ<code>this</code> æ˜¯ä¸€ä¸ªæ¯”è¾ƒéš¾ç†è§£çš„ç‚¹ï¼Œä¸åŒçš„è°ƒç”¨ç¯å¢ƒä¼šå¯¼è‡´ <code>this</code> çš„ä¸åŒæŒ‡å‘ï¼Œä½†æ˜¯å”¯ä¸€ä¸å˜çš„æ˜¯ <code>this</code> æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡</p>
</blockquote>
<p>ç®€å•çš„è¯´ï¼Œ<code>this</code> å°±æ˜¯å±æ€§å’Œæ–¹æ³•å½“å‰æ‰€åœ¨çš„å¯¹è±¡ï¼ˆå‡½æ•°æ‰§è¡Œååœ¨çš„ä½œç”¨åŸŸï¼‰ï¼Œå¹³æ—¶ä½¿ç”¨çš„ <code>this</code>  çš„æƒ…å†µå¯ä»¥å¤§è‡´åˆ†ä¸º5ç§</p>
<table>
<thead>
<tr>
<th>è°ƒç”¨æ–¹å¼</th>
<th>æŒ‡å‘</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. å…¨å±€èŒƒå›´è°ƒç”¨</td>
<td>æŒ‡å‘ window å…¨å±€å¯¹è±¡</td>
</tr>
<tr>
<td>2. å‡½æ•°è°ƒç”¨</td>
<td>æŒ‡å‘ window å…¨å±€å˜é‡</td>
</tr>
<tr>
<td>3. å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨</td>
<td>æŒ‡å‘æ–¹æ³•è°ƒç”¨çš„å¯¹è±¡</td>
</tr>
<tr>
<td>4. æ„é€ å‡½æ•°è°ƒç”¨</td>
<td>æŒ‡å‘æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹</td>
</tr>
<tr>
<td>5. é€šè¿‡ï¼Œcall ï¼Œapply ï¼Œbind æ˜¾ç¤ºçš„æŒ‡å®š thisæŒ‡å‘</td>
<td>å’Œä¼ å‚æœ‰å…³</td>
</tr>
</tbody>
</table>
<p>Function.call</p>
<blockquote>
<p>è¯­æ³•ï¼šfunction.call(thisArg, arg1, arg2, â€¦)ï¼Œ<code>thisArg</code>è¡¨ç¤ºå¸Œæœ›å‡½æ•°è¢«è°ƒç”¨çš„ä½œç”¨åŸŸï¼Œ<code>arg1, arg2, â€¦</code>è¡¨ç¤ºå¸Œæœ›è¢«ä¼ å…¥å‡½æ•°é¢å‚æ•° , å¦‚æœå‚æ•°ä¸ºç©ºã€<code>null</code>å’Œ<code>undefined</code>ï¼Œåˆ™é»˜è®¤ä¼ å…¥å…¨å±€å¯¹è±¡ã€‚</p>
</blockquote>
<p>ä»£ç ç¤ºä¾‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var name = &apos;xiaomin&apos;</div><div class="line">var test = &#123;name : &apos;bbt&apos;&#125;</div><div class="line"></div><div class="line">function hello( _name )&#123;</div><div class="line">  _name ?console.log(this.name,_name): console.log(this.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line">hello() //xiaomin</div><div class="line">hello.call(test) //bbt</div><div class="line">hello.call(test,&apos;xiaohong&apos;) //bbt xiaohong</div><div class="line">hello.call() //xiaomin</div><div class="line">hello.call(null) //xiaomin</div><div class="line">hello.call(undefined) //xiaomin</div></pre></td></tr></table></figure>
<p>Function.apply</p>
<blockquote>
<p>è¯­æ³•å’Œ<code>call</code> æ–¹æ³•ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œä¼ å…¥è°ƒç”¨å‡½æ•°çš„å‚æ•°å˜æˆä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥ï¼Œå³ func.apply(thisArg, [argsArray])</p>
</blockquote>
<p>æ”¹é€ ä¸Šé¢çš„ç¤ºä¾‹å°±æ˜¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hello.apply(test,[&apos;xiaomin&apos;])</div></pre></td></tr></table></figure>
<p>Function.bind</p>
<blockquote>
<p><code>bind</code>æ–¹æ³•ç”¨äºå°†å‡½æ•°ä½“å†…çš„<code>this</code>ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var d = new Date();</div><div class="line">d.getTime()</div><div class="line"></div><div class="line">var print = d.getTime; //èµ‹å€¼å getTime å·²ç»ä¸æŒ‡å‘ d å®ä¾‹</div><div class="line">print() // Uncaught TypeError</div></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var print = d.getTime.bind(d)</div></pre></td></tr></table></figure>
<p>å®¹æ˜“å‡ºé”™çš„åœ°æ–¹</p>
<p>å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ï¼Œå‡½æ•°è°ƒç”¨ï¼Œ<code>this</code> æ€»æ˜¯æŒ‡å‘ <code>window</code> å…¨å±€å˜é‡ï¼Œæ‰€ä»¥åœ¨å¯¹è±¡çš„æ–¹æ³•é‡Œå¦‚æœæœ‰å‡½æ•°çš„è°ƒç”¨çš„è¯ï¼ˆé—­åŒ…çš„æƒ…å†µï¼‰ï¼Œ<code>this</code> æ˜¯ä¼šæŒ‡å‘ å…¨å±€å¯¹è±¡çš„ï¼Œä¸ä¼šæŒ‡å‘è°ƒç”¨çš„å¯¹è±¡ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var name = &apos;xiaomin&apos;</div><div class="line">var test = &#123;</div><div class="line">  name : &apos;bbt&apos;</div><div class="line">&#125;</div><div class="line">test.method = function()&#123;</div><div class="line">  function hello()&#123;</div><div class="line">      console.log(this.name)</div><div class="line">    &#125;</div><div class="line">    hello()</div><div class="line">&#125;</div><div class="line"></div><div class="line">// è°ƒç”¨</div><div class="line">test.method() // è¾“å‡º xiaomin</div></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦å°† <code>this</code> æŒ‡å‘è°ƒç”¨çš„å¯¹è±¡ï¼Œå¯ä»¥å°†å¯¹è±¡çš„ <code>this</code> æŒ‡å‘å­˜å‚¨èµ·æ¥ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨ <code>that</code> å˜é‡æ¥åšè¿™ä¸ªå­˜å‚¨ã€‚æ”¹è¿›ä¹‹åçš„ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var name = &apos;xiaomin&apos;</div><div class="line">var test = &#123;</div><div class="line">  name : &apos;bbt&apos;</div><div class="line">&#125;</div><div class="line">test.method = function()&#123;</div><div class="line">  var that = this</div><div class="line">  function hello()&#123;</div><div class="line">      console.log(that.name)</div><div class="line">    &#125;</div><div class="line">    hello()</div><div class="line">&#125;</div><div class="line"></div><div class="line">// è°ƒç”¨</div><div class="line">test.method() // è¾“å‡º bbt</div></pre></td></tr></table></figure>
<p>####é—­åŒ…å’Œå¼•ç”¨</p>
<blockquote>
<p>é—­åŒ…æˆ‘ä»¬å¯ä»¥ç†è§£æˆæ˜¯åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°</p>
</blockquote>
<p>åœ¨ <code>javascript</code> ä¸­ï¼Œå†…éƒ¨ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œä½†æ˜¯å¤–éƒ¨ä½œç”¨åŸŸä¸èƒ½è®¿é—®å†…éƒ¨ä½œç”¨åŸŸï¼Œéœ€è¦è®¿é—®çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡åˆ›å»ºé—­åŒ…ï¼Œæ¥æ“ä½œå†…éƒ¨å˜é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">function test(_count)&#123;</div><div class="line">  var count = _count</div><div class="line"></div><div class="line">  return &#123;</div><div class="line">    inc:function()&#123;</div><div class="line">      count++</div><div class="line">    &#125;,</div><div class="line">    get:function()&#123;</div><div class="line">      return count</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var a = test(4)</div><div class="line">a.get()//4</div><div class="line">a.inc()</div><div class="line">a.get()//5</div></pre></td></tr></table></figure>
<p>é—­åŒ…ä¸­å¸¸ä¼šå‡ºé”™çš„é¢è¯•é¢˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for(var i = 0; i &lt; 10; i++) &#123;</div><div class="line">    setTimeout(function() &#123;</div><div class="line">        console.log(i);</div><div class="line">    &#125;, 0);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¾ˆå¤šåŒå­¦ä¼šè§‰å¾—ï¼Œä¸Šé¢çš„ä»£ç ä¼šæ­£å¸¸è¾“å‡º0åˆ°9ï¼Œä½†æ˜¯å®é™…æ˜¯è¾“å‡ºåæ¬¡10ã€‚é‡åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œé™¤äº†é—­åŒ…çš„æ¦‚å¿µè¦ç†è§£æ¸…æ¥šï¼Œä½ è¿˜éœ€è¦çŸ¥é“ï¼Œ<code>setTimeout</code> å†…çš„ä»£ç ä¼šè¢«å¼‚æ­¥æ‰§è¡Œï¼Œä»£ç ä¼šå…ˆæ‰§è¡Œæ‰€æœ‰çš„åŒæ­¥ä»£ç ï¼Œå³ä¸Šé¢çš„è¿™æ®µä»£ç ä¼šå…ˆå°† <code>for</code> å¾ªç¯æ‰§è¡Œï¼Œæ­¤æ—¶ <code>i</code> çš„å€¼ä¸º 10ï¼Œconsole.log(i) ä¸€ç›´å¼•ç”¨ç€å…¨å±€å˜é‡çš„ i  æ‰€ä»¥ä¼šè¾“å‡ºåæ¬¡ 10</p>
<p> æ”¹è¿›ä»£ç ï¼Œæˆ‘ä»¬åœ¨ <code>for</code> å¾ªç¯é‡Œåˆ›å»ºä¸€ä¸ªé—­åŒ…ï¼ŒæŠŠå¾ªç¯è‡ªå¢çš„ <code>i</code> ä½œä¸ºå‚æ•°ä¼ å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">for(var i = 0; i &lt; 10; i++) &#123;</div><div class="line">    (function(e) &#123;</div><div class="line">        setTimeout(function() &#123;</div><div class="line">            console.log(e);</div><div class="line">        &#125;, 1000);</div><div class="line">    &#125;)(i);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="setTimeout-amp-amp-setInterval"><a href="#setTimeout-amp-amp-setInterval" class="headerlink" title="setTimeout &amp;&amp; setInterval"></a>setTimeout &amp;&amp; setInterval</h4><blockquote>
<p><code>javascript</code> æ˜¯å¼‚æ­¥çš„å•çº¿ç¨‹è¿è¡Œè¯­è¨€ï¼Œå…¶ä»–ä»£ç è¿è¡Œçš„æ—¶å€™å¯èƒ½ä¼šé˜»å¡ <code>setTimeout</code> &amp;&amp; <code>setInterval</code> çš„è¿è¡Œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">console.log(1)</div><div class="line">setTimeout(function()&#123;</div><div class="line">  console.log(2)</div><div class="line">&#125;, 0);</div><div class="line">console.log(3)</div><div class="line"></div><div class="line">è¾“å‡ºç»“æœï¼š 1ï¼Œ3ï¼Œ2  //setTimeout è¢«é˜»å¡</div></pre></td></tr></table></figure>
<p>å¤„ç†é˜»å¡çš„æ–¹æ³•æ˜¯å°†<code>setTimeout</code> å’Œ <code>setInterval</code>æ”¾åœ¨å›è°ƒå‡½æ•°é‡Œæ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function test()&#123;</div><div class="line">  	setTimeout(function()&#123;</div><div class="line">  		console.log(2)</div><div class="line">	&#125;, 0);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>setTimeout</code> å’Œ <code>setInterval</code> è¢«è°ƒç”¨æ—¶ä¼šè¿”å›ä¸€ä¸ª ID ç”¨æ¥æ¸…é™¤å®šæ—¶å™¨</p>
<p>æ‰‹å·¥æ¸…é™¤æŸä¸ªå®šæ—¶å™¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var id = setTimeout(foo, 1000);</div><div class="line">clearTimeout(id);</div></pre></td></tr></table></figure>
<p>æ¸…æ¥šæ‰€æœ‰çš„å®šæ—¶å™¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var lastId = setTimeout(function()&#123;</div><div class="line">  console.log(&apos;11&apos;)</div><div class="line">&#125;, 0);</div><div class="line"></div><div class="line">for(var i=0;i&lt;lastId;i++;)&#123;</div><div class="line">  clearTimeout(i);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è·å–æœ€åä¸€ä¸ªå®šæ—¶å™¨çš„idï¼Œéå†æ¸…é™¤å®šæ—¶å™¨ï¼Œå¯ä»¥æ¸…é™¤æ‰€æœ‰çš„å®šæ—¶å™¨ã€‚</p>
<h3 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h3><p>####åŒ…è£…å¯¹è±¡</p>
<blockquote>
<p>æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼â€”â€”åœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Œä¹Ÿä¼šè‡ªåŠ¨è½¬ä¸ºå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åŸå§‹ç±»å‹çš„â€œåŒ…è£…å¯¹è±¡â€ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ï¼Œå°†åŸå§‹ç±»å‹è½¬åŒ–ä¸ºå¯¹åº”çš„å¯¹è±¡å³åŒ…è£…å¯¹è±¡ï¼Œä»è€Œæ˜¯åŸå§‹ç±»å‹èƒ½å¤Ÿæ–¹ä¾¿çš„è°ƒç”¨æŸäº›æ–¹æ³•</p>
<p>æ•°å€¼ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼çš„ç±»å‹è½¬æ¢å‡½æ•°åˆ†åˆ«æ˜¯ <code>Numberï¼ŒStringï¼ŒBoolean</code>ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™åœ¨å‡½æ•°å‰é¢åŠ ä¸ŠNew å°±å˜æˆäº†æ„é€ å‡½æ•°ï¼Œèƒ½å¤Ÿè’‹å¯¹åº”çš„åŸå§‹ç±»å‹è½¬åŒ–ä¸ºâ€œåŒ…è£…å¯¹è±¡â€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var v1 = new Number(123);</div><div class="line">var v2 = new String(&apos;abc&apos;);</div><div class="line">var v3 = new Boolean(true);</div><div class="line"></div><div class="line">typeof v1 // &quot;object&quot;</div><div class="line">typeof v2 // &quot;object&quot;</div><div class="line">typeof v3 // &quot;object&quot;</div><div class="line"></div><div class="line">v1 === 123 // false</div><div class="line">v2 === &apos;abc&apos; // false</div><div class="line">v3 === true // false</div></pre></td></tr></table></figure>
<h4 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h4><p>ç±»å‹è½¬æ¢åˆ†ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢å’Œè‡ªåŠ¨è½¬æ¢ï¼Œ<code>javascript</code> æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œåœ¨åˆ°å—è§£æè¿è¡Œæ—¶ï¼Œéœ€è¦çš„æ•°æ®ç±»å‹å’Œä¼ å…¥çš„æ•°æ®ç±»å‹ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œ<code>javascript</code> ä¼šè¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬åŒ–ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ç±»å‹è½¬æ¢æ–¹æ³•è¿›è¡Œå¼ºåˆ¶ç±»å‹è£…æ¢ã€‚</p>
<p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸è¿‡å°±ä¸‹é¢ä¸‰ç§æƒ…å†µ</p>
<p>ä¸åŒæ•°æ®ç±»å‹ä¹‹é—´ç›¸äº’è¿ç®—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;2&apos;+4 // &apos;24&apos;</div></pre></td></tr></table></figure>
<p>å¯¹éå¸ƒå°”å€¼è¿›è¡Œå¸ƒå°”è¿ç®—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if(&apos;22&apos;)&#123;</div><div class="line">  console.log(&apos;hello&apos;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯¹éæ•°æ®ç±»å‹ä½¿ç”¨ä¸€å…ƒè¿ç®—ç¬¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+&apos;12&apos;  //12</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿé€šè¿‡<code>Number ï¼ŒStringï¼ŒBoolean</code> æ¥è¿›è¡Œå¼ºåˆ¶æ•°æ®ç±»å‹è½¬æ¢ã€‚å¼ºåˆ¶ç±»å‹è½¬åŒ–çš„è§„åˆ™æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ã€‚</p>
<p>Number è½¬æ¢  <a href="http://javascript.ruanyifeng.com/grammar/conversion.html" target="_blank" rel="external">å¼•ç”¨é˜®è€å¸ˆçš„è¯¦ç»†è§£é‡Š</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ç¬¬ä¸€æ­¥ï¼Œè°ƒç”¨å¯¹è±¡è‡ªèº«çš„valueOfæ–¹æ³•ã€‚å¦‚æœè¿”å›åŸå§‹ç±»å‹çš„å€¼ï¼Œåˆ™ç›´æ¥å¯¹è¯¥å€¼ä½¿ç”¨Numberå‡½æ•°ï¼Œä¸å†è¿›è¡Œåç»­æ­¥éª¤ã€‚</div><div class="line"></div><div class="line">ç¬¬äºŒæ­¥ï¼Œå¦‚æœ valueOf æ–¹æ³•è¿”å›çš„è¿˜æ˜¯å¯¹è±¡ï¼Œåˆ™æ”¹ä¸ºè°ƒç”¨å¯¹è±¡è‡ªèº«çš„ toString æ–¹æ³•ã€‚å¦‚æœ toString æ–¹æ³•è¿”å›åŸå§‹ç±»å‹çš„å€¼ï¼Œåˆ™å¯¹è¯¥å€¼ä½¿ç”¨ Number å‡½æ•°ï¼Œä¸å†è¿›è¡Œåç»­æ­¥éª¤ã€‚</div><div class="line"></div><div class="line">ç¬¬ä¸‰æ­¥ï¼Œå¦‚æœ toString æ–¹æ³•è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œå°±æŠ¥é”™ã€‚</div></pre></td></tr></table></figure>
<p><code>String</code> è½¬æ¢æ–¹æ³•åŒæ ·ä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨åŸå¯¹è±¡çš„ <code>toString</code> æ–¹æ³•å’Œ <code>valueOf</code> æ–¹æ³•ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ <code>String</code> å‡½æ•°ä¼šå…ˆè°ƒç”¨ <code>toString</code> æ–¹æ³•è¿›è¡Œè½¬æ¢</p>
<p><code>Boolean</code> çš„è½¬æ¢è§„åˆ™ä¼šç›¸å¯¹ç®€å•ä¸€äº›ï¼Œé™¤äº†å‡ ä¸ªç‰¹æ®Šçš„å€¼ï¼Œéƒ½ä¼šè¢«è½¬åŒ–ä¸º <code>true</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">undefined</div><div class="line">null</div><div class="line">+0æˆ–-0</div><div class="line">NaN</div><div class="line">&apos;&apos;ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¦æ³¨æ„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Boolean(&apos;false&apos;) //true</div></pre></td></tr></table></figure>
<h4 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h4><blockquote>
<p><code>typeof</code> æ“ä½œç¬¦è¿”å›æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ç”±äº <code>javascript</code> è®¾è®¡çš„å†å²åŸå› ï¼Œ<code>typeof</code> ç°å·²ç»ä¸èƒ½æ»¡è¶³æˆ‘ä»¬ç°åœ¨å¯¹äºç±»å‹åˆ¤æ–­çš„è¦æ±‚äº†</p>
</blockquote>
<table>
<thead>
<tr>
<th>Value</th>
<th>Class</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€œfooâ€</td>
<td>String</td>
<td>string</td>
</tr>
<tr>
<td>new String(â€œfooâ€)</td>
<td>String</td>
<td>object</td>
</tr>
<tr>
<td>1.2</td>
<td>Number</td>
<td>number</td>
</tr>
<tr>
<td>new Number(1.2)</td>
<td>Number</td>
<td>object</td>
</tr>
<tr>
<td>true</td>
<td>Boolean</td>
<td>boolean</td>
</tr>
<tr>
<td>new Boolean(true)</td>
<td>Boolean</td>
<td>object</td>
</tr>
<tr>
<td>new Date()</td>
<td>Date</td>
<td>object</td>
</tr>
<tr>
<td>new Error()</td>
<td>Error</td>
<td>object</td>
</tr>
<tr>
<td>[1,2,3]</td>
<td>Array</td>
<td>object</td>
</tr>
<tr>
<td>new Array(1, 2, 3)</td>
<td>Array</td>
<td>object</td>
</tr>
<tr>
<td>new Function(â€œâ€)</td>
<td>Function</td>
<td>functio</td>
</tr>
<tr>
<td>/abc/g</td>
<td>RegExp</td>
<td>object (function in Nitro/V8)</td>
</tr>
<tr>
<td>new RegExp(â€œmeowâ€)</td>
<td>RegExp</td>
<td>object (function in Nitro/V8)</td>
</tr>
<tr>
<td>{}</td>
<td>Object</td>
<td>object</td>
</tr>
<tr>
<td>new Object()</td>
<td>Object</td>
<td>object</td>
</tr>
<tr>
<td>null</td>
<td>null</td>
<td>object</td>
</tr>
</tbody>
</table>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>typeof</code> ä¸èƒ½åŒºåˆ†å¯¹è±¡çš„æ•°ç»„å’Œæ—¥æœŸï¼Œè¿˜ä¼šæŠŠ <code>null</code> åˆ¤æ–­æˆå¯¹è±¡ï¼Œé‚£æˆ‘ä»¬ä¸€èˆ¬æ˜¯ä»€ä¹ˆæ—¶å€™ç”¨ <code>typeof</code> å‘¢ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå·²ç»å®šä¹‰çš„å˜é‡æ˜¯å¦è¢«èµ‹å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var a</div><div class="line">if(typeof a == &apos;undefined&apos;)&#123;</div><div class="line">  console.log(&apos;a å·²ç»è¢«å®šä¹‰&apos;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h4><blockquote>
<p><code>instanceof</code> æ“ä½œç¬¦é€šå¸¸ç”¨æ¥åˆ¤æ–­ï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯å¦åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ <code>instanceof</code> çš„å·¦å€¼æ˜¯å¯¹è±¡ï¼Œå³å€¼æ˜¯æ„é€ å‡½æ•°</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// defining constructors</div><div class="line">function C() &#123;&#125;</div><div class="line">function D() &#123;&#125;</div><div class="line"></div><div class="line">var o = new C();</div><div class="line"></div><div class="line">// true, because: Object.getPrototypeOf(o) === C.prototype</div><div class="line">o instanceof C;</div><div class="line"></div><div class="line">// false, because D.prototype is nowhere in o&apos;s prototype chain</div><div class="line">o instanceof D;</div></pre></td></tr></table></figure>
<h4 id="Object-prototype-toString"><a href="#Object-prototype-toString" class="headerlink" title="Object.prototype.toString"></a>Object.prototype.toString</h4><blockquote>
<p>é‚£ä¹ˆæˆ‘ä»¬æœ‰æ²¡æœ‰å¯ä»¥ç”¨æ¥åŒºåˆ†å˜é‡æ•°æ®ç±»å‹çš„æ–¹æ³•å‘¢ï¼Œæœ‰ï¼Œ<code>Object.prototype.toString</code></p>
</blockquote>
<p>ä¸€äº›åŸå§‹æ•°æ®ç±»å‹ä¹Ÿæœ‰ <code>toString</code> æ–¹æ³•ï¼Œä½†æ˜¯é€šå¸¸ä»–ä»¬çš„ <code>toString</code> æ–¹æ³•éƒ½æ˜¯æ”¹é€ è¿‡çš„ï¼Œä¸èƒ½è¿›è¡Œ æ•°æ®ç±»å‹åˆ¤æ–­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ <code>Object</code> åŸå‹é“¾ä¸Šçš„ <code>toString</code> æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var a = 1234</div><div class="line">a.toString() // &apos;1234&apos;</div><div class="line"></div><div class="line">Object.prototype.toString.call(a) // &quot;[object Number]&quot;</div></pre></td></tr></table></figure>
<p> ä¸åŒç±»å‹è¿”å›çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">1. æ•°å€¼ [object Number]</div><div class="line">2. å­—ç¬¦ä¸² [object String]</div><div class="line">3.å¸ƒå°”å€¼ [object Boolean]</div><div class="line">4.undefined [object undefined]</div><div class="line">5.null  [object Null]</div><div class="line">6.æ•°ç»„ [object Array]</div><div class="line">7.arguments [object Arguments]</div><div class="line">8.å‡½æ•° [object function]</div><div class="line">9.Error [object Error]</div><div class="line">10.Date [object Date]</div><div class="line">11.RegExp [object RegExp]</div><div class="line">12.å…¶ä»–å¯¹è±¡ [object object]</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å¤Ÿé€šè¿‡ <code>Object.prototype.toString</code> æ–¹æ³•ï¼Œå°è£…ä¸€ä¸ªå¯ä»¥åˆ¤æ–­å˜é‡æ•°æ®ç±»å‹çš„å‡½æ•°äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function type(obj) &#123;</div><div class="line">    return Object.prototype.toString.call(obj).slice(8, -1);</div><div class="line">&#125;</div><div class="line"></div><div class="line">type(function()&#123;&#125;) //&quot;Function&quot;</div></pre></td></tr></table></figure>
<blockquote>
<p>è¿™æ¬¡æˆ‘ä»¬ä»å¯¹è±¡ã€å‡½æ•°ã€ç±»å‹ä¸‰æ–¹é¢å…¥æ‰‹äº†è§£äº†<code>javascript</code> ä¸­å®¹æ˜“è¢«å¿½è§†æˆ–åˆ™è¯´æ¯”è¾ƒéš¾ç†è§£çš„åœ°æ–¹ï¼Œæˆ‘ä¼šç»§ç»­å°†æˆ‘åœ¨å­¦ä¹ ä¸­ç§¯ç´¯çš„å†…å®¹åˆ†äº«ç»™å¤§å®¶ï¼Œå¦‚æœå¤§å®¶è§‰å¾—æ–‡ç« æœ‰éœ€è¦æ”¹è¿›æˆ–åˆ™æœ‰å…¶ä»–æƒ³è¦äº†è§£çš„å†…å®¹çš„ï¼Œæ¬¢è¿ç§ä¿¡ï¼Œè¯„è®ºæˆ–åˆ™å¾®ä¿¡æˆ‘ï¼Œæˆ‘çš„å¾®ä¿¡æ˜¯ï¼š646321933</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2018/03/28/sanya/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/28/sanya/" itemprop="url">
                  ä¸‰äºšä¹‹æ—…
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-28T16:31:57+08:00">
                2018-03-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/03/28/sanya/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/28/sanya/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>å¤§å®¶æ€»è¯´ï¼Œèº«ä½“å’Œå¿ƒçµéœ€è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚è¯»ä¹¦ä¸ä¸€å®šæ‰€æœ‰çš„äººéƒ½èƒ½å–œæ¬¢ï¼Œä½†æ˜¯æ—…è¡Œç»å¯¹æ˜¯æ¯ä¸€ä¸ªå¹´é¾„é˜¶æ®µçš„äººéƒ½ä¸ä¼šæ‹’ç»çš„çš„ä¸€ç§äº¦æˆ–æ˜¯æ”¾æ¾äº¦æˆ–æ˜¯é•¿è§è¯†çš„æ–¹å¼ï¼Œå¦‚æœè¯´ä¼˜ç¼ºç‚¹çš„è¯ï¼Œé‚£åº”è¯¥å°±æ˜¯å¿ƒç–¼é’±äº†ã€‚æˆ‘å¾ˆå–œæ¬¢æ—…æ¸¸ï¼Œæˆ‘è§‰å¾—æ¯å¹´ä¸€æ¬¡æ—…è¡Œæ˜¯å¿…è¦çš„ã€‚</p>
</blockquote>
<p>æ—…è¡Œä¸€èˆ¬æˆ‘éƒ½æ˜¯ä¸´æ—¶èµ·æ„çš„ï¼Œçœ‹åˆ°å“ªé‡Œçš„æœºç¥¨ä¾¿å®œäº†ï¼Œå°±ä¹°äº†å‡†å¤‡èµ°ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯æ¯”è¾ƒå€¾å‘äºä¸éœ€è¦åŠç­¾è¯çš„åœ°æ–¹ï¼Œæ¯”å¦‚æµå·å²›ï¼Œæˆ–åˆ™å›½å†…ã€‚è¿™æ¬¡æˆ‘ä»¬å»äº†ä¸‰äºšã€‚</p>
<p>å› ä¸ºæ˜¯è‡ªç”±è¡Œï¼Œå»ä¹‹å‰åšäº†ä¸€äº›ç²—ç•¥çš„æ”»ç•¥ï¼Œç¡®å®šå‡ ä¸ªè‡ªå·±æƒ³è¦æ¸¸ç©çš„æ™¯ç‚¹ã€‚ä½†æ˜¯è¿™æ¬¡è¡Œç¨‹é™¤äº†å…¥ä½çš„åœ°æ–¹å’Œæ”»ç•¥æ˜¯ä¸€è‡´çš„ï¼Œå…¶ä»–çš„éƒ½æ²¡æœ‰æŒ‰ç…§æ”»ç•¥æ¥ã€‚</p>
<p>æ”»ç•¥æ˜¯æŒ‰ç…§çªèœ‚ä¸Šçš„æ¨èæ™¯ç‚¹æ’åºè¿›è¡Œç­›é€‰çš„ï¼Œä½†æ˜¯åˆ°ä¸‰äºšçš„æ—¶å€™ï¼Œå½“åœ°å±…æ°‘æ¨èäº†æˆ‘å»å…¶ä»–æ™¯ç‚¹ï¼Œæ¸¸å®¢å°‘çš„ï¼Œæ¶ˆè´¹æ›´ä½ä¸€äº›çš„ã€‚</p>
<p>æœºç¥¨æ˜¯åœ¨æºç¨‹ä¸Šä¹°çš„ï¼Œæ­å·å‡ºå‘åˆ°æµ·å£ï¼Œæµ·å£åŠ¨è½¦åˆ°ä¸‰äºšï¼ˆåˆ«é—®ä¸ºå•¥ä¸ç›´é£ï¼Œå› ä¸ºç©·ï¼Œå“ˆå“ˆå“ˆï¼‰æµ·å£çš„ç«è½¦ç«™å’Œé£æœºåœºåœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæç€ç‚¹çš„è¯ï¼Œä¸‹é£æœºä¸€ä¸ªåŠå°æ—¶å°±èƒ½åˆ°ä¸‰äºšäº†ã€‚æ‹…å¿ƒé£æœºæ™šç‚¹é—®é¢˜ï¼Œè¿˜æœ‰åˆ°æœºåœºéœ€è¦å»æè¡Œæï¼Œæ‰€ä»¥æ²¡æœ‰æå‰ä¹°åŠ¨è½¦ç¥¨ï¼Œåˆ°ç«™ä¹°äº†æœ€è¿‘ä¸€è¶Ÿå»ä¸‰äºšï¼Œæ‰€ä»¥ä¸‹é£æœºåæˆ‘ä»¬åœ¨ç«è½¦ç«™é€—ç•™äº†å¤§æ¦‚ä¸€ä¸ªå°æ—¶æ‰å‡ºå‘å»ä¸‰äºšã€‚</p>
<h2 id="D1"><a href="#D1" class="headerlink" title="D1"></a>D1</h2><p>é£æœºæ˜¯ä¸Šåˆ6ç‚¹å‡ºå‘ï¼Œ8ç‚¹55åˆ°æµ·å£ï¼ŒååŠ¨è½¦åˆ°ä¸‰äºšçš„æ—¶å€™å·²ç»æ˜¯12ç‚¹äº†ï¼Œå…¥ä½æˆ¿é—´åˆšå¥½ï¼Œæˆ‘ä»¬æŠŠæˆ¿é—´å®šåœ¨ä¸‰äºšæ¹¾ï¼Œ190 ä¸€æ™šçš„æµ·æ™¯æˆ¿ï¼ˆä¸€å®¤ä¸€å…ä¸€å¨ä¸€å«ï¼‰æ„Ÿè§‰æ€§ä»·è¶…çº§é«˜ï¼Œä¸‰äºšçš„ç‰©ä»·æ²¡æœ‰ç‰¹åˆ«é«˜ï¼Œæºœè¾¾çš„æ—¶å€™ï¼Œæœ‰çœ‹åˆ°å¸ƒä¸é…’åº—100å¤šä¸€æ™šçš„æˆ¿é—´ï¼Œä½†æ˜¯ä¸æ˜¯åœ¨æµ·è¾¹ï¼Œå…·ä½“æˆ¿é—´æ˜¯æ€ä¹ˆæ ·çš„ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œå¦‚æœé¢„ç®—ä¸å¤Ÿçš„è¯ï¼Œå¯ä»¥ä½è¿™ç§çš„ã€‚</p>
<p>å› ä¸ºå‡ºé—¨å°±èƒ½åˆ°æµ·è¾¹ï¼Œè™½ç„¶è‚šå­åˆç‚¹é¥¿ï¼Œæˆ‘ä»¬æ²¡æœ‰é©¬ä¸Šå»è§…é£Ÿï¼Œè€Œæ˜¯å»æµ·è¾¹å°åäº†ä¸€ä¼šï¼Œæ²¡æœ‰åå¤ªä¹…ï¼Œå› ä¸ºå¤§ä¸­åˆçš„å®åœ¨å¤ªçƒ­äº†ï¼Œå“ˆå“ˆã€‚åœ¨æ²™æ»©ä¸Šçœ‹åˆ°äº†å‡ ä¸ªçš®è‚¤ååˆ†é»‘çš„ç”·äººåœ¨å…‰ç€å±è‚¡æ™’å¤ªé˜³ï¼Œä»¥ä¸ºæ˜¯å¤–å›½é»‘äººï¼Œè¿˜åœ¨æ„Ÿå¹ä»–ä»¬å¥”æ”¾çš„æ—¶å€™å‘ç°å…¶å®æ˜¯ä¸‰äºšæœ¬åœ°äººï¼Œè„¸ä¸Š3æ¡é»‘çº¿</p>
<p>ä¸‰äºšæ¹¾ä¸Šè¡—è´­ç‰©å’Œåƒæ”¾ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œè¿‡ä¸€æ¡é©¬è·¯å°±èƒ½åˆ°çƒ­é—¹çš„åœ°æ–¹å»ï¼Œå› ä¸ºæ²¡æœ‰åœ¨æ·˜å®ä¸ŠæŒ‘åˆ°è‡ªå·±å–œæ¬¢çš„è‰å¸½ï¼Œæ‰€ä»¥æ²¡æœ‰å¸¦ï¼Œä¸‰äºšå¾ˆæ™’ï¼Œæ‰€ä»¥åœ¨é€›å½“åœ°ç¤¼å“åº—çš„æ—¶å€™ä¹°äº†ä¸€ä¸ªï¼Œ15å—é’±ï¼Œå’Œæ·˜å®çš„ä»·æ ¼å·®ä¸å¤šï¼Œæ²¡æœ‰å¾ˆå®°å®¢ï¼Œåé¢åˆä¹°äº†ä¸€ä¸ªè‡ªæ‹æ†ï¼Œ20å—ï¼Œæ¯”æ·˜å®ä¸Šä¹°ç•¥è´µä¸€äº›ã€‚</p>
<p>ä¸­åˆéšä¾¿åƒçš„é‡åº†å°é¢ï¼Œ2äººåƒäº†30å¤šï¼Œè¿™ä¸ªæ¯”åœ¨æ­å·åƒçš„æ—¶å€™è´µä¸€ä¸¢ä¸¢ï¼Œåœ¨æ­å·åƒå¯èƒ½ 20å¤šå°±æå®šäº†ã€‚ä¹Ÿè¯´ä¸ä¸Šæ¥ï¼Œå¯èƒ½è¿™ä¸ªä¸æ˜¯ä¸‰äºšæœ¬åœ°çš„åƒé£Ÿå§ï¼Œæ‰€ä»¥è¦è´µä¸€äº›ï¼Œä¸‰äºšçš„æµ·é²œå’Œçƒ­å¸¦æ°´æœè¿˜æ˜¯å¾ˆä¾¿å®œçš„ã€‚</p>
<p>å› ä¸ºç¬¬ä¸€å¤©æ—©ä¸Šä¸ºäº†èµ¶é£æœºï¼Œ3ç‚¹å¤šå°±èµ·æ¥äº†ï¼Œæˆ‘ä»¬ä¸¤ä¸ªéƒ½æœ‰ç‚¹ç´¯ï¼Œæœ¬æ¥è¿™ä¸€å¤©ä¹Ÿæ²¡æœ‰å¾ˆç‰¹åˆ«çš„è¡Œç¨‹å®‰æ’ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±åœ¨é…’åº—ç¡äº†ä¸€ä¸‹åˆï¼Œæ™šä¸Šçš„æ—¶å€™æœ¬æ¥æƒ³éšæ„åƒç‚¹ï¼Œé€›åˆ°äº†æµ·é²œåŠ å·¥å¸‚åœºï¼Œå°±åœ¨å¸‚åœºé‡Œä¹°äº†æ´»æµ·é²œåŠ å·¥ç€åƒï¼Œ2ä¸ªäººä¸€å…±åƒäº†300å—ï¼Œå› ä¸ºæ²¡æœ‰æŒ‘åŠ å·¥åº—ï¼Œéšæ„æ²¡æœ‰ç‰¹åˆ«å¥½åƒä¹Ÿæ²¡æœ‰ç‰¹åˆ«éš¾åƒï¼Œå¦‚æœä½ ä»¬å»çš„è¯ï¼Œè¿˜æ˜¯å»ºè®®å»ç¬¬ä¸€æµ·é²œå¸‚åœºï¼ŒæŒ‘ä¸ªå¼€çš„æ—¶é—´é•¿çš„åŠ å·¥åº—ï¼Œ</p>
<p>æ™šä¸Šæˆ‘ä»¬åƒå®Œé¥­åˆå»æ²™æ»©ä¸Šåäº†ä¼šï¼Œç©¿ç€æ‹–é‹å»æµ·æ£ è¸æµªã€‚å¿«åˆ°10ç‚¹çš„æ—¶å€™å‡†å¤‡å›æˆ¿é—´ï¼Œåœ¨æ²¿ç€æµ·æ»©è¾¹ä¸Šçš„è·¯ç‰™ä¸Šæœ‰å¥½å¤šå¤§å§å¤§å¦ˆåœ¨æŒ‰æ‘©ï¼Œ20å—é’±å¯ä»¥æŒ‰20åˆ†é’Ÿï¼ŒæŒºèˆ’æœçš„ã€‚</p>
<p><img src="/images/travel/yz.jpeg" alt="ä¸‰äºšè·¯ç‰™å­"></p>
<h2 id="D2"><a href="#D2" class="headerlink" title="D2"></a>D2</h2><p>ç¬¬äºŒå¤©ï¼Œæˆ‘ä»¬ç¡åˆ°9ç‚¹èµ·ï¼Œæ‰“ç®—åå…¬äº¤è½¦å»äºšé¾™æ¹¾æ½œæ°´ï¼Œåœ¨ç­‰å…¬äº¤çš„æ—¶å€™æœ‰ä¸ªå¤§å”é—®æˆ‘ä»¬å»å“ªï¼Œå¯ä»¥é€ã€‚å¼€å§‹ä»¥ä¸ºæ˜¯é»„ç‰›ï¼Œæœ‰ç‚¹ä¸å¤ªæƒ³æ­ç†ä»–ã€‚ä»–å’Œæˆ‘ä»¬è¯´å¯ä»¥é€æˆ‘ä»¬å»äºšé¾™æ¹¾ï¼Œå¸¦æˆ‘ä»¬å»å”®ç¥¨ç‚¹ä¹°ç¥¨ï¼Œä»–ä»¬æ˜¯é€šè¿‡å¸¦äººå»å”®ç¥¨åº—ä¹°ç¥¨ç§¯åˆ†ï¼Œç„¶åé¢†ç¤¼å“çš„ã€‚ä»–å’Œæˆ‘ä»¬è¯´æ½œæ°´çš„è¯ï¼Œäºšé¾™æ¹¾398å¯ä»¥æ½œï¼Œæ°´ä¸Šé¡¹ç›®æƒ³å¤šç©ç‚¹çš„è¯ï¼Œå¯ä»¥å»è¥¿å²›ï¼Œè¥¿å²›çš„å¥—ç¥¨æ˜¯ 980 å¯ä»¥ç©18é¡¹ã€‚é€æˆ‘ä»¬å»è¥¿å²›çš„è¯åªè¦æ¯äºº5å—çš„è·¯è´¹</p>
<p>æˆ‘ä»¬æƒ³ç€ï¼Œåæ­£ä¹Ÿæ¥äº†ï¼Œå°±å»å¤šç©ç‚¹å§ï¼Œäºšé¾™æ¹¾æ˜¯åœ¨ä¸‰äºšçš„æµ·å²¸è¾¹ï¼Œæµ·æ°´å¯èƒ½ä¹Ÿä¼šæ¯”è¾ƒæµ‘æµŠï¼Œå‡ºæµ·åˆ°å²›ä¸Šæ½œæ°´ä½“éªŒåº”è¯¥èƒ½å¥½ç‚¹ã€‚äºæ˜¯æˆ‘ä»¬åäº†ä»–è€å©†çš„è½¦åˆ°è¥¿å²›å”®ç¥¨å¤„ï¼Œè½¦å­æ²¿ç€æµ·è¾¹å¼€äº†åŠä¸ªå°æ—¶å·¦å³ï¼Œ5å—ä¸€ä¸ªäººçš„è·¯è´¹çœŸæ˜¯è‰¯å¿ƒä»·ã€‚</p>
<p>åˆ°è¥¿å²›åï¼Œæˆ‘ä»¬ä¹°äº†980 çš„å¥—ç¥¨ï¼Œé‡Œé¢åŒ…æ‹¬çŠç‘šç¤æ½œæ°´ï¼Œä¿ç¤æ½œæ°´ï¼Œé¦™è•‰èˆ¹ï¼Œé£é±¼èˆ¹ï¼Œå¿«è‰‡ï¼Œè§‚å…‰è‰‡ï¼Œåˆ’ä¼ï¼Œä¸­åˆçš„è‡ªåŠ©é¤ï¼Œé±¼ç–—å’Œå°é£ä½“éªŒç­‰å°é¡¹ç›®ï¼Œä¹Ÿä¸æ˜¯æ‰€æœ‰çš„é¡¹ç›®éƒ½å¥½ç©ï¼Œä¸€åŠä¸€åŠå§ï¼Œåæ­£è¿™ä¹ˆä¹°å¥—ç¥¨æˆ‘è§‰å¾—æ˜¯ååˆ†åˆ’ç®—çš„</p>
<p>æˆ‘ä»¬ä¸Šå²›ç¬¬ä¸€ä¸ªç©çš„é¡¹ç›®æ˜¯æ½œæ°´ï¼Œæ½œæ°´æœ‰æ½œæ°´æœï¼Œä½†æ˜¯ä½ è¿˜æ˜¯è¦ç©¿è‡ªå·±çš„æ³³è¡£åœ¨é‡Œé¢ï¼Œç©å…¶ä»–æ°´ä¸Šé¡¹ç›®ä¹Ÿä¼šæŠŠè¡£æœå¼„æ¹¿ï¼Œæ‰€ä»¥æ½œå®Œä¹‹åï¼Œä½ å¯ä»¥ä¸æ¢è¡£æœï¼Œç›´æ¥å»ç©å…¶ä»–æ°´ä¸Šé¡¹ç›®äº†ã€‚</p>
<p>æ½œæ°´å¾ˆå¥½ç©ï¼Œæ½œæ°´å‰æ•™ç»ƒä¼šæ•™ä½ ä¸€äº›ç®€å•çš„æ‰‹åŠ¿åŠ¨ä½œï¼Œå…¨ç¨‹æ•™ç»ƒç‰µç€ä½ ç§»åŠ¨ï¼Œæ‰€ä»¥å³ä½¿ä¸ä¼šæ¸¸æ³³ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚æ½œæ°´çš„æ—¶å€™æœ€å¥½è‡ªå·±å¸¦ç€é±¼é£Ÿï¼Œå¸å¼•å°é±¼ã€‚è™½ç„¶æˆ‘æ²¡æœ‰ä¹°ï¼Œä½†æ˜¯å’Œæˆ‘ä¸€èµ·æ½œçš„å…¶ä»–åŒå­¦ä¹°äº†ï¼Œè¹­äº†ä¸€æŠŠé±¼é£Ÿï¼Œå°é±¼åœ¨è‡ªå·±å‘¨è¾¹æ¸¸åŠ¨ï¼Œååˆ†æœ‰è¶£ï¼Œå£®è§‚</p>
<p>æ½œå®Œæ°´ï¼Œæˆ‘ä»¬è¡£æœæ²¡æ¢å»åƒäº†è‡ªåŠ©é¤ï¼Œç„¶åå»åˆ’ä¼ï¼Œåˆ’ä¼è¿™ä¸ªé¡¹ç›®è¯´ä¸ä¸Šå¥½ç©ä¸å¥½ç©ï¼Œå°±æ˜¯å¿«è‰‡æ‹‰ç€ä½ åœ¨æµ·ä¸Šå…œä¸€åœˆï¼Œä¸æ˜¯å¾ˆåˆºæ¿€ï¼Œçœ‹èµ·æ¥å¾ˆå¥½ç©ï¼Œå®é™…ä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¥½ç©ï¼Œå¦‚æœæ²¡ä¹°å¥—ç¥¨çš„è¯ï¼Œä¸æ˜¯å¾ˆå»ºè®®å•ä¹°ç€ç©</p>
<p>ç„¶åæˆ‘ä»¬å»åäº†é¦™è•‰èˆ¹ï¼Œé£ç¾½èˆ¹ï¼Œå¿«è‰‡ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä½ ååœ¨æ°”å«å°èˆ¹ä¸Šè¢«å¿«è‰‡æ‹‰ç€åœ¨æµ·ä¸Šå…œä¸€åœˆï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ï¼ŒæŒºåˆºæ¿€çš„ã€‚ï¼ˆé¦™è•‰èˆ¹åƒä¸‡åˆ«åç¬¬ä¸€æ’ï¼Œæµ·æ°´å¾ˆå’¸ï¼Œååˆ†è¾£çœ¼ç›ï¼Œä¸€è·¯æµ·æ°´æ‰“åœ¨è„¸ä¸Šçœ¼ç›ä¸Šï¼Œå…¨ç¨‹çä¸å¼€çœ¼ç›ï¼Œé£é±¼èˆ¹å¯ä»¥åç¬¬ä¸€æ’ï¼Œä¸ä¼šæœ‰å¾ˆå¤šæ°´è´±ä¸Šæ¥ï¼Œç¬¬ä¸€æ’è§†é‡è¿˜ç®—å¼€é˜”çš„ï¼‰</p>
<p>æ°´ä¸Šé¡¹ç›®éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬ç©äº†å…¨éƒ¨çš„æ°´ä¸Šé¡¹ç›®åŸºæœ¬ä¹Ÿåˆ°ä¸‹åˆ3ç‚¹é’Ÿäº†ï¼Œå»åšäº†é±¼ç–—è¶³æµ´ï¼Œå…¶å®æ˜¯çƒ­å¸¦å°é±¼åƒä½ çš„è§’è´¨ï¼Œè„šæ”¾è¿›å»ä¼šç—’ç—’çš„ï¼Œä½†æ˜¯è¿˜æ»¡èˆ’æœçš„ã€‚ç„¶ååç¯å²›ç”µç“¶å»äº†ç‰›å²›ï¼Œå› ä¸ºèµ¶ç€è¦åœ¨6ç‚¹å‰ç¦»å²›ï¼Œæˆ‘ä»¬å°±å†ç‰›å²›ä¸Šéšæ„é€›äº†ä¸‹ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡ã€‚</p>
<p>å‡ºå²›çš„æ—¶å€™äººæ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬æ’é˜Ÿå·®ä¸å¤šæ’äº†åŠä¸ªå°æ—¶ï¼Œæ™šä¸Šå›å»çš„æ—¶å€™æˆ‘é—®äº†ä¸‹ï¼Œæ‰“è½¦å»ä¸‰äºšæ¹¾è¦60å¤šï¼Œä¸æ˜¯å¾ˆåˆ’ç®—ï¼Œæˆ‘ä»¬å»åäº†å…¬äº¤è½¦ï¼Œåœ¨ç­‰å…¬äº¤çš„æ—¶å€™æˆ‘ä¹°äº†èŠ’æœï¼Œ10å—é’±2å°è¢‹ï¼Œæˆ‘æ•°äº†ä¸€ä¸‹ï¼Œä¸€å…±æœ‰11ä¸ªæ‰‹æŒå¿ƒè¿™ä¹ˆå¤§çš„èŠ’æœï¼Œè€Œä¸”ååˆ†ç”œï¼Œå¾ˆå¥½åƒã€‚</p>
<p>åˆ°é…’åº—çš„æ—¶å€™å·®ä¸å¤š7ç‚¹å¤šï¼Œæˆ‘ä»¬æ´—ä¸ªæ¾¡å‡ºé—¨è§…é£Ÿï¼Œæ‰¾åˆ°ä¸€æ¡å°åƒè¡—ï¼Œåœ¨è§£æ”¾è·¯ä¸Šï¼Œæˆ‘ä»¬ä½çš„åœ°æ–¹è¿‡å»éœ€è¦èµ°15åˆ†é’Ÿï¼Œä¹Ÿç®—æ–¹ä¾¿ï¼Œåƒäº†æµ·é²œçƒ§çƒ¤å’Œæ¸…è¡¥å‡‰è‡­è±†è…ï¼Œä¹°äº†æ³¡æ¤’é¸¡çˆªï¼Œä¸€ä¸ªäºº50å—é’±ç®¡å¤Ÿäº†</p>
<p>åƒå®Œé¥­ï¼Œæˆ‘ä»¬ç…§ä¾‹å»æµ·æ»©è¾¹é€›äº†ä¸‹ï¼Œèººä¸€ä¼šï¼Œæ™šä¸Šçš„æµ·æ»©çœŸçš„å¤ªèˆ’æœäº†ï¼Œè®©äººæƒ³èåŒ–åœ¨æ²™æ»©ä¸Šã€‚ç­‰è€äº†çœŸå¿ƒå¯ä»¥åœ¨æµ·æ»©è¾¹ä¹°ä¸€å¥—æˆ¿å­å…»è€ï¼Œå“ˆå“ˆå“ˆã€‚æ™šä¸Šçš„æµ·æ»©å¾ˆçƒ­é—¹ï¼Œå¾ˆå¤šæ¸¸å®¢åœ¨è¸©æ°´ï¼Œæ‹å©šçº±ç…§ï¼Œè¿˜æœ‰å½“åœ°çš„è€äººæ­Œèˆå›¢çš„èšä¼šæ´»åŠ¨ï¼Œåˆ°å¤„æ˜¯æ¬¢å£°ç¬‘è¯­ã€‚ä»æµ·æ»©è¾¹å›æ¥ï¼Œæˆ‘ä»¬åœ¨è·¯ç‰™è¾¹åšäº†é©¬æ€é¸¡ï¼Œå¥½å¤šè€é˜¿å§¨æŒ‰æ‘©ï¼Œ20å—é’±å¯ä»¥æŒ‰20åˆ†é’Ÿï¼Œä¸è´µï¼Œå¾ˆèˆ’æœï¼ŒæŒ‰å®Œç„¶åå›å»ç¡è§‰<br><img src="/images/travel/hb.jpeg" alt="ä¸‰äºšè·¯ç‰™å­"></p>
<h2 id="D3"><a href="#D3" class="headerlink" title="D3"></a>D3</h2><p>å‰ä¸€å¤©ç©æ°´ç©çš„æ¯”è¾ƒç´¯ï¼Œç¬¬äºŒå¤©10ç‚¹æ‰èµ·æ¥ï¼ŒæŒ‰ç…§åŸæ¥çš„è®¡åˆ’ï¼Œæ˜¯æƒ³å»å—å±±æ–‡åŒ–æ—…æ¸¸åŒºï¼Œé‚£è¾¹çš„108ç±³çš„æµ·ä¸Šè§‚éŸ³å¾ˆå‡ºåï¼Œä½†æ˜¯åæ¥æ²¡æœ‰å»ï¼Œä¹Ÿå¹¸å¥½æ²¡å»ï¼Œ30å¤šåº¦åœ¨å¤–é¢é€›éœ²å¤©çš„æ™¯ç‚¹å®åœ¨ä¸å¤ªåˆé€‚ï¼Œæ˜¨å¤©ç©æ°´ä¸€èµ·è®¤è¯†çš„å‡ ä¸ªå°ä¼™ä¼´å»äº†ï¼Œä»–ä»¬å’Œæˆ‘è¯´è®©æˆ‘åˆ«å»ï¼Œä»–ä»¬å°±é€›äº†10å‡ åˆ†é’Ÿå°±èµ°äº†ï¼Œå› ä¸ºå®åœ¨å¤ªçƒ­äº†</p>
<p>åœ¨æˆ‘ä»¬ä¸çŸ¥é“è¦å»å“ªé‡Œçš„æ—¶å€™ï¼Œæ˜¨å¤©å¸¦æˆ‘ä»¬å»è¥¿å²›çš„å¤§å§å‘å¾®ä¿¡å’Œæˆ‘è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å»çƒ­å¸¦é›¨æ—ï¼Œ20å—é’±ä¸€ä¸ªäººå¸¦æˆ‘ä»¬ç©ä¸€å¤©ï¼Œåœ¨æ™¯ç‚¹ä¹°ç¥¨å°±è¡Œã€‚è€Œä¸”é›¨æ—é‡Œæœ‰ä¸›æ—é£è·ƒï¼Œæ˜¯æˆ‘å¾ˆæƒ³ç©çš„é¡¹ç›®ï¼Œäºæ˜¯æˆ‘ä»¬å»äº†å‘€æ¸ƒå“’ï¼Œå¤§å§å’Œæˆ‘ä»¬è¯´è¿™ä¸ªåœ¨æµ·å—è¯é‡Œæ˜¯ 1ï¼Œ2ï¼Œ3 çš„æ„æ€ã€‚å‘€æ¸ƒå“’ çš„é—¨ç¥¨åŠ ä¸›æ—é£è·ƒé¡¹ç›®æ˜¯ 300å—ä¸€äººï¼Œåæ¥æˆ‘ä»¬åˆåŠ äº†è¸æ­¥æˆæ°´çš„é¡¹ç›®ï¼Œæ¯äºº150ã€‚è¸æ­¥æˆæ°´ä¸æ˜¯å¾ˆå»ºè®®ç©ï¼Œæ„Ÿè§‰æ¯”è¾ƒåƒæ˜¯å›¢å»ºï¼Œå› ä¸ºå¤§å®¶çš„èº«ä½“ç´ è´¨ä¸ä¸€æ ·ï¼Œæ™¯åŒºä¸å¤ªæ•¢å¼€æ”¾å¤ªå†’é™©çš„è·¯æ®µï¼Œæ‰€ä»¥ä¸æ˜¯å¾ˆåˆºæ¿€ï¼Œæ²¡æœ‰ç‰¹åˆ«å¥½ç©ã€‚ä¸›æ—é£è·ƒå°±æ˜¯ç‰æ—æ»‘ç´¢é¡¹ç›®ï¼Œç´¢é“ä»ä¸€ä¸ªå±±å¤´åˆ°å¦ä¸€ä¸ªå±±å¤´ï¼Œä¸€å…±æœ‰130ç±³ï¼Œé€Ÿåº¦ä¸æ˜¯å¾ˆå¿«ï¼Œä½†æ˜¯åœ¨ç‰æ—ä¸­é£è¿‡ï¼Œçœºçœ‹æ•´ä¸ªç‰æ—çš„æ ·å­çœŸæ˜¯å¾ˆèˆ’æœï¼Œå€¼å¾—ä¸€ç©ã€‚å¯æƒœå°±æ˜¯ä¸è®©å¸¦æ‰‹æœºï¼Œç´¢é“çš„ç»ˆç‚¹ä¼šæœ‰äººç»™ä½ æ‹ç…§ï¼Œç…§ç‰‡æ˜¯è¦é’±çš„ï¼Œè¦ä¸è¦ç…§ç‰‡å°±çœ‹ä½ ä¸ªäººæ„æ„¿äº†ï¼Œåæ­£æˆ‘æ˜¯ä¸å¤ªå–œæ¬¢ã€‚</p>
<p>ä¸›æ—é£è·ƒä¹‹åå¯ä»¥åœ¨ç‰æ—é‡Œé—²é€›ä¸€ä¼šï¼Œæ™¯åŒºä¼šç»™æ•£å®¢ä¸€ä¸ªç”µå­è®²è§£å™¨ï¼Œè®²è§£åˆ°æ˜¯æŒºè¯¦ç»†çš„ï¼Œåæ­£æˆ‘æ˜¯æ²¡æœ‰è€å¿ƒå¬ä¸‹æ¥ï¼Œå…¨ç¨‹æ‹ç…§çæ™ƒã€‚åªè®°ä½æ§Ÿæ¦”æ ‘åœ¨æµ·å—æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ–‡åŒ–ï¼Œä»¥å‰å°ä¼™å­è¦çˆ¬49é¢—æ§Ÿæ¦”æ ‘æ‰èƒ½å–åˆ°è€å©†ã€‚</p>
<p>é›¨æ—å¾ˆèˆ’æœï¼Œæœ‰èº«å¤„å¤§è‡ªç„¶çš„æ„Ÿè§‰ï¼Œå€¼å¾—å»ï¼Œåæ­£æˆ‘æ˜¯è§‰å¾—ä¸€å¤©é›¨æ—ä¸€å¤©æµ·æ»©çš„ç©è€æ–¹æ¡ˆæŒºåˆé€‚çš„ï¼Œåˆ°æ˜¯æµ·æ»©å’Œé›¨æ—çš„æ™¯ç‚¹æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œé™¤äº†æˆ‘ç©çš„å‡ ä¸ªï¼Œä½ ä»¬å¯ä»¥è‡ªç”±é€‰æ‹©ä¸‹</p>
<p>æ™šä¸Šåˆ°é…’åº—ï¼Œæˆ‘ä»¬åˆé‡å¤äº†å‰ä¸€å¤©çš„æ´»åŠ¨ï¼Œå°åƒï¼Œæµ·æ»©ï¼Œé©¬æ€é¸¡</p>
<p><img src="/images/travel/rx.jpeg" alt="ä¸‰äºšè·¯ç‰™å­"></p>
<h2 id="D4"><a href="#D4" class="headerlink" title="D4"></a>D4</h2><p>ç¬¬å››å¤©ï¼Œæˆ‘ä»¬æ™šä¸Š11ç‚¹çš„é£æœºï¼Œè€Œä¸”éœ€è¦ä»ä¸‰äºšååŠ¨è½¦åˆ°æµ·å£æœºåœºï¼Œæ‰€ä»¥æˆ‘ä»¬12ç‚¹é€€äº†æˆ¿å­ï¼Œæ‰“ç®—ç»§ç»­åœ¨æµ·æ»©è¾¹ç©åˆ°ä¸‹åˆ5ï¼Œ6ç‚¹å†å‡ºå‘ã€‚ä¸è¿‡ç°å®æ€»æ˜¯æ²¡æœ‰æƒ³è±¡çš„ç¾å¥½ï¼Œ30åº¦çš„æµ·æ»©ï¼Œä¹Ÿçƒ­ï¼Œæˆ‘ä»¬å·®ä¸å¤šåœ¨æµ·æ»©è¾¹é€—ç•™äº†1ä¸ªå°æ—¶ï¼Œå»åƒäº†åˆé¥­ä¹°äº†äº›è èå’Œæ³¡é¢å°±å…¬äº¤åˆ°åŠ¨è½¦ç«™é¿æš‘äº†ã€‚</p>
<p>æˆ‘ä»¬æ²¡æœ‰æå‰ä¹°åŠ¨è½¦ç¥¨ï¼Œæ€»æ˜¯ä¹°çš„å°±è¿‘ä¸€èˆ¬æœ‰åº§ä½çš„ï¼Œ4ç‚¹ä»ä¸‰äºšè§¦å‘ï¼Œåˆ°æµ·å£çš„æ£€å®Œç¥¨çš„æ—¶å€™å·®ä¸å¤š8ç‚¹äº†ã€‚é€›äº†å…ç¨åº—ï¼Œä¹°äº†2åƒçš„é¢è†œå’Œæ´—é¢å¥¶ï¼Œ9åˆšå¥½9ç‚¹å¤šã€‚åœ¨æœºåœºåƒäº†æ³¡é¢ï¼Œç©æœºåœºå†œè¯å°±å¼€å§‹å›åŸæœºç¥¨æ£€ç¥¨äº†</p>
<p>æ€»å¾—æ¥è¯´ç¬¬å››å¤©ï¼Œæ²¡æœ‰å¾ˆç´§å¼ çš„è¡Œç¨‹ï¼Œå°±æ˜¯çé€›ï¼Œä¹°ä¸œè¥¿ï¼Œåƒä¸œè¥¿ã€‚ä¸‰äºšçš„æ™¯ç‚¹éƒ½ç¦»å¾—æ¯”ä»·è¿œï¼Œå»ä¸€ä¸ªæ™¯ç‚¹å…¬äº¤éƒ½å·®ä¸å¤šè¦2ä¸ªå°æ—¶çš„æ ·å­ï¼Œæ¥å›éœ€è¦4ä¸ªå°æ—¶åœ¨è·¯ä¸Šã€‚å¦‚æœè¦èµ¶ç€ç©çš„è¯å…¶å®å¯ä»¥æŠŠè¡Œæå¯„å­˜èµ·æ¥å†ç©ä¸€ä¸ªæ™¯ç‚¹ã€‚ä½†æ˜¯æƒ³ç€å¤ªç´¯äº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠæ—¶é—´ç•™ä¸‹å»é€›å…ç¨åº—äº†ã€‚</p>
<p><img src="/images/travel/by.jpeg" alt="ä¸‰äºšè·¯ç‰™å­"></p>
<h2 id="è£…å¤‡"><a href="#è£…å¤‡" class="headerlink" title="è£…å¤‡"></a>è£…å¤‡</h2><p>ä»¥ä¸‹æˆ‘ç½—åˆ—çš„éå¿…è¦ï¼Œä½†æ˜¯å¾ˆæœ‰ç”¨ï¼Œå“ˆå“ˆå“ˆ</p>
<table>
<thead>
<tr>
<th style="text-align:center">é˜²æ™’</th>
<th style="text-align:center">è®°å½•æ—…ç¨‹</th>
<th style="text-align:center">ç©æ°´</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">é˜²æ™’éœœ</td>
<td style="text-align:center">è‡ªæ‹æ†</td>
<td style="text-align:center">æ‰‹æœºé˜²æ°´è¢‹</td>
</tr>
<tr>
<td style="text-align:center">é˜²æ™’å¤–å¥—</td>
<td style="text-align:center">ç¾ç¾çš„è¡£æœ</td>
<td style="text-align:center">æ‹–é‹</td>
</tr>
<tr>
<td style="text-align:center">å¸½å­</td>
<td style="text-align:center">å¢¨é•œ</td>
<td style="text-align:center">é’±</td>
</tr>
</tbody>
</table>
<h2 id="ä½ å¯èƒ½æƒ³è¦çŸ¥é“çš„ä¸œè¥¿"><a href="#ä½ å¯èƒ½æƒ³è¦çŸ¥é“çš„ä¸œè¥¿" class="headerlink" title="ä½ å¯èƒ½æƒ³è¦çŸ¥é“çš„ä¸œè¥¿"></a>ä½ å¯èƒ½æƒ³è¦çŸ¥é“çš„ä¸œè¥¿</h2><ol>
<li>æˆ‘ä»¬190è®¢çš„æµ·æ™¯æˆ¿ï¼Œæ˜¯åœ¨çˆ±å½¼è¿ä¸Šå®šçš„ï¼Œè¿™ä¸ªå¹³å°ä¸»æ‰“æ°‘å®¿æ‰€ä»¥æ¯”æºç¨‹ä¸Šä¾¿å®œï¼Œå¹³å°æ³¨å†Œé“¾æ¥ <a href="https://zh.airbnb.com/c/09425c" target="_blank" rel="external">https://zh.airbnb.com/c/09425c</a></li>
<li>ä¸‰äºšæ°´æœå¾ˆä¾¿å®œï¼Œæœ€ä¾¿å®œçš„æ˜¯åœ¨æ§Ÿæ¦”è°·ï¼Œ10å—é’±èƒ½ä¹°5ä¸ªè èã€‚å¸‚åŒº0å—é’±åªèƒ½ä¹°3ä¸ªï¼Œå¦‚æœæƒ³ä¹°æ²¡æœ‰å‰Šçš®çš„è èï¼Œå¯ä»¥å»å°±è¿‘çš„èœå¸‚åœº</li>
<li>é©¬æ€é¸¡åœ¨ä¸‰äºšæ¹¾çš„æµ·å²¸ä¸Šï¼Œ20å—1æ¬¡ï¼Œå¯ä»¥æŒ‰20åˆ†é’Ÿ</li>
<li>å¦‚æœä½ æœ‰å…¶ä»–çš„æƒ³é—®ï¼Œå¯ä»¥ç§æˆ‘åƒæˆ‘ï¼Œæˆ‘çš„å¾®ä¿¡ï¼š646321933</li>
</ol>
<blockquote>
<p>æˆ‘ä»¬çš„è¡Œç¨‹æ˜¯4å¤©3å¤œï¼Œå¦‚æœæœ‰æ—¶é—´çš„è¯ï¼Œå»ºè®®è¿˜æ˜¯6å¤©5å¤œï¼Œè¿™æ ·èƒ½æŠŠå¤§éƒ¨åˆ†çš„æ™¯ç‚¹è¦†ç›–åˆ°ï¼Œèœˆæ”¯æ´²å²›ï¼Œåˆ†ç•Œæ´²ï¼Œå—å±±æ–‡åŒ–æ—…æ¸¸åŒºï¼Œæ§Ÿæ¦”è°·ï¼Œå›½å®¶æ£®æ—å…¬å›­éƒ½å¯ä»¥å»èµ°ä¸€èµ°ã€‚ä¸‰äºšæ˜¯ä¸ªå¾ˆèˆ’æœçš„åŸå¸‚ï¼Œåœ¨ä¸‰äºšï¼Œä½ ä¼šæ„Ÿè§‰æ•´ä¸ªæ—¶é—´éƒ½æ…¢ä¸‹æ¥ï¼Œå¾ˆèˆ’æœå¾ˆæ”¾æ¾ï¼Œä½ ä¼šå–œæ¬¢çš„</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2018/03/05/cookie-share/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/05/cookie-share/" itemprop="url">
                  web æµè§ˆå™¨æŒ‡çº¹è·¨åŸŸå…±äº«
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-05T17:41:49+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/03/05/cookie-share/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/05/cookie-share/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>æ¦‚å¿µï¼šè®¾å¤‡id å³è®¾å¤‡æŒ‡çº¹ï¼Œç”¨æ¥è¡¨ç¤ºç”¨æˆ·è®¾å¤‡çš„å”¯ä¸€æ€§</p>
</blockquote>
<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æœ€è¿‘åœ¨åšç”¨æˆ·è¡Œä¸ºåˆ†æé¡¹ç›®çš„å¼€å‘ï¼Œéœ€è¦é‡‡é›†ç”¨æˆ·çš„è®¾å¤‡ä¿¡æ¯ï¼Œéœ€è¦ç”¨è®¾å¤‡æŒ‡çº¹æ¥å”¯ä¸€è¡¨ç¤ºç”¨æˆ·æ“ä½œè®¾å¤‡ã€‚web å­˜å‚¨éƒ½å’Œæµè§ˆå™¨ç›¸å…³ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡js æ¥æ ‡è¯†ä¸€å°ç”µè„‘ï¼Œåªèƒ½ä»¥æµè§ˆå™¨ä½œä¸ºè®¾å¤‡ç»´åº¦æ¥é‡‡é›†è®¾å¤‡ä¿¡æ¯ã€‚å³ç”¨æˆ·ç”µè„‘ä¸­ä¸€ä¸ªæµè§ˆå™¨å°±æ˜¯ä¸€ä¸ªè®¾å¤‡ã€‚</p>
<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>web å˜é‡å­˜å‚¨ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„å°±æ˜¯ cookieï¼ŒsessionStorageï¼ŒlocalStorageï¼Œä½†æ˜¯è¿™3ç§å­˜å‚¨æ–¹å¼éƒ½å’Œè®¿é—®èµ„æºçš„åŸŸåç›¸å…³ã€‚æˆ‘ä»¬æ€»ä¸èƒ½æ¯æ¬¡è®¿é—®ä¸€ä¸ªç½‘ç«™å°±æ–°å»ºä¸€ä¸ªè®¾å¤‡æŒ‡çº¹å§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªæ–¹æ³•æ¥è·¨åŸŸå…±äº«è®¾å¤‡æŒ‡çº¹</p>
<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>æˆ‘ä»¬æƒ³åˆ°çš„æ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡åµŒå¥— iframe åŠ è½½ä¸€ä¸ªé™æ€é¡µé¢ï¼Œåœ¨ iframe ä¸ŠåŠ è½½çš„åŸŸåä¸Šå­˜å‚¨è®¾å¤‡idï¼Œé€šè¿‡è·¨åŸŸå…±äº«å˜é‡è·å–è®¾å¤‡idï¼Œå…±äº«å˜é‡çš„åŸç†æ˜¯é‡‡ç”¨äº†iframe çš„ contentWindowé€šè®¯ï¼Œé€šè¿‡ postMessage è·å–äº‹ä»¶çŠ¶æ€ï¼Œè°ƒç”¨å°è£…å¥½çš„å›è°ƒå‡½æ•°è¿›è¡Œæ•°æ®å¤„ç†</p>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>SDK é‡‡é›†ç«¯ï¼Œè°ƒç”¨æ–¹åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨æ–¹æ³•</p>
<pre><code>collect.setIframe = function () {
      var that = this
      var iframe = document.createElement(&apos;iframe&apos;)
      iframe.src = &quot;http://localhost:82/&quot;
      iframe.style = &apos;display:none&apos;
      document.body.appendChild(iframe)
      iframe.onload = function () {
        iframe.contentWindow.postMessage(&apos;loaded&apos;,&apos;*&apos;);
      }

      //ç›‘å¬messageäº‹ä»¶
      window.addEventListener(&quot;message&quot;, function(){
            that.deviceId = event.data.deviceId

            console.log(&apos;è·å–è®¾å¤‡id&apos;,that.deviceId)

            sessionStorage.setItem(&apos;PageSessionID&apos;,helper.upid())
            helper.send(that.getParames(), that.eventUrl);
            helper.sendDevice(that.getDevice(), that.deviceUrl);
      }, false);
}
</code></pre><p>åµŒå¥—åœ¨ iframe é™æ€é¡µé¢é‡Œçš„è„šæœ¬</p>
<pre><code>&lt;script&gt;

     var getDeviceId = function() {
             return &apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;.replace(/[xy]/g, function (c) {
                     var r = Math.random() * 16 | 0, v = c == &apos;x&apos; ? r : (r &amp; 0x3 | 0x8);
                     return v.toString(16);
             });
     };

     var hasCreated = false
     var _deviceId = &apos;&apos;
     if(document.cookie){
             document.cookie.split(&apos;;&apos;).forEach(function(i){
                     if(i.indexOf(&apos;deviceId&apos;)&gt;-1){
                             hasCreated = true
                             _deviceId = i.split(&apos;=&apos;)[1]
                     }
             })
     }

     if(!_deviceId &amp;&amp; (sessionStorage.getItem(&apos;deviceId&apos;)||localStorage.getItem(&apos;deviceId&apos;))){
             hasCreated = true
             _deviceId = sessionStorage.getItem(&apos;deviceId&apos;)||localStorage.getItem(&apos;deviceId&apos;)
     }


     if(!hasCreated) {
             _deviceId =  getDeviceId()
             document.cookie = &apos;deviceId=&apos; + _deviceId
             sessionStorage.setItem(&apos;deviceId&apos;,_deviceId)
             localStorage.setItem(&apos;deviceId&apos;,_deviceId)
     }

     //å›è°ƒå‡½æ•°
     function receiveMessageFromIndex ( event ) {
             console.log( &apos;receiveMessageFromIndex&apos;, event )
             parent.postMessage( {deviceId: _deviceId}, &apos;*&apos;);
     }
     //ç›‘å¬messageäº‹ä»¶
     window.addEventListener(&quot;message&quot;, receiveMessageFromIndex, false);

 &lt;/script&gt;
</code></pre><h3 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h3><p><a href="http://cxh.me/2014/11/25/flash-shared-cookie/" target="_blank" rel="external">è·¨æµè§ˆå™¨cookie</a><br><a href="http://www.freebuf.com/articles/web/139984.html" target="_blank" rel="external">è·¨æµè§ˆå™¨æŒ‡çº¹è¯†åˆ«</a><br><a href="https://paper.seebug.org/229/" target="_blank" rel="external">æµè§ˆå™¨æŒ‡çº¹è¿½è¸ª</a><br><a href="https://rockjins.js.org/2017/05/05/2017-05-05-iframe-cross-domain-Communication" target="_blank" rel="external">ä½¿ç”¨postMessageè§£å†³iframeè·¨åŸŸé€šä¿¡é—®é¢˜</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage" target="_blank" rel="external">window.postMessage</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2018/02/26/cookie-set/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/02/26/cookie-set/" itemprop="url">
                  è·¨åŸŸé—®é¢˜å¯¼è‡´è®¾ç½® cookie ä¸ç”Ÿæ•ˆçš„é—®é¢˜
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-26T16:18:09+08:00">
                2018-02-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/02/26/cookie-set/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/02/26/cookie-set/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æˆ‘ä»¬çœ‹ä¸‹è·¨åŸŸä¸ç”Ÿæ•ˆçš„é—®é¢˜ï¼Œé¦–å…ˆæŠ›å‡ºä¸¤ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<ol>
<li>æˆ‘ä»¬å¦‚ä½•è®¾ç½® cookie ï¼Ÿ</li>
<li>åˆå¦‚ä½•ç¡®å®š cookie è®¾ç½®æ˜¯å¦ç”Ÿæ•ˆäº† ï¼Ÿ</li>
</ol>
</blockquote>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£,æ–°å»ºä¸€ä¸ª test.js æ–‡ä»¶ï¼Œå°†å¦‚ä¸‹ä»£ç å¤åˆ¶è¿›å»ï¼Œé€šè¿‡ <code>node test.js</code> å¯åŠ¨æœåŠ¡ï¼Œåœ¨æœ¬åœ°å°±å¯ä»¥é€šè¿‡ <code>http://localhost:3000/rest/collect/event/h5/v1/</code> æ¥è®¿é—®äº†æˆ‘ä»¬åˆ›å»ºçš„æ¥å£äº†ï¼ˆnode ç¯å¢ƒå®‰è£…çš„æ•™ç¨‹ç½‘ä¸Šæœ‰å¾ˆå¤šè¯¦ç»†çš„æ•™ç¨‹ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ï¼‰</p>
<pre>
var express = require('express');
var app = express();
var URL = require('url')
var path = require('path');


app.post('/rest/collect/event/h5/v1/', function(req, res) {
        res.cookie('token','11111112222222224444444444')
        res.cookie('httpOnly-token','11111112222222224444444444',{ httpOnly: true })

        function User() {
                this.name;
                this.city;
                this.age;
        }

        var user = new User();

        if(params.id == '1') {

                user.name = "ligh";
                user.age = "1";
                user.city = "åŒ—äº¬å¸‚";

        }else{
                user.name = "SPTING";
                user.age = "1";
                user.city = "æ­å·å¸‚";
        }

        var response = {status:1,data:user};
        res.send(JSON.stringify(response));
});

app.listen(3000);
console.log('Listening on port 3000...');
</pre>

<p>è®¿é—®æ•ˆæœå¦‚ä¸‹</p>
<p><img src="/images/cookie/3.jpeg" alt="æ¥å£è®¿é—®æ•ˆæœå¦‚ä¸‹"></p>
<p>åœ¨å‰ç«¯ä»£ç ä¸­è®¿é—®æˆ‘ä»¬çš„æ¥å£<br><img src="/images/cookie/4.jpeg" alt="cookieè®¾ç½®"><br><img src="/images/cookie/5.jpeg" alt="cookieæŸ¥çœ‹"><br>åœ¨æµè§ˆå™¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚çš„ Resopnse Headers é‡Œï¼Œæœ‰ä¸¤ä¸ª <code>set-cookie</code>å¤´éƒ¨ï¼ŒåŒºåˆ«åœ¨äºä¸€ä¸ªå¸¦æœ‰ <code>HttpOnly</code>çš„æ ‡è¯†ï¼Œæˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨çš„è°ƒè¯•çª—å£<code>Application</code>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªæ•°å€¼éƒ½è¢«è®¾ç½®åˆ°æµè§ˆå™¨é‡Œäº†ï¼Œ<code>httpOnly</code>çš„å€¼åœ¨æµè§ˆå™¨è°ƒè¯•çª—å£çš„<code>http</code>ä¸€æ ï¼Œæ‰“äº†ä¸ªå°å‹¾ï¼Œè¯´æ˜è¿™ä¸ªå˜é‡æ˜¯åªèƒ½é€šè¿‡ http è¯·æ±‚æ¥è·å–åˆ°è¿™ä¸ªcookie ï¼Œå‰ç«¯æ— æ³•é€šè¿‡ js çš„ <code>document.cookie</code>æ¥è·å–åˆ°<br><img src="/images/cookie/7.jpeg" alt="å°±æ˜¯æ— æ³•æ“ä½œçš„cookie"><br>è®²åˆ°è¿™å—å†…å®¹ï¼Œæˆ‘ä»¬é¡ºä¾¿è®²ä¸‹ cookie è®¾ç½®çš„å…¶ä»–å‚æ•°çš„ä½œç”¨</p>
<p><img src="/images/cookie/6.jpeg" alt="å…¶ä»–å‚æ•°"><br>cookie å’ŒåŸŸåç›¸å…³çš„å“Ÿï¼Œ<code>Domain</code> å˜é‡è¡¨ç¤º cookie ç”Ÿæ•ˆçš„åŸŸåï¼Œ<code>expries</code>å’Œ<code>max-age</code>è¡¨ç¤º cookie çš„æœ‰æ•ˆæ—¶é—´</p>
<h4 id="é—®é¢˜æè¿°åŠè§£å†³"><a href="#é—®é¢˜æè¿°åŠè§£å†³" class="headerlink" title="é—®é¢˜æè¿°åŠè§£å†³"></a>é—®é¢˜æè¿°åŠè§£å†³</h4><p>åœ¨å¼€å‘é˜¶æ®µæˆ‘è‡ªå·±ç”¨node ç®€å•çš„å†™äº†ä¸€ä¸ªæ¥å£ï¼Œä¾¿äºè”è°ƒå‰ç«¯ä¼ å‚é—®é¢˜ï¼Œå¸Œæœ›é€šè¿‡ http çš„set-cookie å­˜å‚¨å˜é‡ï¼Œ ä½†æ˜¯å´å§‹ç»ˆæ²¡æœ‰æŠŠ cookie æˆåŠŸè®¾ç½®åˆ°æµè§ˆå™¨é‡Œï¼Œç»è¿‡æ’æŸ¥å‘ç°æ˜¯è·¨åŸŸå¯¼è‡´çš„ cookie è®¾ç½®ä¸ç”Ÿæ•ˆ<br><img src="/images/cookie/1.jpeg" alt="cookieè®¾ç½®"><br><img src="/images/cookie/2.jpeg" alt="cookieæŸ¥çœ‹"></p>
<p>ä¸ç”Ÿæ•ˆçš„åŸå› æ˜¯æˆ‘æœ¬åœ°é¡¹ç›®å¯åŠ¨åœ¨ <code>http://localhost:70</code>,ä½†æ˜¯è°ƒç”¨çš„æ¥å£åœ¨ <code>http://localhost:3000</code>ä¸Šï¼Œç«¯å£ä¸ä¸€æ ·ï¼Œå­˜åœ¨è·¨åŸŸçš„é—®é¢˜ï¼Œæ‰€ä»¥è™½ç„¶åœ¨ Response Header é‡Œçœ‹åˆ°äº†<code>set-cookie</code>çš„æ“ä½œï¼Œä½†æ˜¯åœ¨æµè§ˆå™¨çš„ <code>application</code>é‡Œçœ‹åˆ°ï¼Œå¹¶æ²¡æœ‰è¢«è®¾ç½®è¿›æ¥ï¼Œè§£å†³åŠæ³•ï¼Œé€šè¿‡nginx ä»£ç†ï¼ˆæœ€é•¿ç”¨çš„è·¨åŸŸè§£å†³åŠæ³•ï¼‰</p>
<h4 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h4><p>è·¨åŸŸçš„é—®é¢˜åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ¯”è¾ƒå¸¸è§ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°ï¼Œç®€å•æ¥è¯´<code>åªè¦è¯·æ±‚èµ„æºçš„åè®®ï¼ŒåŸŸåï¼Œç«¯å£ä¸ä¸€è‡´ï¼Œéƒ½ä¼šå¯¼è‡´è·¨åŸŸ</code>ï¼Œç½‘ä¸Šçš„è§£å†³æ–¹æ³•ä¹Ÿæ¯”è¾ƒå¤šï¼Œæ¯”è¾ƒæˆç†Ÿï¼Œæœ¬æ–‡ä¸åšæ‰©å±•ï¼Œé™„å¸¦å‡ ä¸ªé“¾æ¥ä¾›å¤§å®¶å‚è€ƒ</p>
<p><a href="http://harttle.land/2016/12/30/cors-preflight.html" target="_blank" rel="external">è·¨åŸŸä¸­çš„é¢„æ£€æµ‹è¯·æ±‚</a><br><a href="https://www.jianshu.com/p/13d53acc124f" target="_blank" rel="external">CORS è·¨åŸŸä¸­çš„ Cookie</a><br><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="external">è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£</a><br><a href="http://harttle.land/2015/10/10/cross-origin.html" target="_blank" rel="external">Webå¼€å‘ä¸­è·¨åŸŸçš„å‡ ç§è§£å†³æ–¹æ¡ˆ</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2017/05/18/nginx-basic/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/18/nginx-basic/" itemprop="url">
                  ä½ éœ€è¦çŸ¥é“çš„ nginx åŸºç¡€é…ç½®
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-18T14:23:31+08:00">
                2017-05-18
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/05/18/nginx-basic/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/18/nginx-basic/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="åˆæ¢nginx"><a href="#åˆæ¢nginx" class="headerlink" title="åˆæ¢nginx"></a>åˆæ¢nginx</h2><blockquote>
<p>ä»Šå¤©ç»™å¤§å®¶è®²ä¸‹nginxçš„åŸºç¡€é…ç½®,å¾ˆå¤šå°ä¼™ä¼´åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨åˆ° nginx ,ä½†æ˜¯ç¡®å¯¹ nginx çš„é…ç½®å…¶å®å¹¶ä¸äº†è§£,ä»Šå¤©æˆ‘ç»™å¤§å®¶è®²ä¸‹åŸºç¡€çš„é…ç½®é¡¹.nginx çš„åŠŸèƒ½å¾ˆå¤š,ä½†æ˜¯è¯´åˆ° nginx å¤§å®¶æœ€å…ˆæƒ³åˆ°çš„æ˜¯åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡.</p>
</blockquote>
<p>â€œè´Ÿè½½å‡è¡¡â€åœ¨å¼€å‘ç¯å¢ƒä½“ç°çš„ä¸å¤ªæ˜æ˜¾,ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ç”Ÿäº§ç¯å¢ƒçš„å®¢æˆ·ç«¯è¯·æ±‚å¾ˆå¤šçš„æ—¶å€™,åŠ¨æ€çš„å»åˆ†æ•£ç»™å„ä¸ªæœåŠ¡å™¨,ç¼“è§£æœåŠ¡å™¨å‹åŠ›,å…… åˆ†åˆ©ç”¨èµ„æº.è€Œè¯´åˆ° â€œåå‘ä»£ç†â€,ä½ çš„ç¬¬ä¸€ååº”åº”è¯¥æ˜¯â€æ­£å‘ä»£ç†â€,ç®€ç§°â€ä»£ç†â€,ä½ å¯ä»¥æŠŠä»£ç†æƒ³è±¡æˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä¸­ä»‹,ä»£ç†çš„ç§ç±»å¾ˆå¤š,æ¯”è¾ƒå¸¸è§çš„æ˜¯,å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯è¿›è¡Œè¯·æ±‚çš„æ—¶å€™,ä»£ç†ä¼šå¯¹è¯·æ±‚çš„å†…å®¹è¿›è¡Œä¸‹è½½ç¼“å­˜,ä»è€Œæé«˜å®¢æˆ·ç«¯çš„è¯·æ±‚é€Ÿåº¦,ä»£ç†è¿˜æœ‰å¤šé‡ä»£ç†,åŠ å¯†å¤„ç†ç­‰åŠŸèƒ½,â€åå‘ä»£ç†â€çš„ä½œç”¨å’Œæ­£é¡¹ä»£ç†çš„åŠŸèƒ½ç›¸è¾…ç›¸æˆ,åŸç†ä¹Ÿç±»ä¼¼,åå‘ä»£ç†å°†å­—ç¬¦ä¸²å’Œç›¸åº”çš„æœåŠ¡å™¨å’Œç«¯å£åŒ¹é…ä¸Š,ä»è€Œè·å–ç”¨æˆ·æƒ³è¦è·å–çš„å†…å®¹,é‚£ä¹ˆè¿™ä¸¤è€…çš„åŒºåˆ†æ˜¯ä»€ä¹ˆå‘¢,â€æ­£å‘ä»£ç†â€ä½œç”¨äºå®¢æˆ·ç«¯,â€åå‘ä»£ç†â€ä½œç”¨äºæœåŠ¡å™¨.</p>
<h2 id="ç”ŸåŠ¨çš„-nginx-åå‘ä»£ç†è§£é‡Š"><a href="#ç”ŸåŠ¨çš„-nginx-åå‘ä»£ç†è§£é‡Š" class="headerlink" title="ç”ŸåŠ¨çš„ nginx åå‘ä»£ç†è§£é‡Š"></a>ç”ŸåŠ¨çš„ nginx åå‘ä»£ç†è§£é‡Š</h2><p>ä¸ºäº†è®©å¤§å®¶èƒ½å¤Ÿæ›´åŠ æ·±åˆ»çš„ç†è§£ä»£ç†å’Œåå‘ä»£ç†çš„æ¨¡å¼,æˆ‘ä»¬å¼•ç”¨ä¸‹çŸ¥ä¹ä¸Š<a href="https://www.zhihu.com/question/24723688/answer/160252724" target="_blank" rel="external">è½¦å°èƒ–</a>çš„å›ç­”</p>
<blockquote>
<p>æœ‰äº†ç¬¬ä¸‰æ–¹è®¢é¤å¤–å–å¹³å°ï¼ˆä»£ç†ï¼‰ï¼Œè€ç‹æ‡’å¾—åŠ¨èº«å‰å¾€é¥­åº—ï¼Œè€ç‹æ‰“ä¸ªç”µè¯æˆ–ç”¨APPï¼Œå…ˆé€‰å¥½æŸä¸ªé¥­åº—ï¼Œå†ç‚¹å¥½èœï¼Œå¤–å–å°å“¥ä¼šé€ä¸Šé—¨æ¥ã€‚ç”±äºæŸä¸ªå“ç‰Œçš„é¥­åº—å£ç¢‘ç‰¹åˆ«å¥½ï¼Œé£Ÿå®¢ç»œç»ä¸ç»æ¶Œå…¥ï¼Œç¬¬ä¸‰æ–¹è®¢é¤ç”µè¯ä¹Ÿä¸ç»äºè€³ï¼Œä½†æ˜¯é™äºé¥­åº—æ¥å¾…èƒ½åŠ›æœ‰é™ï¼Œæ— æ³•æä¾›åŠæ—¶æœåŠ¡ï¼Œå¾ˆå¤šé£Ÿå®¢ç­‰å¾—ä¸è€çƒ¦äº†ï¼Œçº·çº·é“©ç¾½è€Œå½’ï¼Œé¥­åº—è€æ€»çœ‹ç€ç…®ç†Ÿçš„é¸­å­é£èµ°äº†ï¼Œå¿ƒç–¼ä¸å·²ã€‚ç—›å®šæ€ç—›ï¼Œè€æ€»åˆæˆç«‹äº†å‡ ä¸ªè¿é”é¥­åº—ï¼Œå½¢æˆä¸€ä¸ªé›†ç¾¤ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€æ ‡å‡†çš„èœå“æœåŠ¡ï¼Œç”µè¯è®¢é¤ç”µè¯400-xxx-7777ï¼Œå½“é£Ÿå®¢æ¶Œå…¥é¥­åº—æ€»å°ï¼Œæ€»å°å°†é£Ÿå®¢ç”¨å¤§å·´è¿åˆ°å„ä¸ªè¿é”åº—ï¼Œè¿™æ ·é£Ÿå®¢æ—¢ä¸éœ€è¦æ’é˜Ÿï¼Œå„è¿é”åº—éƒ½èƒ½é«˜é€Ÿè¿è½¬èµ·æ¥ï¼Œä¸€ä¸¾ä¸¤å¾—ï¼Œè€æ€»ä¹å¼€äº†èŠ±ï¼Œå¹¶ä¸ºæ­¤ç§è¿ä½œæ¨¡å¼èµ·åä¸ºâ€œåå‘ä»£ç†â€ï¼ˆReverse Proxy)ã€‚</p>
</blockquote>
<h2 id="nginx-åŸºç¡€é…ç½®"><a href="#nginx-åŸºç¡€é…ç½®" class="headerlink" title="nginx åŸºç¡€é…ç½®"></a>nginx åŸºç¡€é…ç½®</h2><p>å¥½äº†,äº†è§£äº† nginx çš„ä¸€äº›æ¦‚å¿µä¹‹å,æˆ‘ä»¬è¦å¼€å§‹åˆ‡å…¥ä»Šå¤©çš„ä¸»é¢˜,â€ngix çš„åŸºç¡€é…ç½®â€,å®‰è£…å¥½ nginx é…ç½®ä¹‹å,ä½ å¯¹ nginx çš„é…ç½®éƒ½å†™åœ¨ nginx.conf çš„æ–‡ä»¶é‡Œ,ä» nginx çš„é…ç½®æŒ‡ä»¤ä½œç”¨åŸŸæ¥è®²,æˆ‘ä»¬åˆ†ä¸º 5 ä¸ªä½œç”¨åŸŸå—,åˆ†åˆ«æ˜¯:</p>
<ul>
<li>å…¨å±€ä½œç”¨åŸŸå—</li>
<li>event ä½œç”¨åŸŸå—</li>
<li>http æŒ‡ä»¤ä½œç”¨åŸŸå—</li>
<li>server æŒ‡ä»¤ä½œç”¨åŸŸå—</li>
<li>location æŒ‡ä»¤ä½œç”¨åŸŸå—</li>
</ul>
<p><img src="/images/nginx/nd.jpeg" alt="nginxåŸºç¡€é…ç½®"></p>
<p>åœ¨ â€œå…¨å±€ä½œç”¨åŸŸå—â€ ä½œç”¨åŸŸå—ä¸­é…ç½®é€šç”¨çš„nginx é…ç½®,æ¯”å¦‚ nginx çš„ç”¨æˆ·ç»„ä¿¡æ¯,nginx çš„å¹¶å‘è¿›ç¨‹æ•°,æ—¥å¿—å­˜æ”¾ä½ç½®ç­‰,nginx çš„ç”¨æˆ·ç»„ä¿¡æ¯é…ç½®,ç”¨æ¥æ§åˆ¶å¯åŠ¨ nginx çš„æƒé™,æœåŠ¡å¹¶å‘ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯è¶Šå¤šè¶Šå¥½,ä½†æ˜¯å½“è¶…è¿‡ç¡¬ä»¶çš„æ‰¿å—èŒƒå›´æ—¶ä¼šé€‚å¾—å…¶å,æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬ä¼šé…ç½®ä¸º auto,è¿™æ · nginx ä¼šå»æ£€æŸ¥ç¡¬ä»¶çš„ä¿¡æ¯,å¯ç”¨é€‚å½“çš„è¿›ç¨‹æ•°é‡.</p>
<p>æ—¥å¿—å­˜æ”¾ä½ç½®ä½ ä¹Ÿå¯ä»¥é…ç½®åœ¨ http ä½œç”¨åŸŸå—,â€http ä½œç”¨åŸŸå—â€ä½œç”¨åŸŸé€šå¸¸æ˜¯é…ç½®è¯·æ±‚ç›¸å…³çš„å†…å®¹,æ¯”å¦‚æ•°æ®çš„ä¼ è¾“,å¯¹åŒä¸€ä¸ªæ¥å£çš„è¯·æ±‚æ¬¡æ•°ä¸Šçº¿,é…ç½®è¯·æ±‚çš„æ½®æ¹¿æ—¶é—´,è¿˜æœ‰æ˜¯å¦è¦å¯¹è¯·æ±‚è¿›è¡Œ gzip å‹ç¼©ç­‰.åœ¨ä¹‹å‰è®² webæ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™,æˆ‘è®°å¾—å’Œå¤§å®¶è®²è¿‡ gzip å‹ç¼©æ˜¯æé«˜ web æ€§èƒ½ä¼˜åŒ–çš„ä¸€ç§æ‰‹æ®µ,gzip èƒ½å¯¹ http è¯·æ±‚çš„è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“è¿›è¡Œå‹ç¼©,ä»è€Œè¾¾åˆ°ä¼˜åŒ–.ä½†æ˜¯ä¸æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½è¦å»å‹ç¼©,æœ‰äº›å‹ç¼©ä¹‹åçš„è¯·æ±‚ä½“ç§¯å¯èƒ½ä¼šæ›´å¤§,ä»è€Œè¾¾ä¸åˆ°å‹ç¼©çš„æ•ˆæœ.é‚£æ€ä¹ˆåŠå‘¢,åœ¨ nginx çš„é…ç½®ä¸­,ä½ å¯ä»¥è¿›è¡Œé…ç½®,è®¾ç½®å½“è¯·æ±‚å¤§äºä¸€å®šå€¼çš„æ—¶å€™,æ‰è§¦å‘ gzip å‹ç¼© gzip çš„å†…å®¹è¿™é‡Œå°±æ·±å…¥è®²è§£äº†,æƒ³è¦äº†è§£çš„åŒå­¦å¯ä»¥å»è°·æ­Œä¸‹,æˆ–åˆ™åœ¨ä¸‹æ¬¡ nginx çš„é«˜çº§é…ç½®çš„åˆ†äº«çš„æ—¶å€™æˆ‘ä»¬å†æ¥ç»†è®².</p>
<p>åœ¨ event æ¨¡å—æˆ‘ä»¬é€šå¸¸ä¼šé…ç½®è¿›ç¨‹çš„è¿æ¥æ•°é‡,å°±æ˜¯æ¯ä¸€ä¸ªworkerè¿›ç¨‹èƒ½å¹¶å‘å¤„ç†ï¼ˆå‘èµ·ï¼‰çš„æœ€å¤§è¿æ¥æ•°.åœ¨ â€œserver æŒ‡ä»¤ä½œç”¨åŸŸå—â€ æˆ‘ä»¬å¯ä»¥è¿›è¡Œç‹¬ç«‹é¡¹ç›®çš„ä»£ç†é…ç½®,</p>
<p>ä¸€ä¸ª http æŒ‡ä»¤ä¸­å¯ä»¥åŒ…å«å¤šä¸ª server ,æ¯ä¸€ä¸ª server ä½ å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªè™šæ‹Ÿæœº,éƒ¨ç½²è¿‡ç½‘ç«™çš„åŒå­¦åº”è¯¥çŸ¥é“,è‹¥æœä½ æ²¡æœ‰åšä»£ç†,ä½ çš„æœåŠ¡å™¨åªèƒ½éƒ¨ç½²ä¸€ä¸ªé¡¹ç›®çš„å†…å®¹,é»˜è®¤æ˜¯80ç«¯å£,ä½¿ç”¨ä»£ç†,èƒ½å°†å®¢æˆ·ç«¯çš„è¯·æ±‚æ ¹æ®ç«¯å£ä½œä¸ºåŒºåˆ†,å‘æ•£åˆ°ä¸åŒçš„é¡¹ç›®ä¸­.nginx è¿™ä¸€ç‚¹,èƒ½è®©æˆ‘ä»¬æ›´å¥½çš„åˆ©ç”¨æœåŠ¡å™¨èµ„æº</p>
<p>åœ¨server æŒ‡ä»¤ä¸­,æˆ‘ä»¬åŒæ ·å¯ä»¥é…ç½®å¤šä¸ª location æŒ‡ä»¤,location æŒ‡ä»¤èƒ½å°†æˆ‘ä»¬çš„å­—ç¬¦ä¸²è¯·æ±‚è§£æåˆ°å¯¹åº”çš„IPå’Œç«¯å£,ä»è€Œå»è·å–æ­£ç¡®çš„èµ„æº,location ä¹Ÿå¯ä»¥è¿›è¡Œç‰¹æ®Šé…ç½®,å®šåˆ¶ ç½‘ç«™çš„ 404 ,500 ç­‰é¡µé¢.</p>
<h2 id="nginx-çš„é¡¹ç›®é…ç½®ç¤ºä¾‹"><a href="#nginx-çš„é¡¹ç›®é…ç½®ç¤ºä¾‹" class="headerlink" title="nginx çš„é¡¹ç›®é…ç½®ç¤ºä¾‹"></a>nginx çš„é¡¹ç›®é…ç½®ç¤ºä¾‹</h2><p><img src="/images/nginx/l1.jpeg" alt="nginxä½œç”¨åŸŸ"><br><img src="/images/nginx/l2.jpeg" alt="nginxä½œç”¨åŸŸ"><br>æˆ‘ä»¬ç®€å•çš„çœ‹ä¸‹,æˆ‘ç›®å‰ä½¿ç”¨åˆ°çš„ä¸¤ä¸ªé¡¹ç›®çš„ nginx é…ç½®,åœ¨fengdai_pc é¡¹ç›®ä¸­æˆ‘ä»¬é€šè¿‡ listen æ¥é…ç½®é¡¹ç›®ç›‘å¬ç«¯å£,é€šè¿‡ root æ¥é…ç½®å‰ç«¯é¡¹ç›®æ–‡ä»¶çš„åœ°å€,æˆ‘ä»¬è¿˜é€šè¿‡ location æ¥é…ç½®äº†å‡ ä¸ªæ¨¡å—ä»£ç†,account å’Œ funds ,å®šåˆ¶äº† 404 é¡µé¢,åœ¨ å¦ä¸€ä¸ª nginx é…ç½®é¡¹ç›®ä¸­æˆ‘ä»¬åšäº†https é…ç½®,é…ç½®äº†åŸŸå <code>baibatianpc.com</code>,å¹¶ä¸”æŒ‡å®šäº†è¯ä¹¦çš„ä½ç½®,è¿™æ ·é…ç½®å,æˆ‘ä»¬èƒ½é€šè¿‡ è®¿é—® <a href="https://baibatianpc.com/" target="_blank" rel="external">https://baibatianpc.com/</a> æ¥æŸ¥çœ‹æˆ‘ä»¬çš„é¡¹ç›®.è¿™é‡Œå¯¹äºå¦‚ä½•æ­å»º https ç¯å¢ƒå°±ä¸ç»†è®²äº†,ä¸åŒçš„å¼€å‘ç³»ç»Ÿè¯ä¹¦çš„è·å–å’Œé…ç½®æ–¹å¼ä¹Ÿä¸å¤ªä¸€æ ·,æƒ³è¦æ·±å…¥äº†è§£çš„åŒå­¦ç»§ç»­è°·æ­Œ.</p>
<h2 id="å¤ä¹ "><a href="#å¤ä¹ " class="headerlink" title="å¤ä¹ "></a>å¤ä¹ </h2><p>å¥½äº†,æˆ‘ä»¬ä»Šå¤©è®²äº†nginx çš„åŸºç¡€é…ç½®,æˆ‘ä»¬ç°åœ¨æ¥å¤ä¹ ä¸€ä¸‹,æˆ‘ä»¬ä»Šå¤©è®²çš„çŸ¥è¯†ç‚¹æœ‰å“ªäº›</p>
<ol>
<li>nginx å¸¸ç”¨çš„åŠŸèƒ½çš„æ¦‚å¿µ,è´Ÿè½½å‡è¡¡,åå‘ä»£ç†</li>
<li>nginx æŒ‡ä»¤é…ç½®çš„5ä¸ªä½œç”¨åŸŸç©ºé—´</li>
<li>nginx çš„æ¯ä¸ªé…ç½®ä½œç”¨åŸŸçš„åŸºç¡€é…ç½®é¡¹ç›®</li>
<li>ç®€å•çš„ä¸¤ä¸ªé¡¹ç›®é…ç½®ç¤ºä¾‹</li>
</ol>
<p>ä½ éƒ½æŒæ¡äº†å—,è”ç³»æˆ‘è¿›è¡Œäº¤æµ,WeChat:646321933</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2017/01/09/webpack/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/09/webpack/" itemprop="url">
                  ä½ éœ€è¦çŸ¥é“çš„ webpack é…ç½®
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-09T21:27:52+08:00">
                2017-01-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/09/webpack/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/09/webpack/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å¥½ä¹…æ²¡æœ‰å†™æ–‡ç« ï¼Œæœ€è¿‘åœ¨åšé¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·çš„è¿ç§»ï¼ŒèŠ±äº†ä¸€ç‚¹æ—¶é—´å»ç ”ç©¶ <code>webpack</code> ï¼Œ<code>webpack</code> çš„å…¥é—¨å…¶å®ç®€å•ï¼Œä½†æ˜¯ç°æœ‰çš„èµ„æ–™æ¯”è¾ƒé›¶ç¢ï¼ŒæŒ‰ç…§æˆ‘çš„å­¦ä¹ è·¯å¾„æ•´ç†äº†ä¸‹ï¼Œå¸Œæœ›å¯¹å¤§å®¶èƒ½æœ‰æ‰€å¸®åŠ©ã€‚</p>
<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘å°†ä»3ä¸ªéƒ¨åˆ†æ¥ç»™å¤§å®¶ä»‹ç»<code>webpack</code>,åˆ†åˆ«æ˜¯ webpack çš„åŸºç¡€é…ç½®ï¼Œå“ªäº›å¸¸ç”¨çš„åŠ è½½å™¨ï¼Œæˆ‘åœ¨é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·æ”¹é€ çš„è¿‡ç¨‹ä¸­é›¨å¤§äº†é‚£äº›é—®é¢˜</p>
</blockquote>
<h3 id="webpack-åŸºç¡€é…ç½®"><a href="#webpack-åŸºç¡€é…ç½®" class="headerlink" title="webpack åŸºç¡€é…ç½®"></a>webpack åŸºç¡€é…ç½®</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç†è§£å››ä¸ªé‡è¦çš„æ¦‚å¿µ</p>
<ol>
<li>å…¥å£ï¼ˆä½ éœ€è¦æ‰“åŒ…çš„æ–‡ä»¶å£°æ˜ï¼‰ï¼Œä½ çš„é¡¹ç›®éœ€è¦ä»€ä¹ˆä¾èµ–æ²¡åœ¨è¿™é‡Œè¿›è¡Œå£°æ˜ï¼Œrequire ä½ éœ€è¦çš„ä¾èµ–ï¼Œwebpack ä¼šç›´æ¥å’Œé—´æ¥çš„æ‰¾åˆ°ä¾èµ–æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼Œå¯ä¼ å­—ç¬¦ä¸²ï¼Œæ•°ç»„ï¼Œå¯¹è±¡<pre>
     // é…ç½®äº†3ä¸ªå…¥å£æ–‡ä»¶
     entry: [
             './config/dependencies.js',
             './config/index.js',
             './config/cssImport.js'
     ]
</pre></li>
<li>å‡ºå£ï¼ˆä½ æ‰“åŒ…èµ„æºååˆ°å“ªä¸ªç›®å½•å“ªä¸ªæ–‡ä»¶ï¼‰ï¼Œå£°æ˜ä¾èµ–æ‰“åŒ…åçš„æ–‡ä»¶è¾“å‡ºçš„ç›®å½•åŠå‘½åæ–¹å¼ï¼Œå¯ä¼ å­—ç¬¦ä¸²ï¼Œæ•°ç»„ï¼Œå¯¹è±¡<pre>
     //å£°æ˜äº†ä¾èµ–å‹ç¼©æ‰“åŒ…ä¹‹åä¼šè¢«æ·»åŠ åˆ° build ç›®å½•çš„ bundle.js æ–‡ä»¶é‡Œ
     output: {
             path: path.join(__dirname, '../build'),
             filename: 'bundle.js',
     },
</pre></li>
<li>loaderï¼ˆæ¨¡å—åŠ è½½å™¨ï¼‰èƒ½å°†å„ç§èµ„æºçš„ä¾èµ–æ¨¡å—æ‰“åŒ…æˆwebpack èƒ½å¤Ÿç†è§£çš„ js æ¨¡å—ï¼Œä»è€Œè¿›è¡Œä½ éœ€è¦çš„æ“ä½œï¼Œå¦‚ css é¢„ç¼–è¯‘ï¼Œå›¾ç‰‡å‹ç¼©ï¼Œè·¯å¾„è½¬æ¢ç­‰<pre>
     loaders: [
                 {
                     test: /\.js?$/,
                     exclude: /(node_modules|bower_components)/,
                     loader: 'babel-loader', // 'babel-loader' is also a legal name to reference
                     query: {
                             presets: ['es2015']
                     }
             }]
</pre></li>
<li><p>æ’ä»¶ï¼ˆæ’ä»¶ç”¨äºæ‰©å±• loader çš„èƒ½åŠ›ï¼‰ä½ å¯ä»¥ç”¨æ’ä»¶è¿›è¡Œå®šä¹‰ç¯å¢ƒå˜é‡å¯¹ä»£ç è¿›è¡Œæ‰“åŒ…å‹ç¼©ã€‚</p>
<pre>
     //å£°æ˜
     const ImageminPlugin = require("imagemin-webpack-plugin").default
     const CopyWebpackPlugin = require('copy-webpack-plugin')

     //ä»imgSrc ç›®å½•å‹ç¼©å›¾ç‰‡ï¼Œå‹ç¼©å®Œæ‹·è´åˆ° build/img ç›®å½•ä¸‹
     plugins: [
             new CopyWebpackPlugin([
                     { from: 'imgSrc' ,to:'img'}
             ]),
             new ImageminPlugin(
                     { test: /\.(jpe?g|png|gif|svg)$/i }
                     )
     ]
</pre>

</li>
</ol>
<p><a href="https://doc.webpack-china.org/concepts/" target="_blank" rel="external">æ¦‚å¿µæ–¹é¢å¦‚æœæœ‰ä¸æ¸…æ™°çš„å¯ä»¥çœ‹ä¸‹ webpack çš„ä¸­æ–‡æ–‡æ¡£</a></p>
<h3 id="webpack-çš„å¸¸ç”¨åŠ è½½å™¨"><a href="#webpack-çš„å¸¸ç”¨åŠ è½½å™¨" class="headerlink" title="webpack çš„å¸¸ç”¨åŠ è½½å™¨"></a>webpack çš„å¸¸ç”¨åŠ è½½å™¨</h3><p>loader ç”¨äºå¸¸ç”¨çš„æºä»£ç è¿›è¡Œè£…æ¢ï¼Œå¸¸ç”¨çš„æœ‰jsç¼–è¯‘ï¼Œcss é¢„ç¼–è¯‘ï¼Œå›¾ç‰‡å‹ç¼©ç­‰ï¼Œè¿™äº›éƒ½æ˜¯é¡¹ç›®ä¸­æ¯”è¾ƒå¸¸è§çš„ï¼Œå¤§å®¶å¹³æ—¶ä¸éœ€è¦è®°å¿†ï¼Œåªè¦èƒ½å¤§æ¦‚çŸ¥é“æœ‰è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼Œéœ€è¦ç”¨åˆ°çš„æ—¶å€™å»æŸ¥é˜…å°±è¡Œï¼Œ<a href="https://doc.webpack-china.org/loaders/" target="_blank" rel="external">loader å®˜æ–¹æ”¶å½•æ–‡æ¡£</a></p>
<h3 id="åœ¨é¡¹ç›®è¿ç§»ä¸­é‡åˆ°çš„é—®é¢˜"><a href="#åœ¨é¡¹ç›®è¿ç§»ä¸­é‡åˆ°çš„é—®é¢˜" class="headerlink" title="åœ¨é¡¹ç›®è¿ç§»ä¸­é‡åˆ°çš„é—®é¢˜"></a>åœ¨é¡¹ç›®è¿ç§»ä¸­é‡åˆ°çš„é—®é¢˜</h3><p>ç”±äºå„ç§å†å²åŸå› ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ç»“æ„å‡Œä¹±ï¼Œé¡¹ç›®ä¾èµ–å¤šï¼Œç»“æ„å¤æ‚ï¼Œä½¿ç”¨ç€ <code>angular + gulp</code> è¿›è¡Œå¼€å‘ï¼Œè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·è¿˜å¤„äºåˆ€è€•ç«ç§çš„å¹´ä»£ï¼Œå‘ç‰ˆæœ¬çš„æ—¶å€™é€šè¿‡å‰ç«¯ç»™åŒ…ï¼Œä¸å®‰å…¨ï¼Œä¸è§„èŒƒã€‚æ–°çš„ä¸€å¹´æˆ‘ä»¬å°è¯•å»æ”¹å˜è¿™ç§ç°çŠ¶ï¼Œæ´—å®Œé€šè¿‡è¿ç»´ç›´æ¥æ‹‰å»å‰ç«¯ä»£ç ï¼Œè¿™æ ·èƒ½å……åˆ†çš„ä¿è¯å‰ç«¯ä»£ç çš„ä¸€è‡´æ€§ã€‚</p>
<h4 id="ç›®å‰çš„é¡¹ç›®ç»“æ„çš„æ§è¯‰"><a href="#ç›®å‰çš„é¡¹ç›®ç»“æ„çš„æ§è¯‰" class="headerlink" title="ç›®å‰çš„é¡¹ç›®ç»“æ„çš„æ§è¯‰"></a>ç›®å‰çš„é¡¹ç›®ç»“æ„çš„æ§è¯‰</h4><ol>
<li>é¡¹ç›®æ‰€æœ‰é—®æ–‡ä»¶å¤„äºä¸€ä¸ªå¹³çº§çŠ¶æ€</li>
<li>æœ‰3ä¸ªä¾èµ–åŒ…æ–‡ä»¶å¤¹åˆ†åˆ«æ˜¯ framworkï¼Œlibï¼Œnode_modules(å„ç§å†å²é—ç•™é—®é¢˜)</li>
<li>æºå›¾ç‰‡imgSrcå’Œå‹ç¼©åçš„imgåœ¨åŒä¸€ä¸ªç›®å½•</li>
<li>äººå·¥æ‰‹åŠ¨æ‰“åŒ…çš„æ—¶å€™è¦å¾ˆå°å¿ƒçš„åˆ é™¤ä¸å¿…è¦çš„æ–‡ä»¶</li>
</ol>
<h4 id="ç°æœ‰çš„æ”¹è¿›æ–¹æ¡ˆ"><a href="#ç°æœ‰çš„æ”¹è¿›æ–¹æ¡ˆ" class="headerlink" title="ç°æœ‰çš„æ”¹è¿›æ–¹æ¡ˆ"></a>ç°æœ‰çš„æ”¹è¿›æ–¹æ¡ˆ</h4><ol>
<li>åˆ›å»º build æ–‡ä»¶å¤¹ï¼Œnginx ä»£ç† åˆ° build ç›®å½•</li>
<li>config ä¸­é…ç½® webpack æ„å»ºæ‰“åŒ…ä»»åŠ¡ï¼Œä»¥åŠå„ç§ä¾èµ–çš„å…¥å£æ–‡ä»¶</li>
<li>ib &amp;&amp; framwork ç§»åˆ° build æ–‡ä»¶</li>
<li>less ä¸­å¯¹å›¾ç‰‡çš„å¼•ç”¨è·¯å¾„éœ€è¦å˜åŠ¨ï¼Œå› ä¸ºimg çš„è·¯å¾„å˜åŠ¨äº†ï¼Œtpls ä¹Ÿå˜åŠ¨äº†ï¼Œæ‰€ä»¥åœ¨è§†å›¾ä¸­ç›´æ¥å¼•ç”¨çš„ä¸éœ€è¦å˜åŒ–</li>
<li>gulpfile ä¸­çš„ js å‹ç¼©ï¼Œless ç¼–è¯‘ï¼Œå›¾ç‰‡å‹ç¼©å†…å®¹è¿ç§»åˆ° webpack ä»»åŠ¡ä¸­</li>
<li>é€šè¿‡ npm run dev è¿›è¡Œç¼–è¯‘æ„å»º</li>
<li>å›¾ç‰‡å‹ç¼©</li>
<li>ä¾èµ–åŠæ¨¡å—æ–‡ä»¶å˜åŒ–æ—¶å®æ—¶æ„å»ºé¡¹ç›®</li>
<li>å¼ƒç”¨ gulpfile ç¼–è¯‘æ„å»º</li>
</ol>
<p>åˆ›å»º <code>build</code> æ–‡ä»¶å¤¹ï¼Œ<code>nginx</code> ä»£ç† åˆ° <code>build</code></p>
<blockquote>
<p>ç›®å½•ï¼Œé…ç½®ç”Ÿäº§ç¯å¢ƒä¾èµ–ç›®å½•ï¼Œè¿ç»´å¯ä»¥ç›´æ¥å°†ä»£ç†æŒ‡å‘è¯¥ç›®å½•ï¼Œä¸éœ€è¦äººå·¥æ‰‹åŠ¨å‰”é™¤å¤šä½™çš„ç›®å½•</p>
</blockquote>
<p>config ä¸­é…ç½® webpack æ„å»ºæ‰“åŒ…ä»»åŠ¡ï¼Œä»¥åŠå„ç§ä¾èµ–çš„å…¥å£æ–‡ä»¶</p>
<blockquote>
<p>å»ºç«‹config ç›®å½•ï¼Œå­˜æ”¾ webpack é…ç½®æ–‡ä»¶ç›®å½•ï¼ŒåŠå„ç§ä¾èµ–å£°æ˜ç›®å½•ï¼Œæˆ‘ä»¬ä¸€å…±å£°æ˜äº†3ä¸ªä¾èµ–å…¥å£æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯npm ç®¡ç†çš„ç”Ÿäº§ä¾èµ–æ–‡ä»¶ï¼Œcss æ–‡ä»¶ï¼Œé¡¹ç›®é€»è¾‘jsæ–‡ä»¶ã€‚css å’Œ ç”Ÿäº§ä¾èµ–çš„å†…å®¹æ¯”è¾ƒçƒ§ï¼Œæˆ‘ä»¬æ‰‹åŠ¨ require ä¸€ä¸‹ï¼Œä½†æ˜¯æˆ‘ä»¬é¡¹ç›®æ˜¯å·²ç»ç»è¿‡è¿‘ä¸¤å¹´çš„è¿­ä»£å¼€å‘ï¼Œé€»è¾‘ä»£ç  js æ–‡ä»¶ç¹å¤šï¼Œç›®å½•ç»“æ„è´Ÿè´£ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªç®€å•çš„ node è„šæœ¬ï¼Œé€’å½’æŸ¥è¯¢é¡¹ç›®ç›®å½•ç»“æ„ï¼ŒåŠ¨æ€ require å†™å…¥åˆ°æˆ‘ä»¬çš„jså…¥å£æ–‡ä»¶ä¸­ï¼Œnode è„šæœ¬ å¦‚ä¸‹</p>
</blockquote>
<pre>
        var files = fs.readdirSync('js')
        var jsPath = 'js'

        fs.unlink('config/index.js')

        var getFileName = function (files,dirPath) {

        files.forEach(function (filename) {
                var fullname = path.join(dirPath,filename)
                var stats = fs.statSync(fullname)

                if (stats.isDirectory()){
                        var subFiles = fs.readdirSync(fullname)
                        getFileName(subFiles,fullname)
                } else {
                        let file = './../'+dirPath+'/'+filename
                        fs.writeFile('./config/index.js', 'require (\"'+file +'\")\n', {
                                flag: 'a'
                        }, function(err){
                                 if(err) throw err
                        })
                }
        })
}

getFileName(files,jsPath)
</pre>

<p>é…ç½®æˆ‘ä»¬çš„å…¥å£å’Œè¾“å…¥</p>
<pre>
        entry: [
                './config/dependencies.js',
                './config/index.js',
                './config/cssImport.js'
        ],
        output: {
                path: path.join(__dirname, '../build'),
                filename: '[name].js',
        },
</pre>

<p>ç„¶åæ˜¯å¯¹æˆ‘ä»¬çš„gulp task è¿›è¡Œè¿ç§»ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® js è¯­æ³•ç¼–è¯‘ï¼Œcss é¢„å¤„ç†ï¼Œå›¾ç‰‡å‹ç¼©çš„åŠŸèƒ½ã€‚js ç¼–è¯‘åªéœ€è¦ä½¿ç”¨ <code>babel-loader</code> ,é€šè¿‡ <code>npm install babel-loader</code> å®‰è£…åŠ è½½å™¨ï¼ŒæŒ‡å®šåŒ¹é…çš„æ–‡ä»¶åŠéœ€è¦å¿½ç•¥çš„æ–‡ä»¶ï¼ŒæŒ‡å®šè½¬åŒ–è¯­æ³•ï¼Œè®¾å®šè½¬ç è§„åˆ™ï¼Œå°±é…ç½®æˆåŠŸäº†</p>
<pre>
        {
            test: /\.js?$/,
            exclude: /(node_modules|bower_components)/,
            loader: 'babel-loader', // 'babel-loader' is also a legal name to reference
            query: {
                presets: ['es2015']
            }
        }
</pre>

<p>css é¢„ç¼–è¯‘ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† less åšä¸º css å¼€å‘å·¥å…·ï¼Œç¼–è¯‘çš„æ—¶å€™éœ€è¦ç”¨åˆ°çš„ loader æ¯”è¾ƒå¤šï¼Œé€šè¿‡<code>less-loader</code>,<code>css-loader</code>,<code>style-loader</code>çš„é“¾å¼è°ƒç”¨ï¼Œå°†æ ·å¼ä½œç”¨äºDOM</p>
<pre>
        rules: [{
            test: /\.less$/,
            use: [{
                loader: "style-loader" // creates style nodes from JS strings
            }, {
                loader: "css-loader" // translates CSS into CommonJS
            }, {
                loader: "less-loader" // compiles Less to CSS
            }]
        }]
</pre>

<p>æˆ–åˆ™</p>
<pre>
loaders: [
            {
                test: /\.less$/,
                use: ['style-loader',
                    {
                        loader: 'css-loader',
                        options: {
                            //æ”¯æŒ@importantå¼•å…¥css
                            importLoaders: 1
                        }
                    },
                    {
                        loader: 'postcss-loader',
                        options: {
                            plugins: function() {
                                return [
                                //ä¸€å®šè¦å†™åœ¨require("autoprefixer")å‰é¢ï¼Œå¦åˆ™require("autoprefixer")æ— æ•ˆ
                                require('postcss-import')(),
                                require("autoprefixer")({
                                "browsers": ["Android >= 4.1", "iOS >= 7.0", "ie >= 8"]})]
                            }
                        }
                    },
                    'less-loader']
                }]
</pre>

<p>å›¾ç‰‡å‹ç¼©æˆ‘ä»¬é€‰æ‹©äº†ä¸¤ä¸ªæ’ä»¶åˆ†åˆ«æ˜¯<code>imagemin-webpack-plugin</code>å’Œ<code>copy-webpack-plugin</code>ï¼Œimagemin å®ç°å›¾ç‰‡å‹ç¼©ï¼Œcopy å®ç°å›¾ç‰‡èµ„æºæ‹·è´ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹</p>
<pre>
//æ’ä»¶å¼•ç”¨
const ImageminPlugin = require("imagemin-webpack-plugin").default
const CopyWebpackPlugin = require('copy-webpack-plugin')

//æ’ä»¶ä½¿ç”¨
plugins: [
                new CopyWebpackPlugin([
                        { from: 'imgSrc' ,to:'img'}
                ]),
                new ImageminPlugin(
                        { test: /\.(jpe?g|png|gif|svg)$/i }
                        )
        ]
</pre>

<p>äº†è§£å®Œç»†èŠ‚æˆ‘ä»¬çœ‹ä¸‹ä¸€ä¸ªæ•´ä½“çš„é…ç½®</p>
<pre>
/**
 * Created by bailinlin on 2018/1/4.
 */
const fs = require ("fs")
const path = require ("path")

const ImageminPlugin = require("imagemin-webpack-plugin").default
const CopyWebpackPlugin = require('copy-webpack-plugin')


var files = fs.readdirSync('js')
var jsPath = 'js'

fs.unlink('config/index.js')

var getFileName = function (files,dirPath) {

        files.forEach(function (filename) {
                var fullname = path.join(dirPath,filename)
                var stats = fs.statSync(fullname)

                if (stats.isDirectory()){
                        var subFiles = fs.readdirSync(fullname)
                        getFileName(subFiles,fullname)
                } else {
                        let file = './../'+dirPath+'/'+filename
                        fs.writeFile('./config/index.js', 'require (\"'+file +'\")\n', {
                                flag: 'a'
                        }, function(err){
                                 if(err) throw err
                        })
                }
        })
}

getFileName(files,jsPath)

module.exports = {
        entry: [
                './config/dependencies.js',
                './config/index.js',
                './config/cssImport.js'
        ],
        output: {
                path: path.join(__dirname, '../build'),
                filename: 'bundle.js',
        },
        module: {
                loaders: [
                    {
                        test: /\.js?$/,
                    exclude: /(node_modules|bower_components)/,
            loader: 'babel-loader', // 'babel-loader' is also a legal name to reference
            query: {
                presets: ['es2015']
            }
                },{
                test: /\.less$/,
                use: ['style-loader',
                {
                loader: 'css-loader',
                options: {
                 //æ”¯æŒ@importantå¼•å…¥css
                    importLoaders: 1
                }
                },{
                loader: 'postcss-loader',
                options: {
                plugins: function() {
                    return [
                    //ä¸€å®šè¦å†™åœ¨require("autoprefixer")å‰é¢ï¼Œå¦åˆ™require("autoprefixer")æ— æ•ˆ
                    require('postcss-import')(),
                    require("autoprefixer")({
                    "browsers": ["Android >= 4.1", "iOS >= 7.0", "ie >= 8"]})]
                     }
                     }
                    },
                    'less-loader']
                },{
                    test: /\.(jpe?g|png|gif|svg)$/i,
                    use: [
                    {
                        loader: 'url-loader',
                        options: {
                            limit: 8192
                        }
                    }]
                }]
        },
        plugins: [
                new CopyWebpackPlugin([
                        { from: 'imgSrc' ,to:'img'}
                ]),
                new ImageminPlugin(
                        { test: /\.(jpe?g|png|gif|svg)$/i }
                        )
        ]
}

</pre>

<h4 id="å®ç°çƒ­ç¼–è¯‘"><a href="#å®ç°çƒ­ç¼–è¯‘" class="headerlink" title="å®ç°çƒ­ç¼–è¯‘"></a>å®ç°çƒ­ç¼–è¯‘</h4><p>å®ç°å®Œé…ç½®ä¹‹åæˆ‘ä»¬è¦è€ƒè™‘å¦ä¸€ä¸ªé—®é¢˜äº†ï¼Œæˆ‘ä»¬å¸Œæœ›ä¿®æ”¹å®Œä¹‹åèƒ½å®æ—¶ç¼–è¯‘é¢„è§ˆï¼Œä¸ç”¨æ¯æ¬¡éƒ½æ‰‹åŠ¨çš„è·‘ä¸€è¾¹å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© webpack æä¾›çš„ node æœåŠ¡ï¼Œ<code>webpack-dev-server</code>,åœ¨é…ç½®æ–‡ä»¶é‡Œæ–°å¢ä¸€ä¸ª webpack.server.js çš„æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­ require éœ€è¦çš„ä¾èµ–ï¼Œ<code>webpack-dev-server</code> å¯ä»¥æŒ‡å®šæœåŠ¡å¯åŠ¨çš„ç›®å½•ï¼ŒåŠæœåŠ¡ç›‘å¬çš„ç«¯å£ï¼Œæˆ‘ä»¬çš„é…ç½®å¦‚ä¸‹</p>
<pre>
/**
 * Created by bailinlin on 2018/1/4.
 */
var path = require("path")
var webpack = require("webpack")
var webpackDevServer = require("webpack-dev-server")
var webpackCfg = require("./webpack.config.js")

var compiler = webpack(webpackCfg)

//init server
var app = new webpackDevServer(compiler, {
        contentBase        : path.join(__dirname, '../build'),
        noInfo             : true,
        hot                : true,
        historyApiFallback : true,
        stats              : { colors : true },
        //æ³¨æ„æ­¤å¤„publicPathå¿…å¡«
        publicPath: webpackCfg.output.publicPath
})

app.listen(9090, "localhost", function (err) {
        if (err) {
                console.log(err)
        }
})

console.log("listen at http://localhost:9090")
</pre>

<h4 id="å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡"><a href="#å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡" class="headerlink" title="å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡"></a>å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡</h4><p>é…ç½®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡ï¼Œä½ å¯ä»¥å†ä½ çš„æ§åˆ¶å°ä¸­ç›´æ¥è¾“å…¥ <code>node config/webpack.server.js</code> æ¥å¯åŠ¨æœåŠ¡ï¼Œ<code>webpack --config config/webpack.config.js</code> æ¥è¿›è¡Œç¼–è¯‘æ„å»ºï¼Œä¹Ÿå¯ä»¥åœ¨ package.json æ–‡ä»¶ä¸­é…ç½® script å¦‚</p>
<p><pre><br>â€œscriptsâ€: {<br>    â€œstartâ€:â€node config/webpack.server.jsâ€,<br>    â€œbuildâ€: â€œwebpack â€“config config/webpack.config.jsâ€<br>  },<br></pre><br>è¿™æ ·ä½ å°±å¯ä»¥é€šè¿‡ <code>npm start</code> å’Œ <code>npm run build</code>æ¥æ§åˆ¶ä½ çš„æœåŠ¡å¯åŠ¨å’Œé¡¹ç›®æ„å»º</p>
<p>å‚è€ƒæ–‡ç« åˆ—è¡¨</p>
<blockquote>
<p>å¦‚æœä½ è¿˜æƒ³æ›´æ·±å…¥ç†è§£ï¼Œä½ å¯ä»¥ç»§ç»­é˜…è¯»è¿™äº›æ‰©å±•æ–‡ç« <br><a href="https://doc.webpack-china.org/concepts/" target="_blank" rel="external">ç†è§£æ¦‚å¿µ</a><br><a href="https://doc.webpack-china.org/configuration/#-" target="_blank" rel="external">é…ç½®è®²è§£</a><br><a href="https://doc.webpack-china.org/loaders/" target="_blank" rel="external">å¸¸ä¼šç”¨åˆ°çš„loaders</a><br><a href="http://blog.csdn.net/lancewu0907/article/details/76513231" target="_blank" rel="external">webpackæ‰“åŒ…åŸç†</a><br><a href="https://www.zhihu.com/question/46661735" target="_blank" rel="external">webpackå…¨å±€å˜é‡</a><br><a href="https://github.com/webpack-contrib/css-loader/issues/74" target="_blank" rel="external">less å›¾ç‰‡è§£æé—®é¢˜</a><br><a href="https://juejin.im/entry/5767a975df0eea0062ffe193" target="_blank" rel="external">å…¶ä»–ä¼˜ç§€çš„é…ç½®æ–‡ç« </a><br><a href="https://github.com/kingvid-chan/webpack2-lessons/tree/master/lesson2" target="_blank" rel="external">ã€Šä½¿ç”¨webpack-dev-serverå®ç°çƒ­æ›´æ–°ã€‹</a><br><a href="https://github.com/Klathmon/imagemin-webpack-plugin" target="_blank" rel="external">imagemin-webpack-plugin</a><br><a href="https://github.com/webpack-contrib/copy-webpack-plugin" target="_blank" rel="external">copy-webpack-plugin</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2016/11/01/learn-wxapp/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/01/learn-wxapp/" itemprop="url">
                  ä½ éœ€è¦çŸ¥é“çš„å°ç¨‹åºå¼€å‘åŸºç¡€
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-01T20:38:15+08:00">
                2016-11-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/11/01/learn-wxapp/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/01/learn-wxapp/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å¾®ä¿¡å°ç¨‹åºå‡ºæ¥å·²æœ‰æ®µæ—¶é—´ï¼Œè™½è¿˜åœ¨å†…æµ‹é˜¶æ®µã€‚åˆ©ç”¨ç©ºé—²æ—¶é—´ï¼Œæˆ‘æŠŠèœ‚è´·å¾®ä¿¡é¡¹ç›®éƒ¨åˆ†è¿ç§»åˆ°å°ç¨‹åºä¸Šã€‚</p>
<p>##1.ç›®å½•ç»“æ„</p>
<p>   å°ç¨‹åºçš„ä¸»ä½“ç”±ä¸‰ä¸ªæ–‡ä»¶ç»„æˆï¼Œè¿™ä¸‰ä¸ªæ–‡ä»¶è¦æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œåˆ†åˆ«æ˜¯</p>
<ol>
<li>app.js é…ç½®å°ç¨‹åºçš„é€»è¾‘</li>
<li>app.json å…¬å…±è®¾ç½®</li>
<li><p>app.wxss å…¬å…±æ ·å¼</p>
<p>å°ç¨‹åºå¯ä»¥è‡ªå®šä¹‰ pageï¼Œä½†æ˜¯ page éœ€è¦åœ¨ app.json ä¸­åšå‡ºå£°æ˜ï¼Œä¸ç„¶IDEä¼šæŠ¥é”™ï¼Œæ‰¾ä¸åˆ°é¡µé¢ã€‚å°ç¨‹åºçš„é¡µé¢ç”±å››ä¸ªæ–‡ä»¶ç»„æˆï¼Œåˆ†åˆ«æ˜¯</p>
</li>
<li><p>.jsæ–‡ä»¶ é¡µé¢é€»è¾‘</p>
</li>
<li>.wxml è§†å›¾å±‚æ–‡ä»¶ï¼Œé¡µé¢ç»“æ„</li>
<li>.wxss æ ·å¼æ–‡ä»¶ï¼Œé¡µé¢æ ·å¼è¡¨</li>
<li>.json æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œé¡µé¢é…ç½®</li>
</ol>
<h2 id="2-å°ç¨‹åºé…ç½®"><a href="#2-å°ç¨‹åºé…ç½®" class="headerlink" title="2.å°ç¨‹åºé…ç½®"></a>2.å°ç¨‹åºé…ç½®</h2><p>app.json å†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ã€çª—å£è¡¨ç°ã€è®¾ç½®ç½‘ç»œè¶…æ—¶æ—¶é—´ã€è®¾ç½®å¤šå°‘ tab ã€‚</p>
<p>åœ¨ pages å¯¹è±¡é‡Œå®šä¹‰é¡µé¢è·¯å¾„ï¼Œpages æ¥å—ç”±å­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„ï¼Œpagesæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯å°ç¨‹åºçš„é¦–é¡µã€‚</p>
<ol>
<li>window ç”¨äºè®¾ç½®å°ç¨‹åºçš„çŠ¶æ€æ ã€å¯¼èˆªæ¡ã€æ ‡é¢˜ã€çª—å£èƒŒæ™¯è‰²ã€‚</li>
<li>tabBar é…ç½®é¡¹æŒ‡å®š tab æ çš„è¡¨ç°ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µé¢ã€‚</li>
<li>networkTimeout ç”¨æ¥è®¾ç½®å„ç§ç½‘ç»œè¯·æ±‚è¶…æ—¶æ—¶é—´</li>
<li>debug æ˜¯å¸ƒå°”ç±»å‹ï¼Œç”¨æ¥é…ç½®æ˜¯å¦åœ¨å¼€å‘è€…å·¥å…·ä¸­å¼€å¯ debug æ¨¡å¼</li>
</ol>
<h2 id="3-å°ç¨‹åºè§†å›¾"><a href="#3-å°ç¨‹åºè§†å›¾" class="headerlink" title="3.å°ç¨‹åºè§†å›¾"></a>3.å°ç¨‹åºè§†å›¾</h2><p>åœ¨å°ç¨‹åºä¸­ï¼Œä½ ä¸èƒ½ç»§ç»­ç”¨ html ä¸­çš„æ ‡ç­¾æ¥æ„é€ ä½ çš„é¡µé¢ï¼ŒMANA æ¡†æ¶æœ‰ç‰¹å®šçš„å®¹å™¨ç»„ä»¶ï¼Œviewï¼Œscroll-view  ä»¥åŠ swiperã€‚</p>
<ol>
<li>view æ˜¯è§†å›¾å®¹å™¨ï¼Œç±»ä¼¼äº html ä¸­çš„ div ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼Œç”¨ view åŒ…è£¹çš„å†…å®¹ï¼Œåœ¨è¶…å‡ºè®¾å¤‡çª—å£çš„æ—¶å€™ï¼Œå®ƒå®ç°çš„æ•ˆæœå¦‚ css æ ·å¼è®¾ç½®çš„ overflowï¼šhidden</li>
<li>å¦‚æœä½ éœ€è¦å®ç°ç±»ä¼¼é€šè®¯å½•æˆ–åˆ™èŠå¤©åˆ—è¡¨çš„æ»šåŠ¨æ•ˆæœï¼Œä½ éœ€è¦ä½¿ç”¨ scroll-view æ»šåŠ¨å®¹å™¨ç»„ä»¶ï¼Œå®ƒå®ç°çš„æ•ˆæœå¦‚ css æ ·å¼è®¾ç½®çš„ overflow:scroll ã€‚</li>
<li>swiper æ˜¯æ»‘å—è§†å›¾ç»„ä»¶ï¼Œå¦‚æœä½ è¦å®ç°ç±»ä¼¼è½®æ’­å›¾çš„æ•ˆæœçš„è¯ï¼Œä»–æ˜¯ä½ çš„ä¸äºŒä¹‹é€‰ï¼Œä½ èƒ½é€šè¿‡å±æ€§é…ç½®æ¥æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºåœ†ç‚¹ï¼Œæ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼Œåˆ‡æ¢æ—¶é—´ï¼Œä»¥åŠåˆ‡æ¢é—´éš”æ—¶é—´ç­‰ã€‚<br>å°ç¨‹åºçš„MANAä¹Ÿå®ç°äº†æ•°æ®çš„ç»‘å®šï¼Œå†™æ³•ç±»ä¼¼äº Angular å’Œ Vueï¼Œé€šè¿‡åŒæ‹¬å·çš„å½¢å¼ å¦‚ï¼š å³å¯ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ å†™åœ¨å®¹å™¨ï¼ˆä¸ºäº†ä¾¿äºæè¿°å’Œç†è§£ï¼Œä¸‹æ–‡ä¼šä»¥æ ‡ç­¾æ¥æè¿°ï¼‰äºä¹‹é—´çš„è¯ï¼Œä½ ç›´æ¥æŠŠå˜é‡å†™åœ¨åŒæ‹¬å·é‡Œå³å¯ï¼Œå¦‚ï¼š<view></view> ï¼Œä½†æ˜¯å¦‚æœä½ ç»™æ ‡ç­¾çš„å±æ€§ç»‘å®šå˜é‡ï¼Œä½ éœ€è¦å°†åŒæ‹¬å·æ”¾åœ¨åŒå¼•å·å†…ï¼Œå¦‚ï¼š<view wx:if="â€â€&gt;</view">,ç±»ä¼¼äºAngular å’Œ Vueï¼Œä½ ä¹Ÿèƒ½åœ¨åŒæ‹¬å·å†…è¿›è¡Œç®€å•çš„è¿ç®—ï¼Œå¦‚ï¼š<view hidden="â€{flag?true:false}â€"></view>ã€‚</view></li>
</ol>
<p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½å‘ç°äº†åœ¨ä»‹ç»æ•°æ®ç»‘å®šçš„æ—¶å€™æˆ‘ä»¬ç”¨äº†wx:if  çš„å±æ€§ï¼Œè¿™æ˜¯ MANA æä¾›çš„æ¡ä»¶æ¸²æŸ“ï¼Œé€šè¿‡åˆ¤æ–­ wx:if ä¼ å¸ƒå°”å€¼ï¼ˆéå¸ƒå°”ç±»å‹è¿›è¡Œéšå£«è½¬åŒ–ï¼‰æ¥æ§åˆ¶æ˜¯å¦æ¸²æŸ“æ ‡ç­¾ä¸­çš„å†…å®¹ã€‚åœ¨ MANA ä¸­è¿˜æœ‰ä¸€ä¸ªå±æ€§èƒ½æ§åˆ¶å†…å®¹çš„æ˜¾éšï¼Œä¸åŒçš„æ˜¯ï¼Œwx:if åªæœ‰åœ¨ä¸º true çš„æ—¶å€™æ‰å›å»æ¸²æŸ“æ ‡ç­¾ä¸­çš„å†…å®¹ï¼Œè€Œ hidden å§‹ç»ˆä¼šæ¸²æŸ“å†…å®¹ï¼Œåªæ˜¯æ ¹æ®æ¡ä»¶æ¥æ§åˆ¶å†…å®¹çš„æ˜¾ç¤ºä¸å¦ã€‚</p>
<p>æ­¤å¤–MANA ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†è¾ƒä¸ºå®ç”¨çš„åˆ—è¡¨æ¸²æŸ“ï¼Œwx:for æ¥å—ä¸€ä¸ªæ•°ç»„,åœ¨é¡µé¢ä¸­èƒ½æ ¹æ®æ•°ç»„ä¸­çš„å€¼æ¥æ¸²æŸ“é¡µé¢åˆ—è¡¨</p>
<p>é™¤äº†ä½¿ç”¨åˆ—è¡¨æ¸²æŸ“æ¥å¤ç”¨ä¸€å—è§†å›¾å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡æ¨¡ç‰ˆæ¥è¿›è¡Œå¤ç”¨ï¼Œä½ èƒ½åœ¨ template ä¸­å®šä¹‰ä¸€å—ä»£ç ç‰‡æ®µï¼Œç„¶ååœ¨ä¸åŒçš„é¡µé¢ä¸­å¼•ç”¨ï¼Œå¦‚ï¼š</p>
<pre><code>&lt;template name=&quot;odd&quot;&gt;
  &lt;view&gt; odd &lt;/view&gt;
&lt;/template&gt;
&lt;template name=&quot;even&quot;&gt;
  &lt;view&gt; even &lt;/view&gt;
&lt;/template&gt;

&lt;block wx:for=&quot;{{[1, 2, 3, 4, 5]}}&quot;&gt;
    &lt;template is=&quot;{{item % 2 == 0 ? 'even' : 'odd'}}&quot;/&gt;
&lt;/block&gt;
</code></pre><p>é™¤äº† template å¤–ï¼ŒMANA è¿˜æä¾›äº†å¦å¤–ä¸¤ç§æ–¹å¼æ¥è¿›è¡Œåº”ç”¨å’Œå¤ç”¨ï¼Œimport å’Œ include ï¼Œimport æœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œä»–åªä¼šå¼•ç”¨ç›®æ ‡æ–‡ä»¶ä¸­å®šä¹‰çš„æ¨¡ç‰ˆã€‚includeå¯ä»¥å°†ç›®æ ‡æ–‡ä»¶é™¤äº†<template>çš„æ•´ä¸ªä»£ç å¼•å…¥ï¼Œç›¸å½“äºæ˜¯æ‹·è´åˆ°includeä½ç½®ä¸Šã€‚</template></p>
<p>é™¤MANA åŒæ ·ä¹Ÿå®šä¹‰äº†å¸¸ç”¨çš„äº‹ä»¶åˆ†ç±»ï¼Œå¦‚</p>
<ol>
<li>touchstart æ‰‹æŒ‡è§¦æ‘¸åŠ¨ä½œå¼€å§‹</li>
<li>touchmove æ‰‹æŒ‡è§¦æ‘¸åç§»åŠ¨</li>
<li>touchcancel æ‰‹æŒ‡è§¦æ‘¸åŠ¨ä½œè¢«æ‰“æ–­ï¼Œå¦‚æ¥ç”µæé†’ï¼Œå¼¹çª—</li>
<li>touchend æ‰‹æŒ‡è§¦æ‘¸åŠ¨ä½œç»“æŸ</li>
<li>tap æ‰‹æŒ‡è§¦æ‘¸åé©¬ä¸Šç¦»å¼€</li>
<li>longtap æ‰‹æŒ‡è§¦æ‘¸åï¼Œè¶…è¿‡350mså†ç¦»å¼€<h2 id="4-ç»„ä»¶æ ·å¼"><a href="#4-ç»„ä»¶æ ·å¼" class="headerlink" title="4.ç»„ä»¶æ ·å¼"></a>4.ç»„ä»¶æ ·å¼</h2></li>
</ol>
<p>å®šä¹‰åœ¨ app.wxss ä¸­çš„æ ·å¼ä¸ºå…¨å±€æ ·å¼ï¼Œä½œç”¨äºæ¯ä¸€ä¸ªé¡µé¢ã€‚åœ¨ page çš„ wxss æ–‡ä»¶ä¸­å®šä¹‰çš„æ ·å¼ä¸ºå±€éƒ¨æ ·å¼ï¼Œåªä½œç”¨åœ¨å¯¹åº”çš„é¡µé¢ï¼Œå¹¶ä¼šè¦†ç›– app.wxss ä¸­ç›¸åŒçš„é€‰æ‹©å™¨ã€‚å¦‚æœä½ å†™è¿‡ css ï¼Œé‚£ä½ å°±èƒ½è½»æ¾é©¾é©­ wxss,wxss åœ¨é€‰æ‹©å™¨ä¸Šåšäº†é™åˆ¶ï¼Œç›®å‰æ”¯æŒçš„é€‰æ‹©å™¨æœ‰ï¼š</p>
<ol>
<li>.class å¦‚ï¼š.intro    é€‰æ‹©æ‰€æœ‰æ‹¥æœ‰ class=â€introâ€ çš„ç»„ä»¶</li>
<li><code>#id</code> å¦‚ï¼š<code>#firstname</code>    é€‰æ‹©æ‹¥æœ‰ id=â€firstnameâ€ çš„ç»„ä»¶</li>
<li>element  å¦‚ï¼š    view    é€‰æ‹©æ‰€æœ‰ view ç»„ä»¶</li>
<li>element, å¦‚ï¼š element    view checkbox    é€‰æ‹©æ‰€æœ‰æ–‡æ¡£çš„ view ç»„ä»¶å’Œæ‰€æœ‰çš„ checkbox ç»„ä»¶</li>
<li>::after     å¦‚ï¼šview::after    åœ¨ view ç»„ä»¶åè¾¹æ’å…¥å†…å®¹</li>
<li>::before     å¦‚ï¼šview::before    åœ¨ view ç»„ä»¶å‰è¾¹æ’å…¥å†…å®¹</li>
</ol>
<p>å¼€å‘è¿‡ç§»åŠ¨ç«¯çš„å‰ç«¯er éƒ½çŸ¥é“ï¼Œè‹¹æœæ‰‹æœºæœ‰ç‰©ç†åƒç´ å’Œé€»è¾‘åƒç´ çš„åŒºåˆ«ï¼Œæ¯”å¦‚è®¾å¤‡çš„åƒç´ æ˜¯350pxï¼Œè®¾è®¡ç¨¿çš„åƒç´ æ˜¯750pxï¼›ä¸€èˆ¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·å»åšåƒç´ è½¬åŒ–ï¼Œæˆ–åˆ™æ˜¯ä½¿ç”¨é¢„å¤„ç†å™¨å®šä¹‰åƒç´ è½¬åŒ–å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œåœ¨å°ç¨‹åºçš„å¼€å‘ä¸­ï¼Œå¤§å¯ä¸å¿…è¿™ä¹ˆéº»çƒ¦ï¼Œå°ç¨‹åºæä¾›äº†ä¸€ä¸ª rpx çš„å•ä½ï¼Œä½ å¯ä»¥ç›´æ¥å†™ä¸Šä½ åœ¨è®¾è®¡ç¨¿ä¸­æµ‹é‡çš„æ•°å€¼å³å¯ï¼Œå°ç¨‹åºå¼€å‘å·¥å…·åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨å¸®ä½ åšè½¬æ¢ã€‚</p>
<p>åœ¨ä¸‹æ¬¡å°ç¨‹åºåˆ†äº«ã€Šå°ç¨‹åºå¼€å‘è¸©å‘ï¼ˆäºŒï¼‰ã€‹çš„æ—¶å€™ï¼Œä¼šæ•™å¤§å®¶å¦‚ä½•ä¸åç«¯è¿›è¡Œæ•°æ®äº¤äº’ï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„å°ä¼™ä¼´è®¢é˜…åšå®¢ã€‚</p>
<p><img src="/img/bVEXHS" alt="èœ‚è´·å¾®ä¿¡ç«¯"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://bailinlin.github.com/2016/06/30/init-blog/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="bailinlin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/bbt.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ç™½éœ¸å¤©çš„åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ç™½éœ¸å¤©çš„åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/30/init-blog/" itemprop="url">
                  ä½¿ç”¨ hexo æ­å»ºä½ çš„ github.io åšå®¢ç½‘ç«™
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-30T20:37:03+08:00">
                2016-06-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/06/30/init-blog/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/30/init-blog/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä½œä¸ºå‰ç«¯er,æˆ‘ä»¬æ¯å¤©éƒ½è¦ä¿æŒå­¦ä¹ ,å‰é˜µå­æœ‰ä¸€ç‰‡æ–‡ç« å¾ˆç«<a href="https://zhuanlan.zhihu.com/p/22782487" target="_blank" rel="external">åœ¨ 2016 å¹´å­¦ JavaScript æ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„ä½“éªŒï¼Ÿ</a>,å‰ç«¯æŠ€æœ¯æ—¥æ–°æœˆå¼‚,æˆ‘ä»¬ä¸ä»…è¦ä¿æŒå­¦ä¹ ,è¿˜éœ€è¦æŒæ¡ä¸€ä¸ªå¥½çš„,é€‚åˆè‡ªå·±çš„å­¦ä¹ æ–¹å¼.åœ¨è¿™ä¸ªä¿¡æ¯è¿™ä¸ªå‘è¾¾çš„æ—¶ä»£,ä½ ä¸ç¼ºè¾“å…¥çš„æœºä¼š,å´å°‘çš„åè€Œæ˜¯æˆ‘ä»¬çš„è¾“å‡ºæœºä¼š.å¤§å¤šæ•°çš„å‰ç«¯æ²¡æœ‰å»è®°å½•è‡ªå·±çš„æ‰€å­¦,æ‰€ç”¨,å³ä½¿æœ‰è®°å½•,ä¹Ÿéƒ½æ˜¯åœ¨ä¸€äº›ç¬¬ä¸‰æ–¹çš„åšå®¢ç½‘ç«™, è¿™å°±ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªæƒ…å†µ.æŒç»­æ€§ä¸å¤Ÿ,å‘å¸ƒè¿‡çš„æ–‡ç« æ²¡æœ‰å»å›é¡¾,è¿™ä¸ªåšå®¢ç½‘ç«™å‘ä¸€ç¯‡,é‚£ä¸ªåšå®¢ç½‘ç«™å‘ä¸€ç¯‡,è€Œä¸”å¾ˆæ²¡å½’å±æ„Ÿ.</p>
<p>ç„¶è€Œ,github ä½œä¸ºæˆ‘ä»¬çš„ç¨‹åºå‘˜åœˆå­çš„åŒæ€§äº¤å‹ç¤¾åŒº,é¢è¯•å¿…çœ‹çš„å†…å®¹,æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸åœ¨ github ä¸Šæ­ä¸€ä¸ªè‡ªå·±çš„åšå®¢å‘¢,åœ¨ github ä¸Šä½ å¯ä»¥ç›´æ¥å»ºç«‹ä¸€ä¸ªä»“åº“,ç„¶ååœ¨ issue é‡Œå†™åšå®¢,æˆ‘ä¸ªäººæ¯”è¾ƒå»ºè®®çš„æ˜¯,æ­ä¸€ä¸ªå±äºä½ è‡ªå·±çš„ github pages,åœ¨ github pages ä¸Šè®°å½•ä½ çš„åšå®¢. é¦–å…ˆæ˜¯å¤–è§‚ä¸Šæ¯”è¾ƒå¥½çœ‹,è€Œä¸”ä½ å¯ä»¥ä¾ç…§ä½ çš„å¿ƒæƒ…æ”¹å˜ä½ çš„åšå®¢ä¸»é¢˜,å…¶æ¬¡,ä½ å¯ä»¥é€šè¿‡ä½ çš„ github ç”¨æˆ·åç‚¹ github.io çš„æ–¹å¼æ¥ç›´æ¥è®¿é—®ä½ çš„åšå®¢ç½‘ç«™,æ„Ÿè§‰æœ‰äº†ä¸€ä¸ªå±äºè‡ªå·±çš„ç½‘ç«™ä¸€æ ·,ä¸è¦é’±,è¿˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ»¡è¶³äº†ä½ çš„è™šè£å¿ƒ.</p>
<h2 id="å¿«é€Ÿæ­å»º"><a href="#å¿«é€Ÿæ­å»º" class="headerlink" title="å¿«é€Ÿæ­å»º"></a>å¿«é€Ÿæ­å»º</h2><p>å¦‚æœä½ æ˜¯æœ‰ä¸€å®šå¼€å‘ç»éªŒçš„å‰ç«¯,ä½ çš„ç”µè„‘ä¸€å®šå·²ç»å®‰è£…äº† git å’Œ node ,é‚£ä½ åœ¨æ­å»ºåšå®¢ä¹‹å‰ä½ åªè¦å…ˆå…¨å±€å®‰è£… hexo çš„å‘½ä»¤è¡Œå·¥å…·,å‘½ä»¤å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g hexo-cli</div></pre></td></tr></table></figure>
<p>ç„¶åä½ åœ¨ä½ çš„ç”µè„‘é‡Œæ–°å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹å‘½åå°±æŒ‰ç…§ userName.github.io çš„æ–¹å¼æ¥å‘½å ä¾‹å¦‚æˆ‘çš„é¡¹ç›®æˆ‘å‘½åä¸º bailinlin.github.io, å…¶æ¬¡,ä½ éœ€è¦è¿›å…¥ä½ æ–°å»ºçš„è¿™ä¸ªæ–‡ä»¶å¤¹,æ‰§è¡Œå‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo init</div></pre></td></tr></table></figure>
<p>ç­‰å¾…ä¸€å®šæ—¶é—´,ä½ ä¼šçœ‹åˆ°ä½ æ–°å»ºçš„æ–‡ä»¶å¤¹é‡Œå‡ºç°äº†å¥½å¤šåˆå§‹åŒ–æ–‡ä»¶,ç°åœ¨è¿™ä¸ªæ—¶å€™ä¸€ä¸ªåŸºæœ¬çš„ç®€å•åšå®¢æ­å»ºæˆåŠŸäº†,ä½ è¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo s -p 3000</div></pre></td></tr></table></figure>
<p> å°±èƒ½åœ¨ localhost:3000 ä¸­çœ‹åˆ°ä¸€ä¸ªåšå®¢ç½‘ç«™äº†,ç°åœ¨ä½ è¦åšçš„å°±æ˜¯ä¸ºä½ çš„åšå®¢ç½‘ç«™åšä¸€äº›ä¸ªæ€§åŒ–çš„å®šåˆ¶,æ‰“å¼€_config.yml æ–‡ä»¶.ä¿®æ”¹æ–‡ä»¶å†…çš„å‚æ•°,</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">title: ç™½éœ¸å¤©çš„åšå®¢              //åšå®¢ç½‘ç«™çš„title</div><div class="line">subtitle:                      //å­æ ‡é¢˜</div><div class="line">description: å‰ç«¯,ç™½éœ¸å¤©,åšå®¢   //ç½‘ç«™æè¿°</div><div class="line">author: bailinlin             //ç½‘ç«™ä½œè€…</div><div class="line">language: zh-Hans            //ç½‘ç«™è¯­è¨€,ç”¨äºæœ¬åœ°åŒ–</div><div class="line">...                          // ç­‰å…¶å®ƒé…ç½®</div></pre></td></tr></table></figure>
</code></pre><h2 id="å‘å¸ƒåšå®¢"><a href="#å‘å¸ƒåšå®¢" class="headerlink" title="å‘å¸ƒåšå®¢"></a>å‘å¸ƒåšå®¢</h2><h3 id="å…³è”è¿œç¨‹ä»“åº“"><a href="#å…³è”è¿œç¨‹ä»“åº“" class="headerlink" title="å…³è”è¿œç¨‹ä»“åº“"></a>å…³è”è¿œç¨‹ä»“åº“</h3><p>åšå®¢æ­å»ºå¥½ä¹‹å,ä½ éœ€è¦åšçš„æ˜¯æŠŠåšå®¢å‘å¸ƒåˆ° github ä¸Š,é¦–å…ˆä½ éœ€è¦åœ¨ github ä¸Šæ–°å»ºä¸€ä¸ªä»“åº“,å‘½åå’Œä½ æ–°å»ºçš„æ–‡ä»¶å¤¹ä¸€æ ·, username.githhub.io å€¼å¾—æ³¨æ„çš„æ˜¯,è¿™é‡Œçš„ username å¿…é¡»å’Œä½ çš„github ç”¨æˆ·åä¸€æ ·,å¤§å°å†™ä¹Ÿè¦ä¸€æ ·.ç„¶åä½ éœ€è¦è¿›å…¥ä½ çš„æœ¬åœ°æ–‡ä»¶å¤¹,å…³è”ä½ çš„è¿œç¨‹ä»“åº“.</p>
<p>é¦–å…ˆ<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git init</div></pre></td></tr></table></figure></p>
<p>ç„¶å<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote add origin git@github.com:username/username.github.io.git</div></pre></td></tr></table></figure></p>
<p>ç„¶åæˆ‘ä»¬åªè¦æŠŠä»£ç æ¨åˆ°è¿œç¨‹ä»“åº“å°±è¡Œäº†,ä¸è¿‡è¿™é‡Œæˆ‘ä»¬è¦æœ‰ä¸ªçº¦å®š,æˆ‘ä»¬åœ¨ master ä¸Šå‘å¸ƒåšå®¢,åœ¨ dev åˆ†æ”¯ä¸Šä¿®æ”¹æˆ‘ä»¬çš„åšå®¢å†…å®¹å’Œé¡¹ç›®é…ç½®,ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å‘å¸ƒåšå®¢å,master åˆ†æ”¯ä¸Šå°±æ˜¯æˆ‘ä»¬çš„åšå®¢çš„é™æ€æ–‡ä»¶,dev åˆ†æ”¯ä¸Šçš„ä»£ç å°±æ˜¯æˆ‘ä»¬ä¸–çºªç»´æŠ¤çš„åšå®¢å†…å®¹,å¦‚å›¾<br>master åˆ†æ”¯:<br><img src="/images/blog/master.png" alt="masteråˆ†æ”¯"><br>dev åˆ†æ”¯:<br><img src="/images/blog/master.png" alt="masteråˆ†æ”¯"></p>
<h3 id="å®‰è£…-hexo-çš„ä¸€é”®éƒ¨ç½²å‘½ä»¤å·¥å…·"><a href="#å®‰è£…-hexo-çš„ä¸€é”®éƒ¨ç½²å‘½ä»¤å·¥å…·" class="headerlink" title="å®‰è£… hexo çš„ä¸€é”®éƒ¨ç½²å‘½ä»¤å·¥å…·"></a>å®‰è£… hexo çš„ä¸€é”®éƒ¨ç½²å‘½ä»¤å·¥å…·</h3><p> é€šè¿‡npm å®‰è£…<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install hexo-deployer-git --save</div></pre></td></tr></table></figure></p>
<p> ä¿®æ”¹éƒ¨ç½²é…ç½®,åœ¨ _config.yml ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">  <span class="built_in">type</span>: git</div><div class="line">  branch: master</div><div class="line">  repo: git@github.com:bailinlin/bailinlin.github.io.git  //æ­¤å¤„è®°å¾—æ”¹æˆä½ çš„ github ä»“åº“çš„åœ°å€</div></pre></td></tr></table></figure>
<h3 id="ä½ çš„-first-commit"><a href="#ä½ çš„-first-commit" class="headerlink" title="ä½ çš„ first commit"></a>ä½ çš„ first commit</h3><p>æŒ‰ç…§çº¦å®šæˆ‘ä»¬å…ˆåˆ‡åˆ†æ”¯,é€šè¿‡å‘½ä»¤æŠŠé¡¹ç›®åˆ‡æ¢åˆ° dev åˆ†æ”¯<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git checkout -b dev</div></pre></td></tr></table></figure></p>
<p>ç„¶å add ä½ çš„é¡¹ç›®ä»£ç <br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git add .</div></pre></td></tr></table></figure></p>
<p>ä½ çš„ first commit<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git commit -m <span class="string">":tada: init blog"</span></div></pre></td></tr></table></figure></p>
<p>ç„¶å push ä½ çš„ä»£ç åˆ°è¿œç¨‹<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$  git push --set-upstream origin dev</div></pre></td></tr></table></figure></p>
<h3 id="ä½ çš„ç¬¬ä¸€æ¬¡åšå®¢å‘å¸ƒ"><a href="#ä½ çš„ç¬¬ä¸€æ¬¡åšå®¢å‘å¸ƒ" class="headerlink" title="ä½ çš„ç¬¬ä¸€æ¬¡åšå®¢å‘å¸ƒ"></a>ä½ çš„ç¬¬ä¸€æ¬¡åšå®¢å‘å¸ƒ</h3><p>å‘å¸ƒå…¶å®å¾ˆç®€å•çš„,æˆ‘ä»¬ä¹‹å‰ä¹Ÿè¯´æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå‘å¸ƒçš„,æ‰€ä»¥ä½ åªè¦<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure></p>
<p>ç„¶åä½ å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå±äºä½ çš„ github.io çš„ç½‘ç«™äº†</p>
<h2 id="æ”¹å˜ä½ çš„åšå®¢ç½‘ç«™ä¸»é¢˜"><a href="#æ”¹å˜ä½ çš„åšå®¢ç½‘ç«™ä¸»é¢˜" class="headerlink" title="æ”¹å˜ä½ çš„åšå®¢ç½‘ç«™ä¸»é¢˜"></a>æ”¹å˜ä½ çš„åšå®¢ç½‘ç«™ä¸»é¢˜</h2><p>ä¸ªäººæ¯”è¾ƒæ¨èçš„æ˜¯ next ,å¤§é‡çš„ç•™ç™½,è®©ä½ çš„åšå®¢çœ‹èµ·æ¥ç®€æ´å¤§æ–¹,æˆ–åˆ™ä½ å–œæ¬¢å…¶å®ƒçš„ä¸»é¢˜ä¹Ÿè¡Œ,ä½ éœ€è¦åœ¨ä½ çš„åšå®¢æ–‡ä»¶å¤¹é‡Œclone ä¸‹ä½ éœ€è¦çš„ä¸»é¢˜</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</div></pre></td></tr></table></figure>
<p> ç„¶ååœ¨ _config.yml æ–‡ä»¶å¤¹é‡Œä¿®æ”¹ä½ çš„ä¸»é¢˜é…ç½®</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ theme: next</div></pre></td></tr></table></figure>
<p> ç„¶å hexo s å°±èƒ½çœ‹åˆ°ä½ ä¿®æ”¹çš„ä¸»é¢˜ç”Ÿæ•ˆäº†,ä¸ºäº†é˜²æ­¢ clone ä¸‹æ¥çš„ä¸»é¢˜æ–‡ä»¶å’Œè‡ªå·±çš„åšå®¢æ–‡ä»¶å†²çª,æˆ‘åˆ é™¤äº†clone ä¸‹æ¥çš„ .git æ–‡ä»¶.ä½ å†æŒ‰ç…§ä½ çš„ first commit çš„æ“ä½œæäº¤ä½ çš„ä¿®æ”¹å°±è¡Œäº†,ç„¶ååˆ«å¿˜è®°äº† deploy</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/bbt.jpeg"
               alt="bailinlin" />
          <p class="site-author-name" itemprop="name">bailinlin</p>
          <p class="site-description motion-element" itemprop="description">å‰ç«¯,ç™½éœ¸å¤©,åšå®¢</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">13</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bailinlin</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"baibatian"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
